webpackJsonp([1],{"22e4":function(e,t,i){"use strict";(function(e){var o=i("NVJ6"),s=i("gQoh"),a=i("uxah"),l=i("XF4N");t.a={udp_client:null,ip:"",port:0,resetNetworkInfo:function(e,t){this.ip=e,this.port=t,s.a.log("切换到"+e+":"+t),this.udp_client=new UDP.Client(e,t)},buildCommand:function(e,t,i,s,a){var l=9;null!=e&&(l+=e.length);var n=[];if(n.push(o.a.HEAD[0]),n.push(o.a.HEAD[1]),n.push(l),n.push(t),n.push(i),n.push(s>>8),n.push(255&s),n.push(a),null!=e)for(var r=0;r<e.length;r++)n.push(e[r]);var c=0;for(r=0;r<n.length;r++)c+=n[r];return n.push(255&c),n},sendAction:function(t){var i=s.a.getVOBus(t.id);if(null!=i){var n=o.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_MAIN_ALL,r=[];switch(t.type){case"light":n=o.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_LIGHT;var c=0;t.isOn&&(c=100),r.push(t.channel),r.push(c);break;case"dimmer":n=o.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_DIMMER,r.push(t.channel),r.push(t.value);break;case"curtain":n=o.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_CURTAIN,r.push(t.channel),r.push(t.value);break;case"ac":n=o.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_AC;var v=0;t.isOn&&(v+=128),v+=t.lock<<5,v+=t.fan<<3,"制冷"==t.mode?v+=1:"制冷"==t.mode?v+=2:"送风"==t.mode&&(v+=3),r.push(v),r.push(t.value),r.push(128),r.push(28),r.push(128),r.push(25),r.push(0);break;case"scene":n=o.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_SCENE;c=0;t.isOn&&(c=100),r.push(t.channel),r.push(c)}var u=this.buildCommand(r,t.areacode,t.addr,n,o.a.FUNCTION_CODE.WRITE+o.a.FUNCTION_CODE.CONTROL);s.a.log("==> "+s.a.bytes2hex(u));var d=Object(l.a)(a.a.receiveData,i.ws_url);Object(l.b)(e.from(u),d)}else s.a.log("bus is null")}}}).call(t,i("EuP9").Buffer)},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i("7+uW"),s=i("zL8q"),a=i.n(s),l=i("Xxa5"),n=i.n(l),r=i("exGp"),c=i.n(r),v=i("gQoh"),u={data:function(){return{visibleFloor:!1}},props:["golbal"],methods:{floorClick:function(e){for(var t=0;t<this.golbal.blockCur.floors.length;t++){(i=this.golbal.blockCur.floors[t]).active=!1}e.active=!0,this.golbal.floorCur=e,this.visibleFloor=!1,this.golbal.roomCur=this.golbal.floorCur.rooms[0];for(t=0;t<this.golbal.floorCur.rooms.length;t++){var i;(i=this.golbal.floorCur.rooms[t]).active&&(this.golbal.roomCur=i,v.a.getTypeStatus())}},messageClick:function(){"/message"!=this.$route.path&&this.$router.push({path:"/message"})}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header"},[i("div",{staticClass:"divHeaderLeft"},[i("div",{staticClass:"btnHeader",on:{click:function(t){return e.messageClick()}}},[i("i",{staticClass:"icon-mail1"})])]),e._v(" "),e._m(0),e._v(" "),i("div",{staticClass:"divHeaderRight"},[e.golbal.showButtonFloor?i("el-popover",{attrs:{placement:"bottom",width:"100",trigger:"click","popper-class":"popoverFloor"},model:{value:e.visibleFloor,callback:function(t){e.visibleFloor=t},expression:"visibleFloor"}},[i("div",[i("span",{staticClass:"spanTitle"},[e._v("请选择楼层")]),e._v(" "),i("ul",e._l(e.golbal.blockCur.floors,function(t){return i("li",{key:t.id,on:{click:function(i){return e.floorClick(t)}}},[i("i",{staticClass:"icon-office"}),i("span",[e._v(e._s(t.name))]),e._v(" "),t.active?i("div",{staticClass:"checked"},[i("i",{staticClass:"icon-yuanxingxuanzhongfill"})]):e._e()])}),0)]),e._v(" "),i("el-button",{staticClass:"btnHeaderFloor",attrs:{slot:"reference"},slot:"reference"},[i("span",[e._v(e._s(e.golbal.floorCur.name))]),e._v(" "),i("i",{staticClass:"icon-caret-down"})])],1):e._e()],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"divHeaderMain"},[t("img",{staticClass:"imgHeaderLogo",attrs:{src:"static/images/logo.png"}})])}]},C=i("VU/8")(u,d,!1,null,null,null).exports,h={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"footer"},[i("ul",[i("li",[i("router-link",{class:{routerC:"favorite"==e.golbal.menuCur},attrs:{to:"/favorite","active-class":"routerC",tag:"div"}},[i("i",{staticClass:"icon-favoritesfilling"}),e._v(" "),i("span",[e._v("习惯")])])],1),e._v(" "),i("li",[i("router-link",{attrs:{to:"/room","active-class":"routerC",tag:"div"}},[i("i",{staticClass:"icon-home3"}),e._v(" "),i("span",[e._v("区域")])])],1),e._v(" "),i("li",[i("router-link",{attrs:{to:"/user","active-class":"routerC",tag:"div"}},[i("i",{staticClass:"icon-accountfilling"}),e._v(" "),i("span",[e._v("我的")])])],1)])])},staticRenderFns:[]},f=i("VU/8")({props:["golbal"]},h,!1,null,null,null).exports,g=i("XF4N"),m=i("uxah"),p={name:"App",components:{FrameHeader:C,FrameFooter:f},data:function(){return{golbal:{menuCur:"",type:[{id:1,name:"all",icon:"icon-all",isOn:!1},{id:2,name:"light",icon:"icon-ls_1_light",isOn:!1},{id:3,name:"curtain",icon:"icon-ls_23_curtain",isOn:!1},{id:4,name:"ac",icon:"icon-ls_7_ac",isOn:!1},{id:5,name:"scene",icon:"icon-ls_26_go_off_work",isOn:!1}],typeCur:"all",showButtonFloor:!1,blockCur:{},floorCur:{},roomCur:{},myProject:{id:"b0b502b7-c000-4000-a000-0547116af000",name:"万科水晶城",active:!0,blocks:[{id:"b0b502b7-c001-4000-a000-0547116af000",name:"1座",floors:[{id:"b0b502b7-c001-4001-a000-0547116af000",name:"楼层一",active:!0,rooms:[{id:"b0b502b7-c001-4001-a001-0547116af000",name:"主卧",busId:"7e0378ca-c813-4056-a001-485e2970c001",active:!0,devices:[{id:"b0b502b7-c001-4001-a001-0547116af001",type:"light",areacode:1,addr:1,channel:1,name:"吊灯",summary:"关闭",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af002",type:"light",areacode:1,addr:1,channel:2,name:"壁灯",summary:"开启",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!0},{id:"b0b502b7-c001-4001-a001-0547116af003",type:"curtain",areacode:1,addr:1,channel:3,name:"窗帘",summary:"50%",icon:"icon-ls_23_curtain",isFavorite:!1,hits:0,value:10},{id:"b0b502b7-c001-4001-a001-0547116af004",type:"dimmer",areacode:1,addr:1,channel:2,name:"床头灯",summary:"40%",icon:"icon-ls_4_dimmer",isFavorite:!1,hits:0,value:40},{id:"b0b502b7-c001-4001-a001-0547116af005",type:"ac",name:"空调",summary:"制冷 26℃",icon:"icon-ls_7_ac",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"制冷",fan:3,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af006",type:"scene",areacode:1,addr:1,channel:1,name:"场景",summary:"关闭",icon:"icon-ls_26_go_off_work",isFavorite:!1,hits:0,isOn:!1}]}]}]}]},testServer:"ws://192.168.0.119:8001",messages:[{id:1,title:"系统通知",date:"2020-07-01 07:22:14",content:"停服维护已经结束，停服期间给您带来的不便，我们深表歉意。"},{id:2,title:"版本更新公告",date:"2020-06-25 17:43:53",content:"我们预计于北京时间：2020-06-26 02:00 - 04:00进行为期两个小时的停服更新维护。"},{id:3,title:"升级提醒",date:"2020-06-01 15:14:32",content:"为了使用户获得更好的体验，我们刚刚完成了一次热更，请重新启动程序以使更新生效。"},{id:4,title:"系统通知",date:"2020-05-28 12:53:43",content:"停服维护已经结束，停服期间给您带来的不便，我们深表歉意。"}],themeCur:1},logList:[]}},methods:{getData:function(){var e=this;return c()(n.a.mark(function t(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t,e)}))()}},mounted:function(){v.a.root=this},beforeMount:function(){var e=window.localStorage;null!=e.getItem("myProject")&&(this.golbal.myProject=JSON.parse(e.getItem("myProject"))),console.log(this.golbal.myProject);for(var t=0;t<this.golbal.myProject.blocks.length;t++){var i=this.golbal.myProject.blocks[t];i.active=!1;for(var o=0;o<i.floors.length;o++){var s=i.floors[o];s.active=!1;for(var a=0;a<s.rooms.length;a++){s.rooms[a].active=!1}}}this.golbal.blockCur=this.golbal.myProject.blocks[0],this.golbal.blockCur.active=!0,this.golbal.floorCur=this.golbal.blockCur.floors[0],this.golbal.floorCur.active=!0,this.golbal.roomCur=this.golbal.floorCur.rooms[0],this.golbal.roomCur.active=!0;var l=[];for(t=0;t<this.golbal.myProject.blocks.length;t++)for(o=0;o<this.golbal.myProject.blocks[t].floors.length;o++)for(a=0;a<this.golbal.myProject.blocks[t].floors[o].rooms.length;a++)for(var n=0;n<this.golbal.myProject.blocks[t].floors[o].rooms[a].devices.length;n++)l.push({device:this.golbal.myProject.blocks[t].floors[o].rooms[a].devices[n],busId:this.golbal.myProject.blocks[t].floors[o].rooms[a].busId});v.a.devicesAll=l,v.a.MyProject=this.golbal.myProject,v.a.golbal=this.golbal,v.a.getTypeStatus();for(t=0;t<this.golbal.myProject.buses.length;t++){var r=this.golbal.myProject.buses[t];Object(g.a)(m.a.receiveData,r.ws_url)}}},b={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"page"}},[t("FrameHeader",{attrs:{golbal:this.golbal}}),this._v(" "),t("router-view",{attrs:{golbal:this.golbal,logs:this.logList}}),this._v(" "),t("FrameFooter",{attrs:{golbal:this.golbal}})],1)},staticRenderFns:[]},_=i("VU/8")(p,b,!1,null,null,null).exports,k=i("/ocq"),y=i("I0MY"),w=i.n(y),E=i("22e4"),T={data:function(){return{}},props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite},switchClick:function(e){e.isOn=!e.isOn,v.a.getTypeStatus(),E.a.sendAction(e)}}},D={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"divDevice",on:{click:function(t){return e.switchClick(e.device)}}},[i("div",{staticClass:"divFavorite",on:{click:function(t){return t.stopPropagation(),e.favoriteClick(e.device)}}},[i("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),i("div",{staticClass:"divIcon"},[i("i",{class:[e.device.icon,{iconC:e.device.isOn}]})]),e._v(" "),i("div",{staticClass:"divInfo"},[i("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),i("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(e.device.isOn?"开启":"关闭"))])]),e._v(" "),i("div",{staticClass:"divControl"},[i("div",{staticClass:"btnSwitch"},[i("i",{staticClass:"icon-ls_9_on",class:{iconC:e.device.isOn}})])])])},staticRenderFns:[]},I=i("VU/8")(T,D,!1,null,null,null).exports,P={data:function(){return{}},props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite},curtainClick:function(e,t){e.value=t,v.a.getTypeStatus(),E.a.sendAction(this.device)}}},A={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"divDevice"},[i("div",{staticClass:"divFavorite",on:{click:function(t){return e.favoriteClick(e.device)}}},[i("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),i("div",{staticClass:"divIcon"},[i("i",{class:[e.device.icon,{iconC:e.device.isOn}]})]),e._v(" "),i("div",{staticClass:"divInfo"},[i("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),i("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(0==e.device.value?"关闭":100==e.device.value?"开启":"停止"))])]),e._v(" "),i("div",{staticClass:"divControl"},[i("div",{class:"btnCurtain btnCurtain1"+(0==e.device.value?" iconC":""),on:{click:function(t){return e.curtainClick(e.device,0)}}},[i("i",{staticClass:"icon-arrow-right"}),i("i",{staticClass:"icon-arrow-left"})]),e._v(" "),i("div",{class:"btnCurtain btnCurtain2"+(101==e.device.value?" iconC":""),on:{click:function(t){return e.curtainClick(e.device,101)}}},[i("i",{staticClass:"icon-pause2"})]),e._v(" "),i("div",{class:"btnCurtain btnCurtain3"+(100==e.device.value?" iconC":""),on:{click:function(t){return e.curtainClick(e.device,100)}}},[i("i",{staticClass:"icon-arrow-left"}),i("i",{staticClass:"icon-arrow-right"})])])])},staticRenderFns:[]},F=i("VU/8")(P,A,!1,null,null,null).exports,O={props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite},dimmerChange:function(){v.a.getTypeStatus(),E.a.sendAction(this.device)}},mounted:function(){this.dimmerValue=this.device.value}},S={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"divDevice"},[i("div",{staticClass:"divFavorite",on:{click:function(t){return e.favoriteClick(e.device)}}},[i("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),i("div",{staticClass:"divIcon"},[i("i",{class:[e.device.icon,{iconC:e.device.value>0}]})]),e._v(" "),i("div",{staticClass:"divInfo"},[i("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),i("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(e.device.value)+"%")])]),e._v(" "),i("div",{staticClass:"divControl"},[i("div",{staticClass:"divDimmer1"},[i("el-slider",{attrs:{"show-tooltip":!1},on:{change:e.dimmerChange},model:{value:e.device.value,callback:function(t){e.$set(e.device,"value",t)},expression:"device.value"}})],1)])])},staticRenderFns:[]},R=i("VU/8")(O,S,!1,null,null,null).exports,V={data:function(){return{drawer:!1,direction:"btt",heightDrawer:window.innerHeight-95,visibleFan:!1,visibleLock:!1}},props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite},switchClick:function(e){e.isOn=!e.isOn,v.a.getTypeStatus(),E.a.sendAction(this.device)},addClick:function(e){e.value<36&&e.isOn&&(e.value=e.value+1,e.summary=e.mode+" "+e.value+"℃",E.a.sendAction(this.device))},minusClick:function(e){e.value>17&&e.isOn&&(e.value=e.value-1,e.summary=e.mode+" "+e.value+"℃",E.a.sendAction(this.device))},drawerClick:function(e){this.drawer=!0},modeClick:function(e,t){e.isOn&&(e.mode=t,e.summary=e.mode+" "+e.value+"℃",E.a.sendAction(this.device))},fanClick:function(e,t){e.fan=t,this.visibleFan=!1,E.a.sendAction(this.device)},lockClick:function(e,t){e.lock=t,this.visibleLock=!1,E.a.sendAction(this.device)}}},U={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"divDevice",on:{click:function(t){return e.drawerClick(e.device)}}},[i("div",{staticClass:"divFavorite",on:{click:function(t){return t.stopPropagation(),e.favoriteClick(e.device)}}},[i("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),i("div",{staticClass:"divIcon"},[i("i",{class:e.device.icon})]),e._v(" "),i("div",{staticClass:"divInfo"},[i("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),i("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(e.device.summary))])]),e._v(" "),i("div",{staticClass:"divControl"},[i("div",{staticClass:"btnAC btnAC1",on:{click:function(t){return t.stopPropagation(),e.minusClick(e.device)}}},[i("i",{staticClass:"icon-move1"})]),e._v(" "),i("div",{staticClass:"btnAC btnAC2",on:{click:function(t){return t.stopPropagation(),e.switchClick(e.device)}}},[i("i",{staticClass:"icon-ls_9_on",class:{iconC:e.device.isOn}})]),e._v(" "),i("div",{staticClass:"btnAC btnAC3",on:{click:function(t){return t.stopPropagation(),e.addClick(e.device)}}},[i("i",{staticClass:"icon-add1"})])]),e._v(" "),i("el-drawer",{attrs:{visible:e.drawer,direction:e.direction,"append-to-body":!0,"custom-class":"drawerAC",size:e.heightDrawer+"px"},on:{"update:visible":function(t){e.drawer=t}}},[i("div",{staticClass:"divDrawerACTitle"},[i("span",{staticClass:"spanDrawerAC1"},[e._v("温控器")]),e._v(" "),i("span",{staticClass:"spanDrawerAC2"},[e._v("当前温度"+e._s(e.device.value)+"℃")])]),e._v(" "),i("div",{staticClass:"divDrawerAC"},[i("div",{staticClass:"divDrawerACScreen"},[i("span",{staticClass:"spanDrawerAC3"},[e._v(e._s(e.device.mode))]),e._v(" "),i("div",{staticClass:"divDrawerACTemperature"},[i("div",{staticClass:"divDrawerACTemperature1",on:{click:function(t){return t.stopPropagation(),e.minusClick(e.device)}}},[i("i",{staticClass:"icon-move1"})]),e._v(" "),i("div",{staticClass:"divDrawerACTemperature2"},[e._v(e._s(e.device.value))]),e._v(" "),i("div",{staticClass:"divDrawerACTemperature3",on:{click:function(t){return t.stopPropagation(),e.addClick(e.device)}}},[i("i",{staticClass:"icon-add1"})])]),e._v(" "),i("span",{staticClass:"spanDrawerAC4"},[e._v("℃")])]),e._v(" "),i("div",{staticClass:"divDrawerACMode"},[i("div",{staticClass:"divDrawerACModeC"},[i("el-popover",{attrs:{placement:"top",width:"50",trigger:"click","popper-class":"popoverAC",disabled:!e.device.isOn},model:{value:e.visibleFan,callback:function(t){e.visibleFan=t},expression:"visibleFan"}},[i("div",[i("span",{staticClass:"spanTitle"},[e._v("请选择风速")]),e._v(" "),i("ul",[i("li",{on:{click:function(t){return t.stopPropagation(),e.fanClick(e.device,"0")}}},[i("i",{staticClass:"icon-abc"}),i("span",[e._v("自动")])]),e._v(" "),i("li",{on:{click:function(t){return t.stopPropagation(),e.fanClick(e.device,"1")}}},[i("i",{staticClass:"icon-propeller"}),i("span",[e._v("低速")])]),e._v(" "),i("li",{on:{click:function(t){return t.stopPropagation(),e.fanClick(e.device,"2")}}},[i("i",{staticClass:"icon-screw"}),i("span",[e._v("中速")])]),e._v(" "),i("li",{on:{click:function(t){return t.stopPropagation(),e.fanClick(e.device,"3")}}},[i("i",{staticClass:"icon-screw2"}),i("span",[e._v("高速")])])])]),e._v(" "),i("el-button",{staticClass:"btnDeviceAcFan",attrs:{slot:"reference"},slot:"reference"},[i("i",{class:0==e.device.fan?"icon-abc":1==e.device.fan?"icon-propeller":2==e.device.fan?"icon-screw":"icon-screw2"})])],1)],1),e._v(" "),i("div",{on:{click:function(t){return t.stopPropagation(),e.modeClick(e.device,"制热")}}},[i("i",{staticClass:"icon-sun",class:{iconC:"制热"==e.device.mode}})]),e._v(" "),i("div",{on:{click:function(t){return t.stopPropagation(),e.modeClick(e.device,"制冷")}}},[i("i",{staticClass:"icon-kongdiao",class:{iconC:"制冷"==e.device.mode}})]),e._v(" "),i("div",{on:{click:function(t){return t.stopPropagation(),e.modeClick(e.device,"送风")}}},[i("i",{staticClass:"icon-fan",class:{iconC:"送风"==e.device.mode}})]),e._v(" "),i("div",{staticClass:"divDrawerACModeC"},[i("el-popover",{attrs:{placement:"top",width:"50",trigger:"click","popper-class":"popoverAC",disabled:!e.device.isOn},model:{value:e.visibleLock,callback:function(t){e.visibleLock=t},expression:"visibleLock"}},[i("div",[i("span",{staticClass:"spanTitle"},[e._v("请选择")]),e._v(" "),i("ul",[i("li",{on:{click:function(t){return t.stopPropagation(),e.lockClick(e.device,"0")}}},[i("i",{staticClass:"icon-unlock"}),i("span",[e._v("解锁")])]),e._v(" "),i("li",{on:{click:function(t){return t.stopPropagation(),e.lockClick(e.device,"1")}}},[i("i",{staticClass:"icon-lock1"}),i("span",[e._v("锁定按键")])]),e._v(" "),i("li",{on:{click:function(t){return t.stopPropagation(),e.lockClick(e.device,"2")}}},[i("i",{staticClass:"icon-data"}),i("span",[e._v("锁定数据")])])])]),e._v(" "),i("el-button",{staticClass:"btnDeviceAcFan",attrs:{slot:"reference"},slot:"reference"},[i("i",{class:0==e.device.lock?"icon-unlock":1==e.device.lock?"icon-lock1":"icon-data"})])],1)],1)]),e._v(" "),i("div",{staticClass:"btnDrawerACSwitch",on:{click:function(t){return t.stopPropagation(),e.switchClick(e.device)}}},[i("i",{staticClass:"icon-ls_9_on",class:{iconC:e.device.isOn}})])])])],1)},staticRenderFns:[]},x=i("VU/8")(V,U,!1,null,null,null).exports,j={data:function(){return{}},props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite},switchClick:function(e){e.isOn=!e.isOn,v.a.getTypeStatus(),E.a.sendAction(e)}}},N={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"divDevice",on:{click:function(t){return e.switchClick(e.device)}}},[i("div",{staticClass:"divFavorite",on:{click:function(t){return t.stopPropagation(),e.favoriteClick(e.device)}}},[i("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),i("div",{staticClass:"divIcon"},[i("i",{class:[e.device.icon,{iconC:e.device.isOn}]})]),e._v(" "),i("div",{staticClass:"divInfo"},[i("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),i("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(e.device.isOn?"开启":"关闭"))])]),e._v(" "),i("div",{staticClass:"divControl"},[i("div",{staticClass:"btnSwitch"},[i("i",{staticClass:"icon-ls_9_on",class:{iconC:e.device.isOn}})])])])},staticRenderFns:[]},M=i("VU/8")(j,N,!1,null,null,null).exports;o.default.use(w.a,{name:"v-touch"});var L={components:{DeviceLight:I,DeviceCurtain:F,DeviceDimmer:R,DeviceAC:x,DeviceScene:M},data:function(){return{heightRoom:window.innerHeight-195,isGallery:!0}},props:["golbal"],methods:{roomClick:function(e){for(var t=0;t<this.golbal.floorCur.rooms.length;t++){this.golbal.floorCur.rooms[t].active=!1}e.active=!0,this.golbal.roomCur=e},typeClick:function(e){this.golbal.typeCur=e},onSwipeLeft:function(){for(var e=0,t=0;t<this.golbal.floorCur.rooms.length;t++){if(this.golbal.floorCur.rooms[t]==this.golbal.roomCur){e=t;break}}e<this.golbal.floorCur.rooms.length-1&&(e+=1),this.roomClick(this.golbal.floorCur.rooms[e])},onSwipeRight:function(){for(var e=0,t=0;t<this.golbal.floorCur.rooms.length;t++){if(this.golbal.floorCur.rooms[t]==this.golbal.roomCur){e=t;break}}e>0&&(e-=1),this.roomClick(this.golbal.floorCur.rooms[e])}},mounted:function(){this.golbal.showButtonFloor=!0,this.golbal.menuCur="favorite"}},B={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main"},[i("v-touch",{staticStyle:{"touch-action":"pan-y!important"},attrs:{tag:"div"},on:{swipeleft:e.onSwipeLeft,swiperight:e.onSwipeRight}},[i("div",{staticClass:"divRoomTop"},[i("ul",e._l(e.golbal.floorCur.rooms,function(t){return i("li",{key:t.id,class:{liRoomTopC:t.active},on:{click:function(i){return e.roomClick(t)}}},[e._v(e._s(t.name))])}),0)]),e._v(" "),i("div",{staticClass:"divRoomTop2"},[i("ul",[i("li",{class:{liRoomTopC:"all"==e.golbal.typeCur},on:{click:function(t){return e.typeClick("all")}}},[i("i",{staticClass:"icon-all"})]),e._v(" "),i("li",{class:{liRoomTopC:"light"==e.golbal.typeCur},on:{click:function(t){return e.typeClick("light")}}},[i("i",{staticClass:"icon-ls_1_light"})]),e._v(" "),i("li",{class:{liRoomTopC:"curtain"==e.golbal.typeCur},on:{click:function(t){return e.typeClick("curtain")}}},[i("i",{staticClass:"icon-ls_23_curtain"})]),e._v(" "),i("li",{class:{liRoomTopC:"ac"==e.golbal.typeCur},on:{click:function(t){return e.typeClick("ac")}}},[i("i",{staticClass:"icon-ls_7_ac"})]),e._v(" "),i("li",{class:{liRoomTopC:"scene"==e.golbal.typeCur},on:{click:function(t){return e.typeClick("scene")}}},[i("i",{staticClass:"icon-ls_26_go_off_work"})])])]),e._v(" "),i("div",{staticClass:"divRoom",style:"height:"+e.heightRoom+"px"},[i("div",{staticClass:"divView"},[i("div",{class:"btnList"+(e.isGallery?"":" btnViewC"),on:{click:function(t){e.isGallery=!1}}},[i("i",{staticClass:"icon-viewlist"})]),e._v(" "),i("div",{class:"btnGallery"+(e.isGallery?" btnViewC":""),on:{click:function(t){e.isGallery=!0}}},[i("i",{staticClass:"icon-viewgallery"})])]),e._v(" "),i("div",{class:"divRoomContent"+(e.isGallery?" divRoomGallery":" divRoomList")},[e._l(e.golbal.roomCur.devices,function(t){return["light"!=t.type||t.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur||!t.isFavorite?e._e():i("DeviceLight",{key:t.id,attrs:{device:t}}),e._v(" "),"curtain"!=t.type||t.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur||!t.isFavorite?e._e():i("DeviceCurtain",{key:t.id,attrs:{device:t}}),e._v(" "),"dimmer"!=t.type||t.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur&&"light"!=e.golbal.typeCur||!t.isFavorite?e._e():i("DeviceDimmer",{key:t.id,attrs:{device:t}}),e._v(" "),"ac"!=t.type||t.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur||!t.isFavorite?e._e():i("DeviceAC",{key:t.id,attrs:{device:t}}),e._v(" "),"scene"!=t.type||t.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur||!t.isFavorite?e._e():i("DeviceScene",{key:t.id,attrs:{device:t}})]})],2)])])],1)},staticRenderFns:[]},Y=i("VU/8")(L,B,!1,null,null,null).exports;o.default.use(w.a,{name:"v-touch"});var H={components:{DeviceLight:I,DeviceCurtain:F,DeviceDimmer:R,DeviceAC:x,DeviceScene:M},data:function(){return{heightRoom:window.innerHeight-195,isGallery:!0}},props:["golbal"],methods:{roomClick:function(e){for(var t=0;t<this.golbal.floorCur.rooms.length;t++){this.golbal.floorCur.rooms[t].active=!1}e.active=!0,this.golbal.roomCur=e,v.a.getTypeStatus()},typeClick:function(e){this.golbal.typeCur=e},onSwipeLeft:function(){for(var e=0,t=0;t<this.golbal.floorCur.rooms.length;t++){if(this.golbal.floorCur.rooms[t]==this.golbal.roomCur){e=t;break}}e<this.golbal.floorCur.rooms.length-1&&(e+=1),this.roomClick(this.golbal.floorCur.rooms[e])},onSwipeRight:function(){for(var e=0,t=0;t<this.golbal.floorCur.rooms.length;t++){if(this.golbal.floorCur.rooms[t]==this.golbal.roomCur){e=t;break}}e>0&&(e-=1),this.roomClick(this.golbal.floorCur.rooms[e])}},mounted:function(){this.golbal.showButtonFloor=!0,this.golbal.menuCur="room"}},G={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main"},[i("v-touch",{staticStyle:{"touch-action":"pan-y!important"},attrs:{tag:"div"},on:{swipeleft:e.onSwipeLeft,swiperight:e.onSwipeRight}},[i("div",{staticClass:"divRoomTop"},[i("ul",e._l(e.golbal.floorCur.rooms,function(t){return i("li",{key:t.id,class:{liRoomTopC:t.active},on:{click:function(i){return e.roomClick(t)}}},[e._v(e._s(t.name))])}),0)]),e._v(" "),i("div",{staticClass:"divRoomTop2"},[i("ul",[i("li",{class:{liRoomTopC:"all"==e.golbal.typeCur},on:{click:function(t){return e.typeClick("all")}}},[i("i",{staticClass:"icon-all"})]),e._v(" "),i("li",{class:"light"==e.golbal.typeCur?"liRoomTopC":e.golbal.type[1].isOn?"liRoomTopBlue":"",on:{click:function(t){return e.typeClick("light")}}},[i("i",{staticClass:"icon-ls_1_light"})]),e._v(" "),i("li",{class:"curtain"==e.golbal.typeCur?"liRoomTopC":e.golbal.type[2].isOn?"liRoomTopBlue":"",on:{click:function(t){return e.typeClick("curtain")}}},[i("i",{staticClass:"icon-ls_23_curtain"})]),e._v(" "),i("li",{class:"ac"==e.golbal.typeCur?"liRoomTopC":e.golbal.type[3].isOn?"liRoomTopBlue":"",on:{click:function(t){return e.typeClick("ac")}}},[i("i",{staticClass:"icon-ls_7_ac"})]),e._v(" "),i("li",{class:"scene"==e.golbal.typeCur?"liRoomTopC":e.golbal.type[4].isOn?"liRoomTopBlue":"",on:{click:function(t){return e.typeClick("scene")}}},[i("i",{staticClass:"icon-ls_26_go_off_work"})])])]),e._v(" "),i("div",{staticClass:"divRoom",style:"height:"+e.heightRoom+"px"},[i("div",{staticClass:"divView"},[i("div",{class:"btnList"+(e.isGallery?"":" btnViewC"),on:{click:function(t){e.isGallery=!1}}},[i("i",{staticClass:"icon-viewlist"})]),e._v(" "),i("div",{class:"btnGallery"+(e.isGallery?" btnViewC":""),on:{click:function(t){e.isGallery=!0}}},[i("i",{staticClass:"icon-viewgallery"})])]),e._v(" "),i("div",{class:"divRoomContent"+(e.isGallery?" divRoomGallery":" divRoomList")},[e._l(e.golbal.roomCur.devices,function(t){return["light"!=t.type||t.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur?e._e():i("DeviceLight",{key:t.id,attrs:{device:t}}),e._v(" "),"curtain"!=t.type||t.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur?e._e():i("DeviceCurtain",{key:t.id,attrs:{device:t}}),e._v(" "),"dimmer"!=t.type||t.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur&&"light"!=e.golbal.typeCur?e._e():i("DeviceDimmer",{key:t.id,attrs:{device:t}}),e._v(" "),"ac"!=t.type||t.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur?e._e():i("DeviceAC",{key:t.id,attrs:{device:t}}),e._v(" "),"scene"!=t.type||t.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur?e._e():i("DeviceScene",{key:t.id,attrs:{device:t}})]})],2)])])],1)},staticRenderFns:[]},$=i("VU/8")(H,G,!1,null,null,null).exports,W=i("mvHQ"),Q=i.n(W),z=i("mtWM"),J=i.n(z),X={data:function(){return{drawerBlock:!1,heightDrawerBlock:window.innerHeight-159,drawerTheme:!1,drawerTest:!1,widthDrawerTest:window.innerWidth,widthDrawerTheme:window.innerWidth,tabsTest:"tab1",formTest:{server:""},heightSendMessage:window.innerHeight-180}},props:["golbal","logs"],methods:{drawerBlockClick:function(){this.drawerBlock=!0},drawerThemeClick:function(){this.drawerTheme=!0},themeClick:function(e){this.golbal.themeCur!=e&&(document.getElementById("style").attributes[2].value="static/css/style"+e+".css"),this.golbal.themeCur=e},drawerTestClick:function(){this.drawerTest=!0},blockClick:function(e){for(var t=0;t<this.golbal.myProject.blocks.length;t++){(i=this.golbal.myProject.blocks[t]).active=!1}e.active=!0,this.golbal.blockCur=e,this.golbal.floorCur=this.golbal.blockCur.floors[0];for(t=0;t<this.golbal.blockCur.floors.length;t++){(i=this.golbal.blockCur.floors[t]).active&&(this.golbal.floorCur=i)}this.golbal.roomCur=this.golbal.floorCur.rooms[0];for(t=0;t<this.golbal.floorCur.rooms.length;t++){var i;(i=this.golbal.floorCur.rooms[t]).active&&(this.golbal.roomCur=i,v.a.getTypeStatus())}this.drawerBlock=!1},getData:function(e){var t=this;J.a.post(e).then(function(e){try{console.log(e.data.project),window.localStorage.setItem("myProject",Q()(e.data.project)),t.golbal.myProject=e.data.project;for(var i=0;i<t.golbal.myProject.blocks.length;i++){var o=t.golbal.myProject.blocks[i];o.active=!1;for(var s=0;s<o.floors.length;s++){var a=o.floors[s];a.active=!1;for(var l=0;l<a.rooms.length;l++){a.rooms[l].active=!1}}}t.golbal.blockCur=t.golbal.myProject.blocks[0],t.golbal.blockCur.active=!0,t.golbal.floorCur=t.golbal.blockCur.floors[0],t.golbal.floorCur.active=!0,t.golbal.roomCur=t.golbal.floorCur.rooms[0],t.golbal.roomCur.active=!0;var n=[];for(i=0;i<t.golbal.myProject.blocks.length;i++)for(s=0;s<t.golbal.myProject.blocks[i].floors.length;s++)for(l=0;l<t.golbal.myProject.blocks[i].floors[s].rooms.length;l++)for(var r=0;r<t.golbal.myProject.blocks[i].floors[s].rooms[l].devices.length;r++)n.push({device:t.golbal.myProject.blocks[i].floors[s].rooms[l].devices[r],busId:t.golbal.myProject.blocks[i].floors[s].rooms[l].busId});v.a.devicesAll=n,v.a.MyProject=t.golbal.myProject,v.a.golbal=t.golbal,v.a.getTypeStatus();for(i=0;i<t.golbal.myProject.buses.length;i++){var c=t.golbal.myProject.buses[i];Object(g.a)(m.a.receiveData,c.ws_url)}alert("获取成功")}catch(e){t.onLog(e),alert("获取失败")}}).catch(function(e){console.log(e),t.onLog(e),alert("获取失败")})},scanQRCode:function(){var e=this;cordova.plugins.barcodeScanner.scan(function(t){var i=t.text.replace("linkcontrol","http");console.log(i),e.getData(i)},function(e){alert(e)})},submitTest:function(){this.golbal.testServer=this.formTest.server},clearLog:function(){this.logs=[]}},mounted:function(){this.golbal.showButtonFloor=!1,this.golbal.menuCur="user",this.formTest.server=this.golbal.testServer}},q={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main"},[e._m(0),e._v(" "),i("div",{staticClass:"divUserContent"},[i("span",{staticClass:"title"},[e._v("管理设置")]),e._v(" "),i("div",{staticClass:"content"},[i("ul",[i("li",{on:{click:function(t){return e.scanQRCode()}}},[i("i",{staticClass:"icon-scanning"}),i("span",[e._v("扫一扫获取配置")]),e._m(1)]),e._v(" "),i("li",{on:{click:function(t){return e.drawerBlockClick()}}},[i("i",{staticClass:"icon-office"}),i("span",[e._v("楼栋管理")]),e._m(2)]),e._v(" "),i("li",{on:{click:function(t){return e.drawerThemeClick()}}},[i("i",{staticClass:"icon-pic"}),i("span",[e._v("主题样式")]),e._m(3)]),e._v(" "),i("li",{on:{click:function(t){return e.drawerTestClick()}}},[i("i",{staticClass:"icon-wrench"}),i("span",[e._v("调试")]),e._m(4)])])])]),e._v(" "),i("el-drawer",{attrs:{title:"请选择楼栋",visible:e.drawerBlock,direction:"btt","append-to-body":!0,"custom-class":"drawerBlock",size:e.heightDrawerBlock+"px"},on:{"update:visible":function(t){e.drawerBlock=t}}},[i("ul",e._l(e.golbal.myProject.blocks,function(t){return i("li",{key:t.id,on:{click:function(i){return e.blockClick(t)}}},[i("i",{staticClass:"icon-office"}),i("span",[e._v(e._s(t.name))]),e._v(" "),t.active?i("div",{staticClass:"checked"},[i("i",{staticClass:"icon-yuanxingxuanzhongfill"})]):e._e()])}),0)]),e._v(" "),i("el-drawer",{attrs:{title:"请选择主题样式",visible:e.drawerTheme,direction:"rtl","append-to-body":!0,"custom-class":"drawerTheme",size:e.widthDrawerTheme+"px"},on:{"update:visible":function(t){e.drawerTheme=t}}},[i("div",{staticClass:"divUserTheme"},[i("div",{class:"divUserThemeItem"+(1==e.golbal.themeCur?"":" divUserThemeItemC"),on:{click:function(t){return e.themeClick(1)}}},[i("div",{staticClass:"divUserThemeIcon"},[i("i",{staticClass:"icon-checkmark"})]),e._v(" "),i("div",{staticClass:"divUserThemeBoard"}),e._v(" "),i("img",{attrs:{src:"static/images/theme1.jpg"}})]),e._v(" "),i("div",{class:"divUserThemeItem"+(2==e.golbal.themeCur?"":" divUserThemeItemC"),on:{click:function(t){return e.themeClick(2)}}},[i("div",{staticClass:"divUserThemeIcon"},[i("i",{staticClass:"icon-checkmark"})]),e._v(" "),i("div",{staticClass:"divUserThemeBoard"}),e._v(" "),i("img",{attrs:{src:"static/images/theme2.jpg"}})])])]),e._v(" "),i("el-drawer",{attrs:{title:"用户调试",visible:e.drawerTest,direction:"rtl","append-to-body":!0,"custom-class":"drawerTest",size:e.widthDrawerTest+"px"},on:{"update:visible":function(t){e.drawerTest=t}}},[i("el-tabs",{staticClass:"divTabs",attrs:{type:"card"},model:{value:e.tabsTest,callback:function(t){e.tabsTest=t},expression:"tabsTest"}},[i("el-tab-pane",{attrs:{label:"参数设置",name:"tab1"}},[i("el-form",{ref:"form",staticClass:"formTest",attrs:{model:e.formTest,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"服 务 器"}},[i("el-input",{model:{value:e.formTest.server,callback:function(t){e.$set(e.formTest,"server",t)},expression:"formTest.server"}})],1),e._v(" "),i("el-form-item",[i("el-button",{on:{click:e.submitTest}},[e._v("绑定")])],1)],1)],1),e._v(" "),i("el-tab-pane",{attrs:{label:"调试日志",name:"tab2"}},[i("el-button",{on:{click:e.clearLog}},[e._v("清空")]),e._v(" "),i("div",{staticClass:"divSendMessage",style:"height:"+e.heightSendMessage+"px;overflow-y:auto"},[i("ul",{staticClass:"ulLog"},e._l(e.logs,function(t){return i("li",{key:t},[e._v(e._s(t))])}),0)])],1)],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"divUserTop"},[t("div",{staticClass:"divUserFace"},[t("img",{attrs:{src:"static/images/face_man.jpg"}})]),this._v(" "),t("div",{staticClass:"divUserInfo"},[t("span",{staticClass:"spanUserInfo1"},[this._v("LinkScene")]),this._v(" "),t("span",{staticClass:"spanUserInfo2"},[this._v("用户")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"divIcon"},[t("i",{staticClass:"icon-arrow1_right"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"divIcon"},[t("i",{staticClass:"icon-arrow1_right"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"divIcon"},[t("i",{staticClass:"icon-arrow1_right"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"divIcon"},[t("i",{staticClass:"icon-arrow1_right"})])}]},K=i("VU/8")(X,q,!1,null,null,null).exports,Z={data:function(){return{heightMessage:window.innerHeight-102}},props:["golbal"],methods:{},mounted:function(){this.golbal.showButtonFloor=!1}},ee={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main"},[i("div",{staticClass:"divMessage",style:"height:"+e.heightMessage+"px"},e._l(e.golbal.messages,function(t){return i("div",{key:t.id,staticClass:"divMessageItem"},[i("div",{staticClass:"divTitle"},[i("i",{staticClass:"icon-mail1"}),i("span",[e._v(e._s(t.title))])]),e._v(" "),i("div",{staticClass:"divDate"},[e._v(e._s(t.date))]),e._v(" "),i("div",{staticClass:"divContent"},[e._v(e._s(t.content))])])}),0),e._v(" "),i("el-backtop",{staticStyle:{bottom:"80px",right:"10px"},attrs:{target:".divMessage"}})],1)},staticRenderFns:[]},te=i("VU/8")(Z,ee,!1,null,null,null).exports;o.default.use(k.a);var ie=new k.a({routes:[{path:"/",name:"favorite",component:Y},{path:"/favorite",name:"favorite",component:Y},{path:"/room",name:"room",component:$},{path:"/user",name:"user",component:K},{path:"/message",name:"message",component:te}]}),oe={createSocket:function(e,t,i){v.a.log("create socket address:"+e+",port:"+t),v.a.log(chrome),null!=chrome&&(v.a.log(chrome.sockets),null!=chrome.sockets&&(v.a.log(chrome.sockets.udp),null!=chrome.sockets.udp&&chrome.sockets.udp.create(function(o){chrome.sockets.udp.bind(o.socketId,e,t,function(){i(o,chrome.sockets.udp)})})))},Buffer:{fromString:function(e){for(var t=new ArrayBuffer(2*e.length),i=new Uint16Array(t),o=0,s=e.length;o<s;o++)i[o]=e.charCodeAt(o);return t},fromHexString:function(e){for(var t=v.a.hexStringToBytes(e),i=new ArrayBuffer(t.length),o=new Uint8Array(i),s=0;s<t.length;s++)o[s]=t[s];return i},fromBytes:function(e){for(var t=new ArrayBuffer(e.length),i=new Uint8Array(t),o=0;o<e.length;o++)i[o]=e[o];return t},stringify:function(e){var t=new Uint16Array(e);return String.fromCharCode.apply(null,t)}}};window.UDP=oe;var se=function(e,t){this.address=e,this.port=t||0,this.udp=null,this.socket=null;var i=this;UDP.createSocket(this.address,0,function(e,t){i.udp=t,i.socket=e,v.a.log("connected"),v.a.log(i.udp),v.a.log(i.socket)})};se.prototype.send=function(e,t){var i=UDP.Buffer.fromBytes(e);console.log("buffer"),console.log(i),v.a.log("udp:"+this.udp),v.a.log("socket:"+this.socket),null!=this.udp&&null!=this.socket&&this.udp.send(this.socket.socketId,i,this.address,this.port,function(e){t(e)}),v.a.log("client ready to send")},window.UDP.Client=se,o.default.use(a.a),o.default.config.productionTip=!1,new o.default({el:"#app",router:ie,components:{App:_},template:"<App/>"})},NVJ6:function(e,t,i){"use strict";t.a={HEAD:[170,170],FUNCTION_CODE:{READ:0,WRITE:64,FEEDBACK:128,STATUS_BACK:192,QUERY_STATUS:1,CONTROL:2},DEVICE_TYPE_ENUM:{DEVICE_TYPE_MAIN_ALL:0,DEVICE_TYPE_MAIN:257,DEVICE_TYPE_GATEWAY:258,DEVICE_TYPE_BUS_SCREEN:259,DEVICE_TYPE_LOGIC:260,DEVICE_TYPE_AI_GENIC:261,DEVICE_TYPE_INFRARED:513,DEVICE_TYPE_LIGHT:769,DEVICE_TYPE_DIMMER:770,DEVICE_TYPE_CURTAIN:771,DEVICE_TYPE_SCENE:772,DEVICE_TYPE_LIGHT_SCENE:773,DEVICE_TYPE_AC:1025}}},XF4N:function(e,t,i){"use strict";t.a=c,t.b=function(e,t){null==t&&s.a.log("socket is null");null!==t&&3===t.readyState?(t.close(),t=c(o.a.receiveData,t.url)):1===t.readyState?t.send(e):0===t.readyState&&setTimeout(function(){t.send(e)},3e3)};var o=i("uxah"),s=i("gQoh"),a="ws://192.168.0.119:8001",l=null,n=[],r=0;function c(e,t){if(s.a.log("尝试连接："+t),n.length>0)for(var i=0;i<n.length;i++)if(n[i].url==t||n[i].url==t+"/"){if(3===n[i].readyState){n.splice(i,1);break}return s.a.log("已有websocket连接"),n[i]}var o=new WebSocket(null==t?a:t);return o.onopen=v,o.onmessage=d,o.onerror=u,o.onclose=C,n.push(o),window.addEventListener("onmessageWS",function(t){var i=t.detail.data.data,o=new FileReader;o.onload=function(){var t=new Uint8Array(this.result);null!=e&&e(t)},o.readAsArrayBuffer(i)},!1),o}function v(e){r=0,s.a.log(e);for(var t=0;t<n.length;t++)h(n[t])}function u(e){if(clearInterval(l),n.indexOf(e.target)>=0&&n.splice(n.indexOf(e.target),1),(r+=1)>=10)s.a.log("重连超出10次，重连结束");else{var t=e.target.url;c(o.a.receiveData,t)}}function d(e){window.dispatchEvent(new CustomEvent("onmessageWS",{detail:{data:e}}))}function C(e){clearInterval(l),s.a.log("websocket已断开")}function h(e){e.send("pc_client"),l=setInterval(function(){e.send("pc_client")},5e3)}},gQoh:function(e,t,i){"use strict";(function(e){var o,s=i("bOdI"),a=i.n(s);t.a=(o={devicesAll:null,MyProject:null,golbal:null,logList:[],root:null,bytes2hex:function(t){for(var i="",o=0;o<t.length;o++)i=i+e.from([t[o]]).toString("hex")+" ";return i},getVORoomByDeviceId:function(e){var t=this.MyProject;if(null==t)return console.log("project is null"),null;for(var i=0;i<t.blocks.length;i++)for(var o=t.blocks[i],s=0;s<o.floors.length;s++)for(var a=o.floors[s],l=0;l<a.rooms.length;l++)for(var n=a.rooms[l],r=0;r<n.devices.length;r++){if(n.devices[r].id==e)return n}},getVOBus:function(e){var t=this.MyProject;if(null==t)return console.log("project is null"),null;var i=this.getVORoomByDeviceId(e);if(null==i)return null;for(var o=null,s=0;s<t.buses.length;s++)if((o=t.buses[s]).id==i.busId)return o;return null},getTypeStatus:function(){this.golbal.type[1].isOn=!1,this.golbal.type[2].isOn=!1,this.golbal.type[3].isOn=!1,this.golbal.type[4].isOn=!1;for(var e=0;e<this.golbal.roomCur.devices.length;e++){var t=this.golbal.roomCur.devices[e];switch(t.type){case"light":t.isOn&&(this.golbal.type[1].isOn=!0);break;case"dimmer":t.value>0&&(this.golbal.type[1].isOn=!0);break;case"curtain":100==t.value&&(this.golbal.type[2].isOn=!0);break;case"ac":t.isOn&&(this.golbal.type[3].isOn=!0);break;case"scene":t.isOn&&(this.golbal.type[4].isOn=!0)}}},log:function(e){console.log(e);var t=new Date;this.logList.push(t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+" "+e),null!=this.root&&(this.root.$data.logList=this.logList)}},a()(o,"bytes2hex",function(t){for(var i="",o=0;o<t.length;o++)i=i+e.from([t[o]]).toString("hex")+" ";return i}),a()(o,"bytes2hexNoSpace",function(t){for(var i="",o=0;o<t.length;o++)i=i+e.from([t[o]]).toString("hex")+"";return i}),a()(o,"hexStringToBytes",function(t){if(null==t||0==t.length)return null;var i=[];if((t=t.toUpperCase()).indexOf(" ")>=0)i=t.trim().split(" ");else{for(var o=t.length/2,s=0;s<o;s++)i.push(0);for(s=0;s<i.length;s++)i[s]=t.substring(2*s,2*s+2)}var a=i.length,l=[];for(s=0;s<a;s++)l.push(parseInt(i[s],16));return e.from(l)}),o)}).call(t,i("EuP9").Buffer)},uxah:function(e,t,i){"use strict";var o=i("NVJ6"),s=i("gQoh");t.a={receiveData:function(e){if(console.log("<== "+s.a.bytes2hex(e)),e.length==e[2])for(var t=0;t<s.a.devicesAll.length;t++){var i=s.a.devicesAll[t].device;if(e[3]==i.areacode&&e[4]==i.addr)if("light"==i.type&&(e[5]<<8)+e[6]==o.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_LIGHT){var a=(e[11]<<8)+e[10];i.isOn=(a&Math.pow(2,i.channel-1))>0}else if("dimmer"==i.type&&(e[5]<<8)+e[6]==o.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_DIMMER)1==i.channel?i.value=e[10]:i.value=e[11];else if("curtain"==i.type&&(e[5]<<8)+e[6]==o.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_CURTAIN)1==i.channel?i.value=e[10]:i.value=e[11];else if("ac"==i.type&&(e[5]<<8)+e[6]==o.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_AC){i.value=e[9];a=e[8];switch(i.isOn=a>>7==1,i.lock=a>>5&3,i.fan=a>>3&3,3&a){case 1:i.mode="制冷";break;case 2:i.mode="制热";break;case 3:i.mode="送风";break;default:i.mode="恒温"}}else if("scene"==i.type&&(e[5]<<8)+e[6]==o.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_SCENE){a=(e[11]<<8)+e[10];i.isOn=(a&Math.pow(2,i.channel-1))>0}}}}}},["NHnr"]);
//# sourceMappingURL=app.88b02e67ac9710ecc016.js.map