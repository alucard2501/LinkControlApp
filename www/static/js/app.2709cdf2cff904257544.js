webpackJsonp([1],{"22e4":function(e,t,i){"use strict";(function(e){var s=i("NVJ6"),a=i("gQoh"),o=i("uxah"),l=i("XF4N");t.a={udp_client:null,ip:"",port:0,resetNetworkInfo:function(e,t){this.ip=e,this.port=t,console.log("切换到"+e+":"+t),this.udp_client=new UDP.Client(e,t)},buildCommand:function(e,t,i,a,o){var l=9;null!=e&&(l+=e.length);var n=[];if(n.push(s.a.HEAD[0]),n.push(s.a.HEAD[1]),n.push(l),n.push(t),n.push(i),n.push(a>>8),n.push(255&a),n.push(o),null!=e)for(var c=0;c<e.length;c++)n.push(e[c]);var r=0;for(c=0;c<n.length;c++)r+=n[c];return n.push(255&r),n},sendAction:function(t){var i=a.a.getVOBus(t.id);if(null!=i){var n=s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_MAIN_ALL,c=[];switch(t.type){case"light":n=s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_LIGHT;var r=0;t.isOn&&(r=100),c.push(t.channel),c.push(r);break;case"dimmer":n=s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_DIMMER,c.push(t.channel),c.push(t.value);break;case"curtain":n=s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_CURTAIN,c.push(t.channel),c.push(t.value);break;case"ac":n=s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_AC;var v=0;t.isOn&&(v+=128),v+=t.lock<<5,v+=t.fan<<3,"制冷"==t.mode?v+=1:"制冷"==t.mode?v+=2:"送风"==t.mode&&(v+=3),c.push(v),c.push(t.value),c.push(128),c.push(28),c.push(128),c.push(25),c.push(0);break;case"scene":n=s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_SCENE;r=0;t.isOn&&(r=100),c.push(t.channel),c.push(r)}var u=this.buildCommand(c,t.areacode,t.addr,n,s.a.FUNCTION_CODE.WRITE+s.a.FUNCTION_CODE.CONTROL);console.log("==> "+a.a.bytes2hex(u));var d=Object(l.a)(o.a.receiveData,i.ws_url);Object(l.b)(e.from(u),d)}else console.log("bus is null")}}}).call(t,i("EuP9").Buffer)},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("7+uW"),a=i("zL8q"),o=i.n(a),l=i("Xxa5"),n=i.n(l),c=i("exGp"),r=i.n(c),v=i("gQoh"),u={data:function(){return{visibleFloor:!1}},props:["golbal"],methods:{floorClick:function(e){for(var t=0;t<this.golbal.blockCur.floors.length;t++){(i=this.golbal.blockCur.floors[t]).active=!1}e.active=!0,this.golbal.floorCur=e,this.visibleFloor=!1,this.golbal.roomCur=this.golbal.floorCur.rooms[0];for(t=0;t<this.golbal.floorCur.rooms.length;t++){var i;(i=this.golbal.floorCur.rooms[t]).active&&(this.golbal.roomCur=i,v.a.getTypeStatus())}},messageClick:function(){"/message"!=this.$route.path&&this.$router.push({path:"/message"})}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header"},[i("div",{staticClass:"divHeaderLeft"},[i("div",{staticClass:"btnHeader",on:{click:function(t){return e.messageClick()}}},[i("i",{staticClass:"icon-mail1"})])]),e._v(" "),e._m(0),e._v(" "),i("div",{staticClass:"divHeaderRight"},[e.golbal.showButtonFloor?i("el-popover",{attrs:{placement:"bottom",width:"100",trigger:"click","popper-class":"popoverFloor"},model:{value:e.visibleFloor,callback:function(t){e.visibleFloor=t},expression:"visibleFloor"}},[i("div",[i("span",{staticClass:"spanTitle"},[e._v("请选择楼层")]),e._v(" "),i("ul",e._l(e.golbal.blockCur.floors,function(t){return i("li",{key:t.id,on:{click:function(i){return e.floorClick(t)}}},[i("i",{staticClass:"icon-office"}),i("span",[e._v(e._s(t.name))]),e._v(" "),t.active?i("div",{staticClass:"checked"},[i("i",{staticClass:"icon-yuanxingxuanzhongfill"})]):e._e()])}),0)]),e._v(" "),i("el-button",{staticClass:"btnHeaderFloor",attrs:{slot:"reference"},slot:"reference"},[i("span",[e._v(e._s(e.golbal.floorCur.name))]),e._v(" "),i("i",{staticClass:"icon-caret-down"})])],1):e._e()],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"divHeaderMain"},[t("img",{staticClass:"imgHeaderLogo",attrs:{src:"static/images/logo.png"}})])}]},C=i("VU/8")(u,d,!1,null,null,null).exports,p={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"footer"},[i("ul",[i("li",[i("router-link",{class:{routerC:"favorite"==e.golbal.menuCur},attrs:{to:"/favorite","active-class":"routerC",tag:"div"}},[i("i",{staticClass:"icon-favoritesfilling"}),e._v(" "),i("span",[e._v("习惯")])])],1),e._v(" "),i("li",[i("router-link",{attrs:{to:"/room","active-class":"routerC",tag:"div"}},[i("i",{staticClass:"icon-home3"}),e._v(" "),i("span",[e._v("区域")])])],1),e._v(" "),i("li",[i("router-link",{attrs:{to:"/user","active-class":"routerC",tag:"div"}},[i("i",{staticClass:"icon-accountfilling"}),e._v(" "),i("span",[e._v("我的")])])],1)])])},staticRenderFns:[]},h=i("VU/8")({props:["golbal"]},p,!1,null,null,null).exports,f=(i("XF4N"),i("uxah"),{name:"App",components:{FrameHeader:C,FrameFooter:h},data:function(){return{golbal:{menuCur:"",type:[{id:1,name:"all",icon:"icon-all",isOn:!1},{id:2,name:"light",icon:"icon-ls_1_light",isOn:!1},{id:3,name:"curtain",icon:"icon-ls_23_curtain",isOn:!1},{id:4,name:"ac",icon:"icon-ls_7_ac",isOn:!1},{id:5,name:"scene",icon:"icon-ls_26_go_off_work",isOn:!1}],typeCur:"all",showButtonFloor:!1,blockCur:{},floorCur:{},roomCur:{},myProject:{id:"b0b502b7-c000-4000-a000-0547116af000",name:"万科水晶城",active:!0,blocks:[{id:"b0b502b7-c001-4000-a000-0547116af000",name:"1座",floors:[{id:"b0b502b7-c001-4001-a000-0547116af000",name:"楼层一",active:!0,rooms:[{id:"b0b502b7-c001-4001-a001-0547116af000",name:"主卧",busId:"7e0378ca-c813-4056-a001-485e2970c001",active:!0,devices:[{id:"b0b502b7-c001-4001-a001-0547116af001",type:"light",areacode:1,addr:1,channel:1,name:"吊灯",summary:"关闭",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af002",type:"light",areacode:1,addr:1,channel:2,name:"壁灯",summary:"开启",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!0},{id:"b0b502b7-c001-4001-a001-0547116af003",type:"curtain",areacode:1,addr:1,channel:3,name:"窗帘",summary:"50%",icon:"icon-ls_23_curtain",isFavorite:!1,hits:0,value:10},{id:"b0b502b7-c001-4001-a001-0547116af004",type:"dimmer",areacode:1,addr:1,channel:2,name:"床头灯",summary:"40%",icon:"icon-ls_4_dimmer",isFavorite:!1,hits:0,value:40},{id:"b0b502b7-c001-4001-a001-0547116af005",type:"ac",name:"空调",summary:"制冷 26℃",icon:"icon-ls_7_ac",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"制冷",fan:3,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af006",type:"scene",areacode:1,addr:1,channel:1,name:"场景",summary:"关闭",icon:"icon-ls_26_go_off_work",isFavorite:!1,hits:0,isOn:!1}]}]}]}]},testServer:"ws://192.168.0.119:8001",messages:[{id:1,title:"系统通知",date:"2020-07-01 07:22:14",content:"停服维护已经结束，停服期间给您带来的不便，我们深表歉意。"},{id:2,title:"版本更新公告",date:"2020-06-25 17:43:53",content:"我们预计于北京时间：2020-06-26 02:00 - 04:00进行为期两个小时的停服更新维护。"},{id:3,title:"升级提醒",date:"2020-06-01 15:14:32",content:"为了使用户获得更好的体验，我们刚刚完成了一次热更，请重新启动程序以使更新生效。"},{id:4,title:"系统通知",date:"2020-05-28 12:53:43",content:"停服维护已经结束，停服期间给您带来的不便，我们深表歉意。"}],themeCur:1}}},methods:{getData:function(){var e=this;return r()(n.a.mark(function t(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t,e)}))()}},beforeMount:function(){var e=window.localStorage;null!=e.getItem("myProject")&&(this.golbal.myProject=JSON.parse(e.getItem("myProject"))),console.log(this.golbal.myProject),this.golbal.blockCur=this.golbal.myProject.blocks[0];for(var t=0;t<this.golbal.myProject.blocks.length;t++){(i=this.golbal.myProject.blocks[t]).active&&(this.golbal.blockCur=i)}this.golbal.floorCur=this.golbal.blockCur.floors[0];for(t=0;t<this.golbal.blockCur.floors.length;t++){(i=this.golbal.blockCur.floors[t]).active&&(this.golbal.floorCur=i)}this.golbal.roomCur=this.golbal.floorCur.rooms[0];for(t=0;t<this.golbal.floorCur.rooms.length;t++){var i;(i=this.golbal.floorCur.rooms[t]).active&&(this.golbal.roomCur=i)}var s=[];for(t=0;t<this.golbal.myProject.blocks.length;t++)for(var a=0;a<this.golbal.myProject.blocks[t].floors.length;a++)for(var o=0;o<this.golbal.myProject.blocks[t].floors[a].rooms.length;o++)for(var l=0;l<this.golbal.myProject.blocks[t].floors[a].rooms[o].devices.length;l++)s.push({device:this.golbal.myProject.blocks[t].floors[a].rooms[o].devices[l],busId:this.golbal.myProject.blocks[t].floors[a].rooms[o].busId});v.a.devicesAll=s,v.a.MyProject=this.golbal.myProject,v.a.golbal=this.golbal,v.a.getTypeStatus()}}),m={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"page"}},[t("FrameHeader",{attrs:{golbal:this.golbal}}),this._v(" "),t("router-view",{attrs:{golbal:this.golbal}}),this._v(" "),t("FrameFooter",{attrs:{golbal:this.golbal}})],1)},staticRenderFns:[]},g=i("VU/8")(f,m,!1,null,null,null).exports,_=i("/ocq"),b=i("I0MY"),k=i.n(b),y=i("22e4"),w={data:function(){return{}},props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite},switchClick:function(e){e.isOn=!e.isOn,v.a.getTypeStatus(),y.a.sendAction(e)}}},E={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"divDevice",on:{click:function(t){return e.switchClick(e.device)}}},[i("div",{staticClass:"divFavorite",on:{click:function(t){return t.stopPropagation(),e.favoriteClick(e.device)}}},[i("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),i("div",{staticClass:"divIcon"},[i("i",{class:[e.device.icon,{iconC:e.device.isOn}]})]),e._v(" "),i("div",{staticClass:"divInfo"},[i("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),i("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(e.device.isOn?"开启":"关闭"))])]),e._v(" "),i("div",{staticClass:"divControl"},[i("div",{staticClass:"btnSwitch"},[i("i",{staticClass:"icon-ls_9_on",class:{iconC:e.device.isOn}})])])])},staticRenderFns:[]},T=i("VU/8")(w,E,!1,null,null,null).exports,D={data:function(){return{}},props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite},curtainClick:function(e,t){e.value=t,v.a.getTypeStatus(),y.a.sendAction(this.device)}}},I={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"divDevice"},[i("div",{staticClass:"divFavorite",on:{click:function(t){return e.favoriteClick(e.device)}}},[i("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),i("div",{staticClass:"divIcon"},[i("i",{class:[e.device.icon,{iconC:e.device.isOn}]})]),e._v(" "),i("div",{staticClass:"divInfo"},[i("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),i("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(0==e.device.value?"关闭":100==e.device.value?"开启":"停止"))])]),e._v(" "),i("div",{staticClass:"divControl"},[i("div",{class:"btnCurtain btnCurtain1"+(0==e.device.value?" iconC":""),on:{click:function(t){return e.curtainClick(e.device,0)}}},[i("i",{staticClass:"icon-arrow-right"}),i("i",{staticClass:"icon-arrow-left"})]),e._v(" "),i("div",{class:"btnCurtain btnCurtain2"+(101==e.device.value?" iconC":""),on:{click:function(t){return e.curtainClick(e.device,101)}}},[i("i",{staticClass:"icon-pause2"})]),e._v(" "),i("div",{class:"btnCurtain btnCurtain3"+(100==e.device.value?" iconC":""),on:{click:function(t){return e.curtainClick(e.device,100)}}},[i("i",{staticClass:"icon-arrow-left"}),i("i",{staticClass:"icon-arrow-right"})])])])},staticRenderFns:[]},P=i("VU/8")(D,I,!1,null,null,null).exports,F={props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite},dimmerChange:function(){v.a.getTypeStatus(),y.a.sendAction(this.device)}},mounted:function(){this.dimmerValue=this.device.value}},A={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"divDevice"},[i("div",{staticClass:"divFavorite",on:{click:function(t){return e.favoriteClick(e.device)}}},[i("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),i("div",{staticClass:"divIcon"},[i("i",{class:[e.device.icon,{iconC:e.device.value>0}]})]),e._v(" "),i("div",{staticClass:"divInfo"},[i("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),i("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(e.device.value)+"%")])]),e._v(" "),i("div",{staticClass:"divControl"},[i("div",{staticClass:"divDimmer1"},[i("el-slider",{attrs:{"show-tooltip":!1},on:{change:e.dimmerChange},model:{value:e.device.value,callback:function(t){e.$set(e.device,"value",t)},expression:"device.value"}})],1)])])},staticRenderFns:[]},O=i("VU/8")(F,A,!1,null,null,null).exports,R={data:function(){return{drawer:!1,direction:"btt",heightDrawer:window.innerHeight-95,visibleFan:!1,visibleLock:!1}},props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite},switchClick:function(e){e.isOn=!e.isOn,v.a.getTypeStatus(),y.a.sendAction(this.device)},addClick:function(e){e.value<36&&e.isOn&&(e.value=e.value+1,e.summary=e.mode+" "+e.value+"℃",y.a.sendAction(this.device))},minusClick:function(e){e.value>17&&e.isOn&&(e.value=e.value-1,e.summary=e.mode+" "+e.value+"℃",y.a.sendAction(this.device))},drawerClick:function(e){this.drawer=!0},modeClick:function(e,t){e.isOn&&(e.mode=t,e.summary=e.mode+" "+e.value+"℃",y.a.sendAction(this.device))},fanClick:function(e,t){e.fan=t,this.visibleFan=!1,y.a.sendAction(this.device)},lockClick:function(e,t){e.lock=t,this.visibleLock=!1,y.a.sendAction(this.device)}}},S={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"divDevice",on:{click:function(t){return e.drawerClick(e.device)}}},[i("div",{staticClass:"divFavorite",on:{click:function(t){return t.stopPropagation(),e.favoriteClick(e.device)}}},[i("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),i("div",{staticClass:"divIcon"},[i("i",{class:e.device.icon})]),e._v(" "),i("div",{staticClass:"divInfo"},[i("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),i("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(e.device.summary))])]),e._v(" "),i("div",{staticClass:"divControl"},[i("div",{staticClass:"btnAC btnAC1",on:{click:function(t){return t.stopPropagation(),e.minusClick(e.device)}}},[i("i",{staticClass:"icon-move1"})]),e._v(" "),i("div",{staticClass:"btnAC btnAC2",on:{click:function(t){return t.stopPropagation(),e.switchClick(e.device)}}},[i("i",{staticClass:"icon-ls_9_on",class:{iconC:e.device.isOn}})]),e._v(" "),i("div",{staticClass:"btnAC btnAC3",on:{click:function(t){return t.stopPropagation(),e.addClick(e.device)}}},[i("i",{staticClass:"icon-add1"})])]),e._v(" "),i("el-drawer",{attrs:{visible:e.drawer,direction:e.direction,"append-to-body":!0,"custom-class":"drawerAC",size:e.heightDrawer+"px"},on:{"update:visible":function(t){e.drawer=t}}},[i("div",{staticClass:"divDrawerACTitle"},[i("span",{staticClass:"spanDrawerAC1"},[e._v("温控器")]),e._v(" "),i("span",{staticClass:"spanDrawerAC2"},[e._v("当前温度"+e._s(e.device.value)+"℃")])]),e._v(" "),i("div",{staticClass:"divDrawerAC"},[i("div",{staticClass:"divDrawerACScreen"},[i("span",{staticClass:"spanDrawerAC3"},[e._v(e._s(e.device.mode))]),e._v(" "),i("div",{staticClass:"divDrawerACTemperature"},[i("div",{staticClass:"divDrawerACTemperature1",on:{click:function(t){return t.stopPropagation(),e.minusClick(e.device)}}},[i("i",{staticClass:"icon-move1"})]),e._v(" "),i("div",{staticClass:"divDrawerACTemperature2"},[e._v(e._s(e.device.value))]),e._v(" "),i("div",{staticClass:"divDrawerACTemperature3",on:{click:function(t){return t.stopPropagation(),e.addClick(e.device)}}},[i("i",{staticClass:"icon-add1"})])]),e._v(" "),i("span",{staticClass:"spanDrawerAC4"},[e._v("℃")])]),e._v(" "),i("div",{staticClass:"divDrawerACMode"},[i("div",{staticClass:"divDrawerACModeC"},[i("el-popover",{attrs:{placement:"top",width:"50",trigger:"click","popper-class":"popoverAC",disabled:!e.device.isOn},model:{value:e.visibleFan,callback:function(t){e.visibleFan=t},expression:"visibleFan"}},[i("div",[i("span",{staticClass:"spanTitle"},[e._v("请选择风速")]),e._v(" "),i("ul",[i("li",{on:{click:function(t){return t.stopPropagation(),e.fanClick(e.device,"0")}}},[i("i",{staticClass:"icon-abc"}),i("span",[e._v("自动")])]),e._v(" "),i("li",{on:{click:function(t){return t.stopPropagation(),e.fanClick(e.device,"1")}}},[i("i",{staticClass:"icon-propeller"}),i("span",[e._v("低速")])]),e._v(" "),i("li",{on:{click:function(t){return t.stopPropagation(),e.fanClick(e.device,"2")}}},[i("i",{staticClass:"icon-screw"}),i("span",[e._v("中速")])]),e._v(" "),i("li",{on:{click:function(t){return t.stopPropagation(),e.fanClick(e.device,"3")}}},[i("i",{staticClass:"icon-screw2"}),i("span",[e._v("高速")])])])]),e._v(" "),i("el-button",{staticClass:"btnDeviceAcFan",attrs:{slot:"reference"},slot:"reference"},[i("i",{class:0==e.device.fan?"icon-abc":1==e.device.fan?"icon-propeller":2==e.device.fan?"icon-screw":"icon-screw2"})])],1)],1),e._v(" "),i("div",{on:{click:function(t){return t.stopPropagation(),e.modeClick(e.device,"制热")}}},[i("i",{staticClass:"icon-sun",class:{iconC:"制热"==e.device.mode}})]),e._v(" "),i("div",{on:{click:function(t){return t.stopPropagation(),e.modeClick(e.device,"制冷")}}},[i("i",{staticClass:"icon-kongdiao",class:{iconC:"制冷"==e.device.mode}})]),e._v(" "),i("div",{on:{click:function(t){return t.stopPropagation(),e.modeClick(e.device,"送风")}}},[i("i",{staticClass:"icon-fan",class:{iconC:"送风"==e.device.mode}})]),e._v(" "),i("div",{staticClass:"divDrawerACModeC"},[i("el-popover",{attrs:{placement:"top",width:"50",trigger:"click","popper-class":"popoverAC",disabled:!e.device.isOn},model:{value:e.visibleLock,callback:function(t){e.visibleLock=t},expression:"visibleLock"}},[i("div",[i("span",{staticClass:"spanTitle"},[e._v("请选择")]),e._v(" "),i("ul",[i("li",{on:{click:function(t){return t.stopPropagation(),e.lockClick(e.device,"0")}}},[i("i",{staticClass:"icon-unlock"}),i("span",[e._v("解锁")])]),e._v(" "),i("li",{on:{click:function(t){return t.stopPropagation(),e.lockClick(e.device,"1")}}},[i("i",{staticClass:"icon-lock1"}),i("span",[e._v("锁定按键")])]),e._v(" "),i("li",{on:{click:function(t){return t.stopPropagation(),e.lockClick(e.device,"2")}}},[i("i",{staticClass:"icon-data"}),i("span",[e._v("锁定数据")])])])]),e._v(" "),i("el-button",{staticClass:"btnDeviceAcFan",attrs:{slot:"reference"},slot:"reference"},[i("i",{class:0==e.device.lock?"icon-unlock":1==e.device.lock?"icon-lock1":"icon-data"})])],1)],1)]),e._v(" "),i("div",{staticClass:"btnDrawerACSwitch",on:{click:function(t){return t.stopPropagation(),e.switchClick(e.device)}}},[i("i",{staticClass:"icon-ls_9_on",class:{iconC:e.device.isOn}})])])])],1)},staticRenderFns:[]},V=i("VU/8")(R,S,!1,null,null,null).exports,U={data:function(){return{}},props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite},switchClick:function(e){e.isOn=!e.isOn,v.a.getTypeStatus(),y.a.sendAction(e)}}},x={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"divDevice",on:{click:function(t){return e.switchClick(e.device)}}},[i("div",{staticClass:"divFavorite",on:{click:function(t){return t.stopPropagation(),e.favoriteClick(e.device)}}},[i("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),i("div",{staticClass:"divIcon"},[i("i",{class:[e.device.icon,{iconC:e.device.isOn}]})]),e._v(" "),i("div",{staticClass:"divInfo"},[i("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),i("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(e.device.isOn?"开启":"关闭"))])]),e._v(" "),i("div",{staticClass:"divControl"},[i("div",{staticClass:"btnSwitch"},[i("i",{staticClass:"icon-ls_9_on",class:{iconC:e.device.isOn}})])])])},staticRenderFns:[]},N=i("VU/8")(U,x,!1,null,null,null).exports;s.default.use(k.a,{name:"v-touch"});var j={components:{DeviceLight:T,DeviceCurtain:P,DeviceDimmer:O,DeviceAC:V,DeviceScene:N},data:function(){return{heightRoom:window.innerHeight-195,isGallery:!0}},props:["golbal"],methods:{roomClick:function(e){for(var t=0;t<this.golbal.floorCur.rooms.length;t++){this.golbal.floorCur.rooms[t].active=!1}e.active=!0,this.golbal.roomCur=e},typeClick:function(e){this.golbal.typeCur=e},onSwipeLeft:function(){for(var e=0,t=0;t<this.golbal.floorCur.rooms.length;t++){if(this.golbal.floorCur.rooms[t]==this.golbal.roomCur){e=t;break}}e<this.golbal.floorCur.rooms.length-1&&(e+=1),this.roomClick(this.golbal.floorCur.rooms[e])},onSwipeRight:function(){for(var e=0,t=0;t<this.golbal.floorCur.rooms.length;t++){if(this.golbal.floorCur.rooms[t]==this.golbal.roomCur){e=t;break}}e>0&&(e-=1),this.roomClick(this.golbal.floorCur.rooms[e])}},mounted:function(){this.golbal.showButtonFloor=!0,this.golbal.menuCur="favorite"}},M={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main"},[i("v-touch",{staticStyle:{"touch-action":"pan-y!important"},attrs:{tag:"div"},on:{swipeleft:e.onSwipeLeft,swiperight:e.onSwipeRight}},[i("div",{staticClass:"divRoomTop"},[i("ul",e._l(e.golbal.floorCur.rooms,function(t){return i("li",{key:t.id,class:{liRoomTopC:t.active},on:{click:function(i){return e.roomClick(t)}}},[e._v(e._s(t.name))])}),0)]),e._v(" "),i("div",{staticClass:"divRoomTop2"},[i("ul",[i("li",{class:{liRoomTopC:"all"==e.golbal.typeCur},on:{click:function(t){return e.typeClick("all")}}},[i("i",{staticClass:"icon-all"})]),e._v(" "),i("li",{class:{liRoomTopC:"light"==e.golbal.typeCur},on:{click:function(t){return e.typeClick("light")}}},[i("i",{staticClass:"icon-ls_1_light"})]),e._v(" "),i("li",{class:{liRoomTopC:"curtain"==e.golbal.typeCur},on:{click:function(t){return e.typeClick("curtain")}}},[i("i",{staticClass:"icon-ls_23_curtain"})]),e._v(" "),i("li",{class:{liRoomTopC:"ac"==e.golbal.typeCur},on:{click:function(t){return e.typeClick("ac")}}},[i("i",{staticClass:"icon-ls_7_ac"})]),e._v(" "),i("li",{class:{liRoomTopC:"scene"==e.golbal.typeCur},on:{click:function(t){return e.typeClick("scene")}}},[i("i",{staticClass:"icon-ls_26_go_off_work"})])])]),e._v(" "),i("div",{staticClass:"divRoom",style:"height:"+e.heightRoom+"px"},[i("div",{staticClass:"divView"},[i("div",{class:"btnList"+(e.isGallery?"":" btnViewC"),on:{click:function(t){e.isGallery=!1}}},[i("i",{staticClass:"icon-viewlist"})]),e._v(" "),i("div",{class:"btnGallery"+(e.isGallery?" btnViewC":""),on:{click:function(t){e.isGallery=!0}}},[i("i",{staticClass:"icon-viewgallery"})])]),e._v(" "),i("div",{class:"divRoomContent"+(e.isGallery?" divRoomGallery":" divRoomList")},[e._l(e.golbal.roomCur.devices,function(t){return["light"!=t.type||t.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur||!t.isFavorite?e._e():i("DeviceLight",{key:t.id,attrs:{device:t}}),e._v(" "),"curtain"!=t.type||t.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur||!t.isFavorite?e._e():i("DeviceCurtain",{key:t.id,attrs:{device:t}}),e._v(" "),"dimmer"!=t.type||t.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur&&"light"!=e.golbal.typeCur||!t.isFavorite?e._e():i("DeviceDimmer",{key:t.id,attrs:{device:t}}),e._v(" "),"ac"!=t.type||t.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur||!t.isFavorite?e._e():i("DeviceAC",{key:t.id,attrs:{device:t}}),e._v(" "),"scene"!=t.type||t.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur||!t.isFavorite?e._e():i("DeviceScene",{key:t.id,attrs:{device:t}})]})],2)])])],1)},staticRenderFns:[]},L=i("VU/8")(j,M,!1,null,null,null).exports;s.default.use(k.a,{name:"v-touch"});var Y={components:{DeviceLight:T,DeviceCurtain:P,DeviceDimmer:O,DeviceAC:V,DeviceScene:N},data:function(){return{heightRoom:window.innerHeight-195,isGallery:!0}},props:["golbal"],methods:{roomClick:function(e){for(var t=0;t<this.golbal.floorCur.rooms.length;t++){this.golbal.floorCur.rooms[t].active=!1}e.active=!0,this.golbal.roomCur=e,v.a.getTypeStatus()},typeClick:function(e){this.golbal.typeCur=e},onSwipeLeft:function(){for(var e=0,t=0;t<this.golbal.floorCur.rooms.length;t++){if(this.golbal.floorCur.rooms[t]==this.golbal.roomCur){e=t;break}}e<this.golbal.floorCur.rooms.length-1&&(e+=1),this.roomClick(this.golbal.floorCur.rooms[e])},onSwipeRight:function(){for(var e=0,t=0;t<this.golbal.floorCur.rooms.length;t++){if(this.golbal.floorCur.rooms[t]==this.golbal.roomCur){e=t;break}}e>0&&(e-=1),this.roomClick(this.golbal.floorCur.rooms[e])}},mounted:function(){this.golbal.showButtonFloor=!0,this.golbal.menuCur="room"}},B={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main"},[i("v-touch",{staticStyle:{"touch-action":"pan-y!important"},attrs:{tag:"div"},on:{swipeleft:e.onSwipeLeft,swiperight:e.onSwipeRight}},[i("div",{staticClass:"divRoomTop"},[i("ul",e._l(e.golbal.floorCur.rooms,function(t){return i("li",{key:t.id,class:{liRoomTopC:t.active},on:{click:function(i){return e.roomClick(t)}}},[e._v(e._s(t.name))])}),0)]),e._v(" "),i("div",{staticClass:"divRoomTop2"},[i("ul",[i("li",{class:{liRoomTopC:"all"==e.golbal.typeCur},on:{click:function(t){return e.typeClick("all")}}},[i("i",{staticClass:"icon-all"})]),e._v(" "),i("li",{class:"light"==e.golbal.typeCur?"liRoomTopC":e.golbal.type[1].isOn?"liRoomTopBlue":"",on:{click:function(t){return e.typeClick("light")}}},[i("i",{staticClass:"icon-ls_1_light"})]),e._v(" "),i("li",{class:"curtain"==e.golbal.typeCur?"liRoomTopC":e.golbal.type[2].isOn?"liRoomTopBlue":"",on:{click:function(t){return e.typeClick("curtain")}}},[i("i",{staticClass:"icon-ls_23_curtain"})]),e._v(" "),i("li",{class:"ac"==e.golbal.typeCur?"liRoomTopC":e.golbal.type[3].isOn?"liRoomTopBlue":"",on:{click:function(t){return e.typeClick("ac")}}},[i("i",{staticClass:"icon-ls_7_ac"})]),e._v(" "),i("li",{class:"scene"==e.golbal.typeCur?"liRoomTopC":e.golbal.type[4].isOn?"liRoomTopBlue":"",on:{click:function(t){return e.typeClick("scene")}}},[i("i",{staticClass:"icon-ls_26_go_off_work"})])])]),e._v(" "),i("div",{staticClass:"divRoom",style:"height:"+e.heightRoom+"px"},[i("div",{staticClass:"divView"},[i("div",{class:"btnList"+(e.isGallery?"":" btnViewC"),on:{click:function(t){e.isGallery=!1}}},[i("i",{staticClass:"icon-viewlist"})]),e._v(" "),i("div",{class:"btnGallery"+(e.isGallery?" btnViewC":""),on:{click:function(t){e.isGallery=!0}}},[i("i",{staticClass:"icon-viewgallery"})])]),e._v(" "),i("div",{class:"divRoomContent"+(e.isGallery?" divRoomGallery":" divRoomList")},[e._l(e.golbal.roomCur.devices,function(t){return["light"!=t.type||t.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur?e._e():i("DeviceLight",{key:t.id,attrs:{device:t}}),e._v(" "),"curtain"!=t.type||t.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur?e._e():i("DeviceCurtain",{key:t.id,attrs:{device:t}}),e._v(" "),"dimmer"!=t.type||t.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur&&"light"!=e.golbal.typeCur?e._e():i("DeviceDimmer",{key:t.id,attrs:{device:t}}),e._v(" "),"ac"!=t.type||t.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur?e._e():i("DeviceAC",{key:t.id,attrs:{device:t}}),e._v(" "),"scene"!=t.type||t.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur?e._e():i("DeviceScene",{key:t.id,attrs:{device:t}})]})],2)])])],1)},staticRenderFns:[]},G=i("VU/8")(Y,B,!1,null,null,null).exports,H=i("mvHQ"),$=i.n(H),W=i("mtWM"),Q=i.n(W),z={data:function(){return{drawerBlock:!1,heightDrawerBlock:window.innerHeight-159,drawerTheme:!1,drawerTest:!1,widthDrawerTest:window.innerWidth,widthDrawerTheme:window.innerWidth,tabsTest:"tab1",formTest:{server:""},heightSendMessage:window.innerHeight-180,log:""}},props:["golbal"],methods:{drawerBlockClick:function(){this.drawerBlock=!0},drawerThemeClick:function(){this.drawerTheme=!0},themeClick:function(e){this.golbal.themeCur!=e&&(document.getElementById("style").attributes[2].value="static/css/style"+e+".css"),this.golbal.themeCur=e},drawerTestClick:function(){this.drawerTest=!0},blockClick:function(e){for(var t=0;t<this.golbal.myProject.blocks.length;t++){(i=this.golbal.myProject.blocks[t]).active=!1}e.active=!0,this.golbal.blockCur=e,this.golbal.floorCur=this.golbal.blockCur.floors[0];for(t=0;t<this.golbal.blockCur.floors.length;t++){(i=this.golbal.blockCur.floors[t]).active&&(this.golbal.floorCur=i)}this.golbal.roomCur=this.golbal.floorCur.rooms[0];for(t=0;t<this.golbal.floorCur.rooms.length;t++){var i;(i=this.golbal.floorCur.rooms[t]).active&&(this.golbal.roomCur=i,v.a.getTypeStatus())}this.drawerBlock=!1},getData:function(){var e=this;return r()(n.a.mark(function t(){var i,s,a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q.a.post("http://home.ivor-electric.com:3002/api?action=GET_PROJECT_DATA&project_id=3929486");case 2:for(i=t.sent,window.localStorage.setItem("myProject",$()(i.data.project)),e.golbal.myProject=i.data.project,e.golbal.blockCur=e.golbal.myProject.blocks[0],e.golbal.floorCur=e.golbal.blockCur[0],s=0;s<e.golbal.blockCur.floors.length;s++)(a=e.golbal.blockCur.floors[s]).active&&(e.golbal.floorCur=a);e.onLog($()(i.data.project)),alert("获取成功");case 11:case"end":return t.stop()}},t,e)}))()},scanQRCode:function(){var e=this;return r()(n.a.mark(function t(){var i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=e,cordova.plugins.barcodeScanner.scan(function(e){var t=e.text.replace("linkcontrol","http");console.log(t),Q.a.post(t).then(function(e){try{console.log(e.data.project),window.localStorage.setItem("myProject",$()(e.data.project)),i.golbal.myProject=e.data.project,i.golbal.blockCur=i.golbal.myProject.blocks[0],i.golbal.floorCur=i.golbal.blockCur[0];for(var t=0;t<i.golbal.blockCur.floors.length;t++){var s=i.golbal.blockCur.floors[t];s.active&&(i.golbal.floorCur=s)}i.onLog($()(e.data.project)),alert("获取成功")}catch(e){i.onLog(e),alert("获取失败")}}).catch(function(e){console.log(e),i.onLog(e),alert("获取失败")})},function(e){alert(e)});case 2:case"end":return t.stop()}},t,e)}))()},submitTest:function(){this.golbal.testServer=this.formTest.server},clearLog:function(){this.log=""},onLog:function(e){this.log=e+"\n"+this.log}},mounted:function(){this.golbal.showButtonFloor=!1,this.golbal.menuCur="user",this.formTest.server=this.golbal.testServer}},J={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main"},[e._m(0),e._v(" "),i("div",{staticClass:"divUserContent"},[i("span",{staticClass:"title"},[e._v("管理设置")]),e._v(" "),i("div",{staticClass:"content"},[i("ul",[i("li",{on:{click:function(t){return e.scanQRCode()}}},[i("i",{staticClass:"icon-scanning"}),i("span",[e._v("扫一扫获取配置")]),e._m(1)]),e._v(" "),i("li",{on:{click:function(t){return e.drawerBlockClick()}}},[i("i",{staticClass:"icon-office"}),i("span",[e._v("楼栋管理")]),e._m(2)]),e._v(" "),i("li",{on:{click:function(t){return e.drawerThemeClick()}}},[i("i",{staticClass:"icon-pic"}),i("span",[e._v("主题样式")]),e._m(3)]),e._v(" "),i("li",{on:{click:function(t){return e.drawerTestClick()}}},[i("i",{staticClass:"icon-wrench"}),i("span",[e._v("调试")]),e._m(4)])])])]),e._v(" "),i("el-drawer",{attrs:{title:"请选择楼栋",visible:e.drawerBlock,direction:"btt","append-to-body":!0,"custom-class":"drawerBlock",size:e.heightDrawerBlock+"px"},on:{"update:visible":function(t){e.drawerBlock=t}}},[i("ul",e._l(e.golbal.myProject.blocks,function(t){return i("li",{key:t.id,on:{click:function(i){return e.blockClick(t)}}},[i("i",{staticClass:"icon-office"}),i("span",[e._v(e._s(t.name))]),e._v(" "),t.active?i("div",{staticClass:"checked"},[i("i",{staticClass:"icon-yuanxingxuanzhongfill"})]):e._e()])}),0)]),e._v(" "),i("el-drawer",{attrs:{title:"请选择主题样式",visible:e.drawerTheme,direction:"rtl","append-to-body":!0,"custom-class":"drawerTheme",size:e.widthDrawerTheme+"px"},on:{"update:visible":function(t){e.drawerTheme=t}}},[i("div",{staticClass:"divUserTheme"},[i("div",{class:"divUserThemeItem"+(1==e.golbal.themeCur?"":" divUserThemeItemC"),on:{click:function(t){return e.themeClick(1)}}},[i("div",{staticClass:"divUserThemeIcon"},[i("i",{staticClass:"icon-checkmark"})]),e._v(" "),i("div",{staticClass:"divUserThemeBoard"}),e._v(" "),i("img",{attrs:{src:"static/images/theme1.jpg"}})]),e._v(" "),i("div",{class:"divUserThemeItem"+(2==e.golbal.themeCur?"":" divUserThemeItemC"),on:{click:function(t){return e.themeClick(2)}}},[i("div",{staticClass:"divUserThemeIcon"},[i("i",{staticClass:"icon-checkmark"})]),e._v(" "),i("div",{staticClass:"divUserThemeBoard"}),e._v(" "),i("img",{attrs:{src:"static/images/theme2.jpg"}})])])]),e._v(" "),i("el-drawer",{attrs:{title:"用户调试",visible:e.drawerTest,direction:"rtl","append-to-body":!0,"custom-class":"drawerTest",size:e.widthDrawerTest+"px"},on:{"update:visible":function(t){e.drawerTest=t}}},[i("el-tabs",{staticClass:"divTabs",attrs:{type:"card"},model:{value:e.tabsTest,callback:function(t){e.tabsTest=t},expression:"tabsTest"}},[i("el-tab-pane",{attrs:{label:"参数设置",name:"tab1"}},[i("el-form",{ref:"form",staticClass:"formTest",attrs:{model:e.formTest,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"服 务 器"}},[i("el-input",{model:{value:e.formTest.server,callback:function(t){e.$set(e.formTest,"server",t)},expression:"formTest.server"}})],1),e._v(" "),i("el-form-item",[i("el-button",{on:{click:e.submitTest}},[e._v("绑定")])],1)],1)],1),e._v(" "),i("el-tab-pane",{attrs:{label:"调试日志",name:"tab2"}},[i("el-button",{on:{click:e.clearLog}},[e._v("清空")]),e._v(" "),i("div",{staticClass:"divSendMessage",style:"height:"+e.heightSendMessage+"px;overflow-y:auto"},[e._v(e._s(e.log))])],1)],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"divUserTop"},[t("div",{staticClass:"divUserFace"},[t("img",{attrs:{src:"static/images/face_man.jpg"}})]),this._v(" "),t("div",{staticClass:"divUserInfo"},[t("span",{staticClass:"spanUserInfo1"},[this._v("LinkScene")]),this._v(" "),t("span",{staticClass:"spanUserInfo2"},[this._v("用户")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"divIcon"},[t("i",{staticClass:"icon-arrow1_right"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"divIcon"},[t("i",{staticClass:"icon-arrow1_right"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"divIcon"},[t("i",{staticClass:"icon-arrow1_right"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"divIcon"},[t("i",{staticClass:"icon-arrow1_right"})])}]},X=i("VU/8")(z,J,!1,null,null,null).exports,q={data:function(){return{heightMessage:window.innerHeight-102}},props:["golbal"],methods:{},mounted:function(){this.golbal.showButtonFloor=!1}},K={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main"},[i("div",{staticClass:"divMessage",style:"height:"+e.heightMessage+"px"},e._l(e.golbal.messages,function(t){return i("div",{key:t.id,staticClass:"divMessageItem"},[i("div",{staticClass:"divTitle"},[i("i",{staticClass:"icon-mail1"}),i("span",[e._v(e._s(t.title))])]),e._v(" "),i("div",{staticClass:"divDate"},[e._v(e._s(t.date))]),e._v(" "),i("div",{staticClass:"divContent"},[e._v(e._s(t.content))])])}),0),e._v(" "),i("el-backtop",{staticStyle:{bottom:"80px",right:"10px"},attrs:{target:".divMessage"}})],1)},staticRenderFns:[]},Z=i("VU/8")(q,K,!1,null,null,null).exports;s.default.use(_.a);var ee=new _.a({routes:[{path:"/",name:"favorite",component:L},{path:"/favorite",name:"favorite",component:L},{path:"/room",name:"room",component:G},{path:"/user",name:"user",component:X},{path:"/message",name:"message",component:Z}]});s.default.use(o.a),s.default.config.productionTip=!1,new s.default({el:"#app",router:ee,components:{App:g},template:"<App/>"})},NVJ6:function(e,t,i){"use strict";t.a={HEAD:[170,170],FUNCTION_CODE:{READ:0,WRITE:64,FEEDBACK:128,STATUS_BACK:192,QUERY_STATUS:1,CONTROL:2},DEVICE_TYPE_ENUM:{DEVICE_TYPE_MAIN_ALL:0,DEVICE_TYPE_MAIN:257,DEVICE_TYPE_GATEWAY:258,DEVICE_TYPE_BUS_SCREEN:259,DEVICE_TYPE_LOGIC:260,DEVICE_TYPE_AI_GENIC:261,DEVICE_TYPE_INFRARED:513,DEVICE_TYPE_LIGHT:769,DEVICE_TYPE_DIMMER:770,DEVICE_TYPE_CURTAIN:771,DEVICE_TYPE_SCENE:772,DEVICE_TYPE_LIGHT_SCENE:773,DEVICE_TYPE_AC:1025}}},XF4N:function(e,t,i){"use strict";t.a=c,t.b=function(e,t){null==t&&console.log("socket is null");null!==t&&3===t.readyState?(t.close(),t=c(s.a.receiveData,t.url)):1===t.readyState?t.send(e):0===t.readyState&&setTimeout(function(){t.send(e)},3e3)};var s=i("uxah"),a="ws://192.168.0.119:8001",o=null,l=[],n=0;function c(e,t){if(l.length>0)for(var i=0;i<l.length;i++)if(l[i].url==t||l[i].url==t+"/"){if(3===l[i].readyState){l.splice(i,1);break}return console.log("已有websocket连接"),l[i]}var s=new WebSocket(null==t?a:t);return s.onopen=r,s.onmessage=u,s.onerror=v,s.onclose=d,l.push(s),window.addEventListener("onmessageWS",function(t){var i=t.detail.data.data,s=new FileReader;s.onload=function(){var t=new Uint8Array(this.result);null!=e&&e(t)},s.readAsArrayBuffer(i)},!1),s}function r(e){n=0,console.log(e);for(var t=0;t<l.length;t++)C(l[t])}function v(e){if(clearInterval(o),l.indexOf(e.target)>=0&&l.splice(l.indexOf(e.target),1),(n+=1)>=10)console.log("重连超出10次，重连结束");else{var t=e.target.url;c(s.a.receiveData,t)}}function u(e){window.dispatchEvent(new CustomEvent("onmessageWS",{detail:{data:e}}))}function d(e){clearInterval(o),console.log("websocket已断开")}function C(e){e.send("pc_client"),o=setInterval(function(){e.send("pc_client")},5e3)}},gQoh:function(e,t,i){"use strict";(function(e){t.a={devicesAll:null,MyProject:null,golbal:null,bytes2hex:function(t){for(var i="",s=0;s<t.length;s++)i=i+e.from([t[s]]).toString("hex")+" ";return i},getVORoomByDeviceId:function(e){var t=this.MyProject;if(null==t)return console.log("project is null"),null;for(var i=0;i<t.blocks.length;i++)for(var s=t.blocks[i],a=0;a<s.floors.length;a++)for(var o=s.floors[a],l=0;l<o.rooms.length;l++)for(var n=o.rooms[l],c=0;c<n.devices.length;c++){if(n.devices[c].id==e)return n}},getVOBus:function(e){var t=this.MyProject;if(null==t)return console.log("project is null"),null;var i=this.getVORoomByDeviceId(e);if(null==i)return null;for(var s=null,a=0;a<t.buses.length;a++)if((s=t.buses[a]).id==i.busId)return s;return null},getTypeStatus:function(){this.golbal.type[1].isOn=!1,this.golbal.type[2].isOn=!1,this.golbal.type[3].isOn=!1,this.golbal.type[4].isOn=!1;for(var e=0;e<this.golbal.roomCur.devices.length;e++){var t=this.golbal.roomCur.devices[e];switch(t.type){case"light":t.isOn&&(this.golbal.type[1].isOn=!0);break;case"dimmer":t.value>0&&(this.golbal.type[1].isOn=!0);break;case"curtain":100==t.value&&(this.golbal.type[2].isOn=!0);break;case"ac":t.isOn&&(this.golbal.type[3].isOn=!0);break;case"scene":t.isOn&&(this.golbal.type[4].isOn=!0)}}}}}).call(t,i("EuP9").Buffer)},uxah:function(e,t,i){"use strict";var s=i("NVJ6"),a=i("gQoh");t.a={receiveData:function(e){if(console.log("<== "+a.a.bytes2hex(e)),e.length==e[2])for(var t=0;t<a.a.devicesAll.length;t++){var i=a.a.devicesAll[t].device;if(e[3]==i.areacode&&e[4]==i.addr)if("light"==i.type&&(e[5]<<8)+e[6]==s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_LIGHT){var o=(e[11]<<8)+e[10];i.isOn=(o&Math.pow(2,i.channel-1))>0}else if("dimmer"==i.type&&(e[5]<<8)+e[6]==s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_DIMMER)1==i.channel?i.value=e[10]:i.value=e[11];else if("curtain"==i.type&&(e[5]<<8)+e[6]==s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_CURTAIN)1==i.channel?i.value=e[10]:i.value=e[11];else if("ac"==i.type&&(e[5]<<8)+e[6]==s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_AC){i.value=e[9];o=e[8];switch(i.isOn=o>>7==1,i.lock=o>>5&3,i.fan=o>>3&3,3&o){case 1:i.mode="制冷";break;case 2:i.mode="制热";break;case 3:i.mode="送风";break;default:i.mode="恒温"}}else if("scene"==i.type&&(e[5]<<8)+e[6]==s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_SCENE){o=(e[11]<<8)+e[10];i.isOn=(o&Math.pow(2,i.channel-1))>0}}}}}},["NHnr"]);
//# sourceMappingURL=app.2709cdf2cff904257544.js.map