webpackJsonp([1],{"22e4":function(e,i,t){"use strict";(function(e){var a=t("NVJ6"),s=t("gQoh"),o=t("uxah"),n=t("XF4N");i.a={udp_client:null,ip:"",port:0,resetNetworkInfo:function(e,i){this.ip=e,this.port=i,s.a.log("切换到"+e+":"+i),this.udp_client=new UDP.Client(e,i)},buildCommand:function(e,i,t,s,o){var n=9;null!=e&&(n+=e.length);var c=[];if(c.push(a.a.HEAD[0]),c.push(a.a.HEAD[1]),c.push(n),c.push(null==i?0:parseInt(i)),c.push(null==t?0:parseInt(t)),c.push(s>>8),c.push(255&s),c.push(o),null!=e)for(var l=0;l<e.length;l++)c.push(e[l]);var r=0;for(l=3;l<c.length;l++)r+=c[l];return c.push(255&r),c},sendAction:function(i){var t=s.a.getVOBus(i.id);if(null!=t){var c=this.getDeviceType(i),l=[],r=0;if(c==a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_LIGHT_SCENE||c==a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_DIMMER_SCENE||c==a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_CURTAIN_SCENE||c==a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_LIGHT_DIMMER_SCENE||c==a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_LIGHT_CURTAIN_SCENE||c==a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_DIMMER_CURTAIN_SCENE)switch(i.type){case"light":r=a.a.FUNCTION_CODE.WRITE+a.a.FUNCTION_CODE.CONTROL;var u=0;i.isOn&&(u=100),l.push(i.channel),l.push(u);break;case"dimmer":case"curtain":r=a.a.FUNCTION_CODE.WRITE+a.a.FUNCTION_CODE.CONTROL,l.push(i.channel),l.push(i.value);break;case"scene":r=a.a.FUNCTION_CODE.WRITE+7;u=0;i.isOn&&(u=100),l.push(i.channel),l.push(u)}else switch(i.type){case"light":c=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_LIGHT,r=a.a.FUNCTION_CODE.WRITE+a.a.FUNCTION_CODE.CONTROL;u=0;i.isOn&&(u=100),l.push(i.channel),l.push(u);break;case"dimmer":c=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_DIMMER,r=a.a.FUNCTION_CODE.WRITE+a.a.FUNCTION_CODE.CONTROL,l.push(i.channel),l.push(i.value);break;case"curtain":c=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_CURTAIN,r=a.a.FUNCTION_CODE.WRITE+a.a.FUNCTION_CODE.CONTROL,l.push(i.channel),l.push(i.value);break;case"ac":c=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_AC,r=a.a.FUNCTION_CODE.WRITE+a.a.FUNCTION_CODE.CONTROL;var v=0;i.isOn&&(v+=128),v+=i.lock<<5,v+=i.fan<<3,"制冷"==i.mode?v+=1:"制热"==i.mode?v+=2:"送风"==i.mode&&(v+=3),l.push(v),l.push(i.value),l.push(128),l.push(28),l.push(128),l.push(25),l.push(0);break;case"scene":c=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_SCENE,r=a.a.FUNCTION_CODE.WRITE+7;u=0;i.isOn&&(u=100),l.push(i.channel),l.push(u);break;case"heating":c=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_AC,r=a.a.FUNCTION_CODE.WRITE+a.a.FUNCTION_CODE.CONTROL;v=0;i.isOn&&(v+=128),v+=i.lock<<5,l.push(128),l.push(25),l.push(v),l.push(i.value),l.push(128),l.push(25),l.push(0);break;case"fan":c=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_AC,r=a.a.FUNCTION_CODE.WRITE+a.a.FUNCTION_CODE.CONTROL;v=0;i.isOn&&(v+=128),v+=i.lock<<5,v+=i.fan<<3,l.push(128),l.push(28),l.push(128),l.push(28),l.push(v),l.push(i.value),l.push(0)}var d=this.buildCommand(l,i.areacode,i.addr,c,r);s.a.log("==> "+s.a.bytes2hex(d));var h=Object(n.b)(o.a.receiveData,t.ws_url);Object(n.d)(e.from(d),h,t)}else s.a.log("bus is null")},sendACAction:function(i,t){var c=s.a.getVOBus(i.id);if(null!=c){var l,r=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_MAIN_ALL,u=[];switch(r=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_AC,l=a.a.FUNCTION_CODE.WRITE+a.a.FUNCTION_CODE.CONTROL,u.push(1),u.push(2),u.push(t),t){case 1:i.isOn?u.push(1):u.push(0);break;case 2:u.push(i.value);break;case 3:"制冷"==i.mode?u.push(1):"制热"==i.mode?u.push(2):"送风"==i.mode&&u.push(3);break;case 4:u.push(parseInt(i.fan));break;case 5:u.push(parseInt(i.lock))}var v=this.buildCommand(u,i.areacode,i.addr,r,l);s.a.log("==> "+s.a.bytes2hex(v));var d=Object(n.b)(o.a.receiveData,c.ws_url);Object(n.d)(e.from(v),d,c)}else s.a.log("bus is null")},queryDeviceStatus:function(i){var t=s.a.getVOBus(i.id);if(null!=t){var c=this.getDeviceType(i);console.log(c);var l=this.buildCommand([],i.areacode,i.addr,c,a.a.FUNCTION_CODE.QUERY_STATUS);s.a.log("==> "+s.a.bytes2hex(l));var r=Object(n.b)(o.a.receiveData,t.ws_url);Object(n.d)(e.from(l),r,t)}else s.a.log("bus is null")},getDeviceType:function(e){var i=parseInt(e.areacode),t=parseInt(e.addr),o=e.type,n=[];n.push(o);for(var c=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_MAIN_ALL,l=0;l<s.a.golbal.roomCur.devices.length;l++){var r=s.a.golbal.roomCur.devices[l];parseInt(r.areacode)==i&&parseInt(r.addr)==t&&-1==n.indexOf(r.type)&&n.push(r.type)}if(1==n.length)switch(e.type){case"light":c=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_LIGHT;break;case"dimmer":c=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_DIMMER;break;case"curtain":c=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_CURTAIN;break;case"ac":c=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_AC;break;case"scene":c=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_SCENE;break;case"heating":case"fan":c=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_AC}else 2==n.length?n.indexOf("scene")>-1&&n.indexOf("light")>-1?c=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_LIGHT_SCENE:n.indexOf("scene")>-1&&n.indexOf("dimmer")>-1?c=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_DIMMER_SCENE:n.indexOf("scene")>-1&&n.indexOf("curtain")>-1&&(c=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_CURTAIN_SCENE):3==n.length&&(n.indexOf("scene")>-1&&n.indexOf("light")>-1&&n.indexOf("dimmer")>-1?c=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_LIGHT_DIMMER_SCENE:n.indexOf("scene")>-1&&n.indexOf("light")>-1&&n.indexOf("curtain")>-1?c=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_LIGHT_CURTAIN_SCENE:n.indexOf("scene")>-1&&n.indexOf("dimmer")>-1&&n.indexOf("curtain")>-1&&(c=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_DIMMER_CURTAIN_SCENE));return c}}}).call(i,t("EuP9").Buffer)},BfqG:function(e,i){},NHnr:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=t("7+uW"),s=t("zL8q"),o=t.n(s),n=t("Xxa5"),c=t.n(n),l=t("exGp"),r=t.n(l),u=t("bOdI"),v=t.n(u),d=t("mtWM"),h=t.n(d),C=t("gQoh"),m={data:function(){return{visibleFloor:!1}},props:["golbal"],methods:{floorClick:function(e){for(var i=0;i<this.golbal.blockCur.floors.length;i++){this.golbal.blockCur.floors[i].active=!1}e.active=!0,this.golbal.floorCur=e,this.visibleFloor=!1,this.golbal.roomCur=this.golbal.floorCur.rooms[0];for(i=0;i<this.golbal.floorCur.rooms.length;i++){this.golbal.floorCur.rooms[i].active=0==i}C.a.sendQueryDeviceStatus(),C.a.getTypeStatus()},messageClick:function(){"/message"!=this.$route.path&&this.$router.push({path:"/message"})}}},f={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"header"},[t("div",{staticClass:"divHeaderLeft"},[t("div",{staticClass:"btnHeader",on:{click:function(i){return e.messageClick()}}},[t("i",{staticClass:"icon-mail1"})])]),e._v(" "),t("div",{staticClass:"divHeaderMain"},[e._v("\n    "+e._s(e.golbal.myProject.name)+"\n  ")]),e._v(" "),t("div",{staticClass:"divHeaderRight"},[e.golbal.showButtonFloor?t("el-popover",{attrs:{placement:"bottom",width:"100",trigger:"click","popper-class":"popoverFloor"},model:{value:e.visibleFloor,callback:function(i){e.visibleFloor=i},expression:"visibleFloor"}},[t("div",[t("span",{staticClass:"spanTitle"},[e._v("请选择楼层")]),e._v(" "),t("ul",e._l(e.golbal.blockCur.floors,function(i){return t("li",{key:i.id,class:i.isOn?"liBlue":"",on:{click:function(t){return e.floorClick(i)}}},[t("i",{staticClass:"icon-office"}),t("span",[e._v(e._s(i.name))]),e._v(" "),i.active?t("div",{staticClass:"checked"},[t("i",{staticClass:"icon-yuanxingxuanzhongfill"})]):e._e()])}),0)]),e._v(" "),t("el-button",{staticClass:"btnHeaderFloor",attrs:{slot:"reference"},slot:"reference"},[t("span",[e._v(e._s(e.golbal.floorCur.name))]),e._v(" "),t("i",{staticClass:"icon-caret-down"})])],1):e._e()],1)])},staticRenderFns:[]},_=t("VU/8")(m,f,!1,null,null,null).exports,b={data:function(){return{clickable:this.hasFavorite()}},props:["golbal"],methods:{click:function(){alert("hello")},hasFavorite:function(){if(console.log("hasfavorite"),null!=this.golbal&&null!=this.golbal.floorCur&&null!=this.golbal.floorCur.rooms)for(var e=0;e<this.golbal.floorCur.rooms.length;e++)for(var i=this.golbal.floorCur.rooms[e],t=0;t<i.devices.length;t++)if(i.devices[t].isFavorite)return!0;return!1}}},g={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"footer"},[t("ul",[t("li",[t("router-link",{class:{routerC:"favorite"==e.golbal.menuCur},attrs:{to:"/favorite","active-class":"routerC",tag:"div",event:e.hasFavorite()?"click":""}},[t("i",{staticClass:"icon-favoritesfilling",style:e.hasFavorite()?"color:"+("favorite"==e.golbal.menuCur?"#f08519":"#ffffff"):"color:#505050"}),e._v(" "),t("span",{style:e.hasFavorite()?"color:"+("favorite"==e.golbal.menuCur?"#f08519":"#ffffff"):"color:#505050"},[e._v("习惯")])])],1),e._v(" "),t("li",[t("router-link",{attrs:{to:"/room","active-class":"routerC",tag:"div"}},[t("i",{staticClass:"icon-home3"}),e._v(" "),t("span",[e._v("区域")])])],1),e._v(" "),t("li",[t("router-link",{attrs:{to:"/user","active-class":"routerC",tag:"div"}},[t("i",{staticClass:"icon-accountfilling"}),e._v(" "),t("span",[e._v("我的")])])],1)])])},staticRenderFns:[]},p=t("VU/8")(b,g,!1,null,null,null).exports,y=t("XF4N"),k=t("uxah"),E={name:"App",components:{FrameHeader:_,FrameFooter:p},data:function(){return{golbal:v()({HOST:"https://app.lk-control.com",accessToken:"",refreshToken:"",menuCur:"",showDebug:!1,isGallery:!0,type:[{id:1,name:"all",icon:"icon-all",isOn:!1},{id:2,name:"light",icon:"icon-ls_1_light",isOn:!1},{id:3,name:"curtain",icon:"icon-ls_23_curtain",isOn:!1},{id:4,name:"ac",icon:"icon-ls_7_ac",isOn:!1},{id:5,name:"scene",icon:"icon-ls_26_go_off_work",isOn:!1}],typeCur:"all",showButtonFloor:!1,blockCur:{},floorCur:{},roomCur:{},myProject:{id:"b0b502b7-c000-4000-a000-0547116af000",name:"万科水晶城",active:!0,blocks:[{id:"b0b502b7-c001-4000-a000-0547116af000",name:"1座",floors:[{id:"b0b502b7-c001-4001-a000-0547116af000",name:"楼层一",active:!0,isOn:!1,rooms:[{id:"b0b502b7-c001-4001-a001-0547116af000",name:"主卧",busId:"7e0378ca-c813-4056-a001-485e2970c001",active:!0,isOn:!1,devices:[{id:"b0b502b7-c001-4001-a001-0547116af001",type:"light",areacode:1,addr:1,channel:1,name:"吊灯",summary:"关闭",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af002",type:"light",areacode:1,addr:1,channel:2,name:"壁灯",summary:"开启",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!0},{id:"b0b502b7-c001-4001-a001-0547116af003",type:"curtain",areacode:1,addr:1,channel:3,name:"窗帘",summary:"50%",icon:"icon-ls_23_curtain",isFavorite:!1,hits:0,value:10},{id:"b0b502b7-c001-4001-a001-0547116af004",type:"dimmer",areacode:1,addr:1,channel:2,name:"床头灯",summary:"40%",icon:"icon-ls_4_dimmer",isFavorite:!1,hits:0,value:40},{id:"b0b502b7-c001-4001-a001-0547116af005",type:"ac",name:"空调",summary:"制冷 26℃",icon:"icon-ls_7_ac",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"制冷",fan:3,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af006",type:"scene",areacode:1,addr:1,channel:1,name:"场景",summary:"关闭",icon:"icon-ls_26_go_off_work",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af007",type:"heating",name:"地暖",summary:"26℃",icon:"icon-ls_19_heater",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"",fan:0,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af008",type:"fan",name:"新风",summary:"26℃",icon:"icon-ls_22_new_trend",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"",fan:3,lock:0}]},{id:"b0b502b7-c001-4001-a001-0547116af001",name:"主卧1",busId:"7e0378ca-c813-4056-a001-485e2970c001",active:!0,isOn:!1,devices:[{id:"b0b502b7-c001-4001-a001-0547116af001",type:"light",areacode:1,addr:1,channel:1,name:"吊灯",summary:"关闭",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af002",type:"light",areacode:1,addr:1,channel:2,name:"壁灯",summary:"开启",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!0},{id:"b0b502b7-c001-4001-a001-0547116af003",type:"curtain",areacode:1,addr:1,channel:3,name:"窗帘",summary:"50%",icon:"icon-ls_23_curtain",isFavorite:!1,hits:0,value:10},{id:"b0b502b7-c001-4001-a001-0547116af004",type:"dimmer",areacode:1,addr:1,channel:2,name:"床头灯",summary:"40%",icon:"icon-ls_4_dimmer",isFavorite:!1,hits:0,value:40},{id:"b0b502b7-c001-4001-a001-0547116af005",type:"ac",name:"空调",summary:"制冷 26℃",icon:"icon-ls_7_ac",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"制冷",fan:3,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af006",type:"scene",areacode:1,addr:1,channel:1,name:"场景",summary:"关闭",icon:"icon-ls_26_go_off_work",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af007",type:"heating",name:"地暖",summary:"26℃",icon:"icon-ls_19_heater",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"",fan:0,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af008",type:"fan",name:"新风",summary:"26℃",icon:"icon-ls_22_new_trend",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"",fan:3,lock:0}]},{id:"b0b502b7-c001-4001-a001-0547116af002",name:"主卧123456",busId:"7e0378ca-c813-4056-a001-485e2970c001",active:!0,isOn:!1,devices:[{id:"b0b502b7-c001-4001-a001-0547116af001",type:"light",areacode:1,addr:1,channel:1,name:"吊灯",summary:"关闭",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af002",type:"light",areacode:1,addr:1,channel:2,name:"壁灯",summary:"开启",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!0},{id:"b0b502b7-c001-4001-a001-0547116af003",type:"curtain",areacode:1,addr:1,channel:3,name:"窗帘",summary:"50%",icon:"icon-ls_23_curtain",isFavorite:!1,hits:0,value:10},{id:"b0b502b7-c001-4001-a001-0547116af004",type:"dimmer",areacode:1,addr:1,channel:2,name:"床头灯",summary:"40%",icon:"icon-ls_4_dimmer",isFavorite:!1,hits:0,value:40},{id:"b0b502b7-c001-4001-a001-0547116af005",type:"ac",name:"空调",summary:"制冷 26℃",icon:"icon-ls_7_ac",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"制冷",fan:3,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af006",type:"scene",areacode:1,addr:1,channel:1,name:"场景",summary:"关闭",icon:"icon-ls_26_go_off_work",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af007",type:"heating",name:"地暖",summary:"26℃",icon:"icon-ls_19_heater",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"",fan:0,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af008",type:"fan",name:"新风",summary:"26℃",icon:"icon-ls_22_new_trend",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"",fan:3,lock:0}]},{id:"b0b502b7-c001-4001-a001-0547116af003",name:"主卧",busId:"7e0378ca-c813-4056-a001-485e2970c001",active:!0,isOn:!1,devices:[{id:"b0b502b7-c001-4001-a001-0547116af001",type:"light",areacode:1,addr:1,channel:1,name:"吊灯",summary:"关闭",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af002",type:"light",areacode:1,addr:1,channel:2,name:"壁灯",summary:"开启",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!0},{id:"b0b502b7-c001-4001-a001-0547116af003",type:"curtain",areacode:1,addr:1,channel:3,name:"窗帘",summary:"50%",icon:"icon-ls_23_curtain",isFavorite:!1,hits:0,value:10},{id:"b0b502b7-c001-4001-a001-0547116af004",type:"dimmer",areacode:1,addr:1,channel:2,name:"床头灯",summary:"40%",icon:"icon-ls_4_dimmer",isFavorite:!1,hits:0,value:40},{id:"b0b502b7-c001-4001-a001-0547116af005",type:"ac",name:"空调",summary:"制冷 26℃",icon:"icon-ls_7_ac",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"制冷",fan:3,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af006",type:"scene",areacode:1,addr:1,channel:1,name:"场景",summary:"关闭",icon:"icon-ls_26_go_off_work",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af007",type:"heating",name:"地暖",summary:"26℃",icon:"icon-ls_19_heater",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"",fan:0,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af008",type:"fan",name:"新风",summary:"26℃",icon:"icon-ls_22_new_trend",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"",fan:3,lock:0}]},{id:"b0b502b7-c001-4001-a001-0547116af004",name:"主卧",busId:"7e0378ca-c813-4056-a001-485e2970c001",active:!0,isOn:!1,devices:[{id:"b0b502b7-c001-4001-a001-0547116af001",type:"light",areacode:1,addr:1,channel:1,name:"吊灯",summary:"关闭",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af002",type:"light",areacode:1,addr:1,channel:2,name:"壁灯",summary:"开启",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!0},{id:"b0b502b7-c001-4001-a001-0547116af003",type:"curtain",areacode:1,addr:1,channel:3,name:"窗帘",summary:"50%",icon:"icon-ls_23_curtain",isFavorite:!1,hits:0,value:10},{id:"b0b502b7-c001-4001-a001-0547116af004",type:"dimmer",areacode:1,addr:1,channel:2,name:"床头灯",summary:"40%",icon:"icon-ls_4_dimmer",isFavorite:!1,hits:0,value:40},{id:"b0b502b7-c001-4001-a001-0547116af005",type:"ac",name:"空调",summary:"制冷 26℃",icon:"icon-ls_7_ac",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"制冷",fan:3,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af006",type:"scene",areacode:1,addr:1,channel:1,name:"场景",summary:"关闭",icon:"icon-ls_26_go_off_work",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af007",type:"heating",name:"地暖",summary:"26℃",icon:"icon-ls_19_heater",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"",fan:0,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af008",type:"fan",name:"新风",summary:"26℃",icon:"icon-ls_22_new_trend",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"",fan:3,lock:0}]},{id:"b0b502b7-c001-4001-a001-0547116af005",name:"主卧",busId:"7e0378ca-c813-4056-a001-485e2970c001",active:!0,isOn:!1,devices:[{id:"b0b502b7-c001-4001-a001-0547116af001",type:"light",areacode:1,addr:1,channel:1,name:"吊灯",summary:"关闭",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af002",type:"light",areacode:1,addr:1,channel:2,name:"壁灯",summary:"开启",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!0},{id:"b0b502b7-c001-4001-a001-0547116af003",type:"curtain",areacode:1,addr:1,channel:3,name:"窗帘",summary:"50%",icon:"icon-ls_23_curtain",isFavorite:!1,hits:0,value:10},{id:"b0b502b7-c001-4001-a001-0547116af004",type:"dimmer",areacode:1,addr:1,channel:2,name:"床头灯",summary:"40%",icon:"icon-ls_4_dimmer",isFavorite:!1,hits:0,value:40},{id:"b0b502b7-c001-4001-a001-0547116af005",type:"ac",name:"空调",summary:"制冷 26℃",icon:"icon-ls_7_ac",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"制冷",fan:3,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af006",type:"scene",areacode:1,addr:1,channel:1,name:"场景",summary:"关闭",icon:"icon-ls_26_go_off_work",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af007",type:"heating",name:"地暖",summary:"26℃",icon:"icon-ls_19_heater",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"",fan:0,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af008",type:"fan",name:"新风",summary:"26℃",icon:"icon-ls_22_new_trend",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"",fan:3,lock:0}]},{id:"b0b502b7-c001-4001-a001-0547116af006",name:"主卧",busId:"7e0378ca-c813-4056-a001-485e2970c001",active:!0,isOn:!1,devices:[{id:"b0b502b7-c001-4001-a001-0547116af001",type:"light",areacode:1,addr:1,channel:1,name:"吊灯",summary:"关闭",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af002",type:"light",areacode:1,addr:1,channel:2,name:"壁灯",summary:"开启",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!0},{id:"b0b502b7-c001-4001-a001-0547116af003",type:"curtain",areacode:1,addr:1,channel:3,name:"窗帘",summary:"50%",icon:"icon-ls_23_curtain",isFavorite:!1,hits:0,value:10},{id:"b0b502b7-c001-4001-a001-0547116af004",type:"dimmer",areacode:1,addr:1,channel:2,name:"床头灯",summary:"40%",icon:"icon-ls_4_dimmer",isFavorite:!1,hits:0,value:40},{id:"b0b502b7-c001-4001-a001-0547116af005",type:"ac",name:"空调",summary:"制冷 26℃",icon:"icon-ls_7_ac",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"制冷",fan:3,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af006",type:"scene",areacode:1,addr:1,channel:1,name:"场景",summary:"关闭",icon:"icon-ls_26_go_off_work",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af007",type:"heating",name:"地暖",summary:"26℃",icon:"icon-ls_19_heater",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"",fan:0,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af008",type:"fan",name:"新风",summary:"26℃",icon:"icon-ls_22_new_trend",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"",fan:3,lock:0}]},{id:"b0b502b7-c001-4001-a001-0547116af007",name:"主卧",busId:"7e0378ca-c813-4056-a001-485e2970c001",active:!0,isOn:!1,devices:[{id:"b0b502b7-c001-4001-a001-0547116af001",type:"light",areacode:1,addr:1,channel:1,name:"吊灯",summary:"关闭",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af002",type:"light",areacode:1,addr:1,channel:2,name:"壁灯",summary:"开启",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!0},{id:"b0b502b7-c001-4001-a001-0547116af003",type:"curtain",areacode:1,addr:1,channel:3,name:"窗帘",summary:"50%",icon:"icon-ls_23_curtain",isFavorite:!1,hits:0,value:10},{id:"b0b502b7-c001-4001-a001-0547116af004",type:"dimmer",areacode:1,addr:1,channel:2,name:"床头灯",summary:"40%",icon:"icon-ls_4_dimmer",isFavorite:!1,hits:0,value:40},{id:"b0b502b7-c001-4001-a001-0547116af005",type:"ac",name:"空调",summary:"制冷 26℃",icon:"icon-ls_7_ac",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"制冷",fan:3,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af006",type:"scene",areacode:1,addr:1,channel:1,name:"场景",summary:"关闭",icon:"icon-ls_26_go_off_work",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af007",type:"heating",name:"地暖",summary:"26℃",icon:"icon-ls_19_heater",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"",fan:0,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af008",type:"fan",name:"新风",summary:"26℃",icon:"icon-ls_22_new_trend",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"",fan:3,lock:0}]},{id:"b0b502b7-c001-4001-a001-0547116af008",name:"主卧",busId:"7e0378ca-c813-4056-a001-485e2970c001",active:!0,isOn:!1,devices:[{id:"b0b502b7-c001-4001-a001-0547116af001",type:"light",areacode:1,addr:1,channel:1,name:"吊灯",summary:"关闭",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af002",type:"light",areacode:1,addr:1,channel:2,name:"壁灯",summary:"开启",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!0},{id:"b0b502b7-c001-4001-a001-0547116af003",type:"curtain",areacode:1,addr:1,channel:3,name:"窗帘",summary:"50%",icon:"icon-ls_23_curtain",isFavorite:!1,hits:0,value:10},{id:"b0b502b7-c001-4001-a001-0547116af004",type:"dimmer",areacode:1,addr:1,channel:2,name:"床头灯",summary:"40%",icon:"icon-ls_4_dimmer",isFavorite:!1,hits:0,value:40},{id:"b0b502b7-c001-4001-a001-0547116af005",type:"ac",name:"空调",summary:"制冷 26℃",icon:"icon-ls_7_ac",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"制冷",fan:3,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af006",type:"scene",areacode:1,addr:1,channel:1,name:"场景",summary:"关闭",icon:"icon-ls_26_go_off_work",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af007",type:"heating",name:"地暖",summary:"26℃",icon:"icon-ls_19_heater",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"",fan:0,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af008",type:"fan",name:"新风",summary:"26℃",icon:"icon-ls_22_new_trend",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"",fan:3,lock:0}]}]}]}],buses:[{name:"测试总线1",id:"7e0378ca-c813-4056-a001-485e2970c001",ip:"192.168.0.119",port:"8000",ws_url:"ws://192.168.0.119:8001",mac:"11 22 33 44 55 66",isOnline:!1}]},testServer:"ws://192.168.0.119:8001",messages:[{id:1,title:"系统通知",date:"2020-07-01 07:22:14",content:"停服维护已经结束，停服期间给您带来的不便，我们深表歉意。",showDelete:!1},{id:2,title:"版本更新公告",date:"2020-06-25 17:43:53",content:"我们预计于北京时间：2020-06-26 02:00 - 04:00进行为期两个小时的停服更新维护。",showDelete:!1},{id:3,title:"升级提醒",date:"2020-06-01 15:14:32",content:"为了使用户获得更好的体验，我们刚刚完成了一次热更，请重新启动程序以使更新生效。",showDelete:!1},{id:4,title:"系统通知",date:"2020-05-28 12:53:43",content:"停服维护已经结束，停服期间给您带来的不便，我们深表歉意。",showDelete:!1}],themeCur:1,drawerAbout:!1,drawerGateway:!1,drawerTest:!1,drawerBlock:!1,drawerTheme:!1},"drawerTest",!1),logList:{logs:[]},heightSendMessage:window.innerHeight-180,widthDrawerTest:window.innerWidth,aboutLogoClickCount:0,version:"v1.0.58",udp_client:null}},methods:{getData:function(){var e=this;return r()(c.a.mark(function i(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},i,e)}))()},loginTemp:function(){var e=C.a.uuid(),i=this.golbal.HOST+"/api?action=APP_LOGIN_TEMP&uuid="+e;h.a.post(i).then(function(e){try{C.a.golbal.accessToken=e.data.accessToken,C.a.golbal.refreshToken=e.data.refreshToken,C.a.log("登录成功：token="+C.a.golbal.accessToken),console.log("myfunction accessToken="+C.a.golbal.accessToken),console.log("myfunction refreshToken="+C.a.golbal.refreshToken)}catch(e){}}).catch(function(e){console.log(e)})},readConfig:function(){if(null==C.a.myProject){var e=window.localStorage;console.log("storage:"+e);var i=e.getItem("myProject");console.log("myProject:"+i),null!=i&&(this.golbal.myProject=JSON.parse(e.getItem("myProject")),this.golbal.themeCur=null==e.getItem("themeCur")?1:parseInt(e.getItem("themeCur")),this.golbal.isGallery=null==e.getItem("isGallery")||1==parseInt(e.getItem("isGallery")),document.getElementById("style").attributes[2].value="static/css/style"+this.golbal.themeCur+".css"),Object(y.a)();for(var t=0;t<this.golbal.myProject.blocks.length;t++){var a=this.golbal.myProject.blocks[t];a.active=!1;for(var s=0;s<a.floors.length;s++){var o=a.floors[s];o.active=!1;for(var n=0;n<o.rooms.length;n++){o.rooms[n].active=!1}}}this.golbal.blockCur=this.golbal.myProject.blocks[0],this.golbal.blockCur.active=!0,this.golbal.floorCur=this.golbal.blockCur.floors[0],this.golbal.floorCur.active=!0,this.golbal.roomCur=this.golbal.floorCur.rooms[0],this.golbal.roomCur.active=!0;var c=[];for(t=0;t<this.golbal.myProject.blocks.length;t++)for(s=0;s<this.golbal.myProject.blocks[t].floors.length;s++)for(n=0;n<this.golbal.myProject.blocks[t].floors[s].rooms.length;n++)for(var l=0;l<this.golbal.myProject.blocks[t].floors[s].rooms[n].devices.length;l++)c.push({device:this.golbal.myProject.blocks[t].floors[s].rooms[n].devices[l],busId:this.golbal.myProject.blocks[t].floors[s].rooms[n].busId});C.a.devicesAll=c,C.a.MyProject=this.golbal.myProject,C.a.golbal=this.golbal,C.a.getTypeStatus()}},aboutLogoClick:function(){0==this.aboutLogoClickCount&&setTimeout(function(){this.aboutLogoClickCount=0}),this.aboutLogoClickCount+=1,10==this.aboutLogoClickCount&&(this.golbal.showDebug=!0)},blockClick:function(e){for(var i=0;i<this.golbal.myProject.blocks.length;i++){this.golbal.myProject.blocks[i].active=!1}e.active=!0,this.golbal.blockCur=e,this.golbal.floorCur=this.golbal.blockCur.floors[0];for(i=0;i<this.golbal.blockCur.floors.length;i++){this.golbal.blockCur.floors[i].active=0==i}this.golbal.roomCur=this.golbal.floorCur.rooms[0];for(i=0;i<this.golbal.floorCur.rooms.length;i++){this.golbal.floorCur.rooms[i].active=0==i}C.a.getTypeStatus(),this.drawerBlock=!1},themeClick:function(e){this.golbal.themeCur!=e&&(document.getElementById("style").attributes[2].value="static/css/style"+e+".css"),this.golbal.themeCur=e,C.a.saveSetting()},clearLog:function(){this.logList.logs=[]},init:function(){this.readConfig(),this.udp_client=new UDP.Client("255.255.255.255",1901,this.onUDPMessage);var e=this;setTimeout(function(){var i=[];i.push(255),i.push(1),i.push(1),i.push(2),e.udp_client.send(i,function(){console.log("sended")})},2e3)},onUDPMessage:function(e){console.log(e);var i=new Uint8Array(e.data);if(console.log(i),console.log("<== broadcast "+C.a.bytes2hex(i)),255==i[0]&&i[1]==i.length&&!(i.length<36)){for(var t=[],a=[],s=5;s<=8;s++)a.push(i[s]);for(s=9;s<=14;s++)t.push(i[s]);var o=C.a.bytes2hex(t),n=a[0]+"."+a[1]+"."+a[2]+"."+a[3];C.a.log("mac:"+o+",ip:"+n),C.a.log("关注网关数:"+this.golbal.myProject.buses.length);for(s=0;s<this.golbal.myProject.buses.length;s++){var c=this.golbal.myProject.buses[s];C.a.log("bus mac:"+c.mac+",bus ip:"+n+",比较后:"+(c.mac.trim()==o.toUpperCase().trim())),c.mac.trim()==o.toUpperCase().trim()&&(c.ip=n,c.source_url=c.ws_url,c.ws_url="ws://"+n+":6432/",C.a.log("更新网关"+c.mac+"的ip:"+n))}for(s=0;s<this.golbal.myProject.buses.length;s++){c=this.golbal.myProject.buses[s];console.log(c.mac),Object(y.b)(k.a.receiveData,c.ws_url)}}}},mounted:function(){console.log("mounted"),this.readConfig(),this.loginTemp(),C.a.root=this;var e=this;window.document.addEventListener("resume",function(){C.a.log("resume"),Object(y.c)(),Object(y.a)();for(var i=0;i<e.golbal.myProject.buses.length;i++){var t=e.golbal.myProject.buses[i];console.log(t.mac),Object(y.b)(k.a.receiveData,t.ws_url)}}),setTimeout(this.init,3e3)},beforeMount:function(){console.log("before mount")}},w={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{attrs:{id:"page"}},[t("FrameHeader",{attrs:{golbal:e.golbal}}),e._v(" "),t("router-view",{attrs:{golbal:e.golbal,logList:e.logList}}),e._v(" "),t("FrameFooter",{attrs:{golbal:e.golbal}}),e._v(" "),t("el-dialog",{staticStyle:{"margin-top":"-15vh"},attrs:{title:"关于",visible:e.golbal.drawerAbout,"custom-class":"drawerAbout"},on:{"update:visible":function(i){return e.$set(e.golbal,"drawerAbout",i)}}},[t("div",{staticClass:"divAboutLogo",on:{touchend:function(i){return e.aboutLogoClick()}}},[t("img",{attrs:{src:"static/images/about_logo.png"}})]),e._v(" "),t("div",{staticClass:"divAboutAppname"},[t("span",{staticStyle:{color:"#bdbdbd"}},[e._v("智慧云联")])]),e._v(" "),t("hr",{staticClass:"hrAbout"}),e._v(" "),t("div",{staticClass:"divAboutVersion"},[t("span",{staticStyle:{color:"#bdbdbd"}},[e._v(e._s(e.version))])])]),e._v(" "),t("el-dialog",{staticStyle:{"margin-top":"-15vh"},attrs:{title:"网关列表",visible:e.golbal.drawerGateway,"custom-class":"drawerGateway"},on:{"update:visible":function(i){return e.$set(e.golbal,"drawerGateway",i)}}},[t("ul",[t("li",[t("div",{staticClass:"divGateway1"},[e._v("名称")]),e._v(" "),t("div",{staticClass:"divGateway2"},[e._v("MAC")]),e._v(" "),t("div",{staticClass:"divGateway3"},[e._v("在线")])]),e._v(" "),e._l(e.golbal.myProject.buses,function(i){return t("li",{key:i.id},[t("div",{staticClass:"divGateway1"},[e._v(e._s(i.name))]),e._v(" "),t("div",{staticClass:"divGateway2"},[e._v(e._s(i.mac))]),e._v(" "),t("div",{staticClass:"divGateway3"},[t("i",{class:i.isOnline?"icon-checkmark":""})])])})],2)]),e._v(" "),t("el-dialog",{staticStyle:{"margin-top":"-15vh"},attrs:{title:"请选择楼栋",visible:e.golbal.drawerBlock,"custom-class":"drawerBlock"},on:{"update:visible":function(i){return e.$set(e.golbal,"drawerBlock",i)}}},[t("ul",e._l(e.golbal.myProject.blocks,function(i){return t("li",{key:i.id,on:{click:function(t){return e.blockClick(i)}}},[t("i",{staticClass:"icon-office"}),t("span",[e._v(e._s(i.name))]),e._v(" "),i.active?t("div",{staticClass:"checked"},[t("i",{staticClass:"icon-yuanxingxuanzhongfill"})]):e._e()])}),0)]),e._v(" "),t("el-dialog",{staticStyle:{"margin-top":"-15vh"},attrs:{title:"请选择主题样式",visible:e.golbal.drawerTheme,"custom-class":"drawerTheme"},on:{"update:visible":function(i){return e.$set(e.golbal,"drawerTheme",i)}}},[t("div",{staticClass:"divUserTheme"},[t("div",{class:"divUserThemeItem"+(1==e.golbal.themeCur?"":" divUserThemeItemC"),on:{click:function(i){return e.themeClick(1)}}},[t("div",{staticClass:"divUserThemeIcon"},[t("i",{staticClass:"icon-checkmark"})]),e._v(" "),t("div",{staticClass:"divUserThemeBoard"}),e._v(" "),t("img",{attrs:{src:"static/images/theme1.jpg"}})]),e._v(" "),t("div",{class:"divUserThemeItem"+(2==e.golbal.themeCur?"":" divUserThemeItemC"),on:{click:function(i){return e.themeClick(2)}}},[t("div",{staticClass:"divUserThemeIcon"},[t("i",{staticClass:"icon-checkmark"})]),e._v(" "),t("div",{staticClass:"divUserThemeBoard"}),e._v(" "),t("img",{attrs:{src:"static/images/theme2.jpg"}})])])]),e._v(" "),t("el-dialog",{staticStyle:{"margin-top":"-15vh"},attrs:{title:"日志",visible:e.golbal.drawerTest,"custom-class":"drawerTest"},on:{"update:visible":function(i){return e.$set(e.golbal,"drawerTest",i)}}},[t("el-button",{on:{click:e.clearLog}},[e._v("清空")]),e._v(" "),t("div",{staticClass:"divSendMessage",style:"width:100%;height:"+e.heightSendMessage+"px;overflow-y:auto"},[t("ul",{staticClass:"ulLog"},e._l(e.logList.logs,function(i){return t("li",{key:i},[e._v(e._s(i))])}),0)])],1)],1)},staticRenderFns:[]},T=t("VU/8")(E,w,!1,null,null,null).exports,D=t("/ocq"),I=t("I0MY"),O=t.n(I),P=t("22e4"),A={data:function(){return{}},props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite,C.a.saveProject()},switchClick:function(e){e.isOn=!e.isOn,C.a.getTypeStatus(),P.a.sendAction(e)}}},F={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"divDevice"},[t("div",{staticClass:"divFavorite",on:{click:function(i){return i.stopPropagation(),e.favoriteClick(e.device)}}},[t("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),t("v-touch",{staticClass:"divIcon",attrs:{tag:"div"},on:{tap:function(i){return e.switchClick(e.device)}}},[t("i",{class:[e.device.icon,{iconC:e.device.isOn}]})]),e._v(" "),t("v-touch",{staticClass:"divInfo",attrs:{tag:"div"},on:{tap:function(i){return e.switchClick(e.device)}}},[t("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),t("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(e.device.isOn?"开启":"关闭"))])]),e._v(" "),t("v-touch",{staticClass:"divControl",attrs:{tag:"div"},on:{tap:function(i){return e.switchClick(e.device)}}},[t("div",{staticClass:"btnSwitch"},[t("i",{staticClass:"icon-ls_9_on",class:{iconC:e.device.isOn}})])])],1)},staticRenderFns:[]},N=t("VU/8")(A,F,!1,null,null,null).exports,S={data:function(){return{}},props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite,C.a.saveProject()},curtainClick:function(e,i){null==i?100==this.device.value?this.device.value=0:this.device.value=100:e.value=i,C.a.getTypeStatus(),P.a.sendAction(this.device)}}},V={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"divDevice"},[t("div",{staticClass:"divFavorite",on:{touchend:function(i){return i.stopPropagation(),e.favoriteClick(e.device)}}},[t("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),t("div",{staticClass:"divIcon",on:{touchend:function(i){return i.stopPropagation(),e.curtainClick(e.device)}}},[t("i",{class:[e.device.icon,{iconC:100==e.device.value}]})]),e._v(" "),t("div",{staticClass:"divInfo"},[t("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),t("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(0==e.device.value?"关闭":100==e.device.value?"开启":"停止"))])]),e._v(" "),t("div",{staticClass:"divControl"},[t("div",{class:"btnCurtain btnCurtain1"+(0==e.device.value?" iconC":""),on:{touchend:function(i){return i.stopPropagation(),e.curtainClick(e.device,0)}}},[t("i",{staticClass:"icon-arrow-right"}),t("i",{staticClass:"icon-arrow-left"})]),e._v(" "),t("div",{class:"btnCurtain btnCurtain2"+(101==e.device.value?" iconC":""),on:{touchend:function(i){return i.stopPropagation(),e.curtainClick(e.device,101)}}},[t("i",{staticClass:"icon-pause2"})]),e._v(" "),t("div",{class:"btnCurtain btnCurtain3"+(100==e.device.value?" iconC":""),on:{touchend:function(i){return i.stopPropagation(),e.curtainClick(e.device,100)}}},[t("i",{staticClass:"icon-arrow-left"}),t("i",{staticClass:"icon-arrow-right"})])])])},staticRenderFns:[]},U=t("VU/8")(S,V,!1,null,null,null).exports,R={props:["device","touchAction"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite,C.a.saveProject()},dimmerChange:function(){this.touchAction.isDown=!0,C.a.getTypeStatus(),P.a.sendAction(this.device)},switchClick:function(e){e.value>0?e.value=0:e.value=100,C.a.getTypeStatus(),P.a.sendAction(e)}},mounted:function(){this.dimmerValue=this.device.value}},M={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"divDevice"},[t("div",{staticClass:"divFavorite",on:{click:function(i){return i.stopPropagation(),e.favoriteClick(e.device)}}},[t("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),t("div",{staticClass:"divIcon",on:{touchend:function(i){return i.stopPropagation(),e.switchClick(e.device)}}},[t("i",{class:[e.device.icon,{iconC:e.device.value>0}]})]),e._v(" "),t("div",{staticClass:"divInfo",on:{touchend:function(i){return i.stopPropagation(),e.switchClick(e.device)}}},[t("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),t("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(e.device.value)+"%")])]),e._v(" "),t("div",{staticClass:"divControl"},[t("div",{staticClass:"divDimmer1"},[t("el-slider",{attrs:{"show-tooltip":!1},on:{change:e.dimmerChange},model:{value:e.device.value,callback:function(i){e.$set(e.device,"value",i)},expression:"device.value"}})],1)])])},staticRenderFns:[]},Y=t("VU/8")(R,M,!1,null,null,null).exports,L={data:function(){return{drawer:!1,direction:"btt",heightDrawer:window.innerHeight-110,visibleFan:!1,visibleLock:!1}},props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite,C.a.saveProject()},switchClick:function(e){e.isOn=!e.isOn,C.a.getTypeStatus(),P.a.sendACAction(this.device,1)},addClick:function(e){e.value<30&&e.isOn&&(e.value=e.value+1,e.summary=e.mode+" "+e.value+"℃",P.a.sendACAction(this.device,2))},minusClick:function(e){e.value>16&&e.isOn&&(e.value=e.value-1,e.summary=e.mode+" "+e.value+"℃",P.a.sendACAction(this.device,2))},drawerClick:function(e){this.drawer=!0},modeClick:function(e,i){e.isOn&&(e.mode=i,e.summary=e.mode+" "+e.value+"℃",P.a.sendACAction(this.device,3))},fanClick:function(e,i){e.fan=i,this.visibleFan=!1,P.a.sendACAction(this.device,4)},lockClick:function(e,i){e.lock=i,this.visibleLock=!1,P.a.sendACAction(this.device,5)}},mounted:function(){this.device.summary=this.device.mode+" "+this.device.value+"℃"}},x={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"divDevice"},[t("div",{staticClass:"divFavorite",on:{click:function(i){return i.stopPropagation(),e.favoriteClick(e.device)}}},[t("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),t("div",{staticClass:"divIcon",on:{touchend:function(i){return e.drawerClick(e.device)}}},[t("i",{class:e.device.icon})]),e._v(" "),t("div",{staticClass:"divInfo"},[t("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),t("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(e.device.summary))])]),e._v(" "),t("div",{staticClass:"divControl"},[t("div",{staticClass:"btnAC btnAC1",on:{click:function(i){return i.stopPropagation(),e.minusClick(e.device)}}},[t("i",{staticClass:"icon-move1"})]),e._v(" "),t("div",{staticClass:"btnAC btnAC2",on:{click:function(i){return i.stopPropagation(),e.switchClick(e.device)}}},[t("i",{staticClass:"icon-ls_9_on",class:{iconC:e.device.isOn}})]),e._v(" "),t("div",{staticClass:"btnAC btnAC3",on:{click:function(i){return i.stopPropagation(),e.addClick(e.device)}}},[t("i",{staticClass:"icon-add1"})])]),e._v(" "),t("el-drawer",{attrs:{visible:e.drawer,direction:e.direction,"append-to-body":!0,"custom-class":"drawerAC",size:e.heightDrawer+"px"},on:{"update:visible":function(i){e.drawer=i}}},[t("div",{staticClass:"divDrawerACTitle"},[t("span",{staticClass:"spanDrawerAC1"},[e._v("温控器")]),e._v(" "),t("span",{staticClass:"spanDrawerAC2"},[e._v("当前温度"+e._s(e.device.value)+"℃")])]),e._v(" "),t("div",{staticClass:"divDrawerAC"},[t("div",{staticClass:"divDrawerACScreen"},[t("span",{staticClass:"spanDrawerAC3"},[e._v(e._s(e.device.mode))]),e._v(" "),t("div",{staticClass:"divDrawerACTemperature"},[t("div",{staticClass:"divDrawerACTemperature1",on:{click:function(i){return i.stopPropagation(),e.minusClick(e.device)}}},[t("i",{staticClass:"icon-move1"})]),e._v(" "),t("div",{staticClass:"divDrawerACTemperature2"},[e._v(e._s(e.device.value))]),e._v(" "),t("div",{staticClass:"divDrawerACTemperature3",on:{click:function(i){return i.stopPropagation(),e.addClick(e.device)}}},[t("i",{staticClass:"icon-add1"})])]),e._v(" "),t("span",{staticClass:"spanDrawerAC4"},[e._v("℃")])]),e._v(" "),t("div",{staticClass:"divDrawerACMode"},[t("div",{staticClass:"divDrawerACModeC"},[t("el-popover",{attrs:{placement:"top",width:"50",trigger:"click","popper-class":"popoverAC",disabled:!e.device.isOn},model:{value:e.visibleFan,callback:function(i){e.visibleFan=i},expression:"visibleFan"}},[t("div",[t("span",{staticClass:"spanTitle"},[e._v("请选择风速")]),e._v(" "),t("ul",[t("li",{on:{click:function(i){return i.stopPropagation(),e.fanClick(e.device,"1")}}},[t("i",{staticClass:"icon-propeller"}),t("span",[e._v("低速")])]),e._v(" "),t("li",{on:{click:function(i){return i.stopPropagation(),e.fanClick(e.device,"2")}}},[t("i",{staticClass:"icon-screw"}),t("span",[e._v("中速")])]),e._v(" "),t("li",{on:{click:function(i){return i.stopPropagation(),e.fanClick(e.device,"3")}}},[t("i",{staticClass:"icon-screw2"}),t("span",[e._v("高速")])])])]),e._v(" "),t("el-button",{staticClass:"btnDeviceAcFan",attrs:{slot:"reference"},slot:"reference"},[t("i",{class:0==e.device.fan?"icon-abc":1==e.device.fan?"icon-propeller":2==e.device.fan?"icon-screw":"icon-screw2"})])],1)],1),e._v(" "),t("div",{on:{click:function(i){return i.stopPropagation(),e.modeClick(e.device,"制热")}}},[t("i",{staticClass:"icon-sun",class:{iconC:"制热"==e.device.mode&&e.device.isOn}})]),e._v(" "),t("div",{on:{click:function(i){return i.stopPropagation(),e.modeClick(e.device,"制冷")}}},[t("i",{staticClass:"icon-kongdiao",class:{iconC:"制冷"==e.device.mode&&e.device.isOn}})]),e._v(" "),t("div",{on:{click:function(i){return i.stopPropagation(),e.modeClick(e.device,"送风")}}},[t("i",{staticClass:"icon-fan",class:{iconC:"送风"==e.device.mode&&e.device.isOn}})]),e._v(" "),t("div",{staticClass:"divDrawerACModeC"},[t("el-popover",{attrs:{placement:"top",width:"50",trigger:"click","popper-class":"popoverAC",disabled:!e.device.isOn},model:{value:e.visibleLock,callback:function(i){e.visibleLock=i},expression:"visibleLock"}},[t("div",[t("span",{staticClass:"spanTitle"},[e._v("请选择")]),e._v(" "),t("ul",[t("li",{on:{click:function(i){return i.stopPropagation(),e.lockClick(e.device,"0")}}},[t("i",{staticClass:"icon-unlock"}),t("span",[e._v("解锁")])]),e._v(" "),t("li",{on:{click:function(i){return i.stopPropagation(),e.lockClick(e.device,"1")}}},[t("i",{staticClass:"icon-lock1"}),t("span",[e._v("锁定按键")])]),e._v(" "),t("li",{on:{click:function(i){return i.stopPropagation(),e.lockClick(e.device,"2")}}},[t("i",{staticClass:"icon-data"}),t("span",[e._v("锁定数据")])])])]),e._v(" "),t("el-button",{staticClass:"btnDeviceAcFan",attrs:{slot:"reference"},slot:"reference"},[t("i",{class:0==e.device.lock?"icon-unlock":1==e.device.lock?"icon-lock1":"icon-data"})])],1)],1)]),e._v(" "),t("div",{staticClass:"btnDrawerACSwitch",on:{click:function(i){return i.stopPropagation(),e.switchClick(e.device)}}},[t("i",{staticClass:"icon-ls_9_on",class:{iconC:e.device.isOn}})])])])],1)},staticRenderFns:[]},j=t("VU/8")(L,x,!1,null,null,null).exports,B={data:function(){return{}},props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite,C.a.saveProject()},switchClick:function(e){console.log("click"),e.isOn=!e.isOn,C.a.getTypeStatus(),P.a.sendAction(e)}}},G={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"divDevice"},[t("div",{staticClass:"divFavorite",on:{click:function(i){return i.stopPropagation(),e.favoriteClick(e.device)}}},[t("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),t("v-touch",{staticClass:"divIcon",attrs:{tag:"div"},on:{tap:function(i){return e.switchClick(e.device)}}},[t("i",{class:[e.device.icon,{iconC:e.device.isOn}]})]),e._v(" "),t("v-touch",{staticClass:"divInfo",attrs:{tag:"div"},on:{tap:function(i){return e.switchClick(e.device)}}},[t("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),t("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(e.device.isOn?"开启":"关闭"))])]),e._v(" "),t("v-touch",{staticClass:"divControl",attrs:{tag:"div"},on:{tap:function(i){return e.switchClick(e.device)}}},[t("div",{staticClass:"btnSwitch"},[t("i",{staticClass:"icon-ls_9_on",class:{iconC:e.device.isOn}})])])],1)},staticRenderFns:[]},H=t("VU/8")(B,G,!1,null,null,null).exports,$={data:function(){return{drawer:!1,direction:"btt",heightDrawer:window.innerHeight-110,visibleLock:!1}},props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite,C.a.saveProject()},switchClick:function(e){e.isOn=!e.isOn,C.a.getTypeStatus(),P.a.sendAction(this.device)},addClick:function(e){e.value<36&&e.isOn&&(e.value=e.value+1,e.summary=e.mode+" "+e.value+"℃",P.a.sendAction(this.device))},minusClick:function(e){e.value>17&&e.isOn&&(e.value=e.value-1,e.summary=e.mode+" "+e.value+"℃",P.a.sendAction(this.device))},drawerClick:function(e){this.drawer=!0},lockClick:function(e,i){e.lock=i,this.visibleLock=!1,P.a.sendAction(this.device)}}},W={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"divDevice"},[t("div",{staticClass:"divFavorite",on:{click:function(i){return i.stopPropagation(),e.favoriteClick(e.device)}}},[t("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),t("div",{staticClass:"divIcon",on:{click:function(i){return e.drawerClick(e.device)}}},[t("i",{class:e.device.icon})]),e._v(" "),t("div",{staticClass:"divInfo"},[t("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),t("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(e.device.summary))])]),e._v(" "),t("div",{staticClass:"divControl"},[t("div",{staticClass:"btnAC btnAC1",on:{click:function(i){return i.stopPropagation(),e.minusClick(e.device)}}},[t("i",{staticClass:"icon-move1"})]),e._v(" "),t("div",{staticClass:"btnAC btnAC2",on:{click:function(i){return i.stopPropagation(),e.switchClick(e.device)}}},[t("i",{staticClass:"icon-ls_9_on",class:{iconC:e.device.isOn}})]),e._v(" "),t("div",{staticClass:"btnAC btnAC3",on:{click:function(i){return i.stopPropagation(),e.addClick(e.device)}}},[t("i",{staticClass:"icon-add1"})])]),e._v(" "),t("el-drawer",{attrs:{visible:e.drawer,direction:e.direction,"append-to-body":!0,"custom-class":"drawerAC",size:e.heightDrawer+"px"},on:{"update:visible":function(i){e.drawer=i}}},[t("div",{staticClass:"divDrawerACTitle"},[t("span",{staticClass:"spanDrawerAC1"},[e._v("温控器")]),e._v(" "),t("span",{staticClass:"spanDrawerAC2"},[e._v("当前温度"+e._s(e.device.value)+"℃")])]),e._v(" "),t("div",{staticClass:"divDrawerAC"},[t("div",{staticClass:"divDrawerACScreen"},[t("span",{staticClass:"spanDrawerAC3"},[e._v(e._s(e.device.mode))]),e._v(" "),t("div",{staticClass:"divDrawerACTemperature"},[t("div",{staticClass:"divDrawerACTemperature1",on:{click:function(i){return i.stopPropagation(),e.minusClick(e.device)}}},[t("i",{staticClass:"icon-move1"})]),e._v(" "),t("div",{staticClass:"divDrawerACTemperature2"},[e._v(e._s(e.device.value))]),e._v(" "),t("div",{staticClass:"divDrawerACTemperature3",on:{click:function(i){return i.stopPropagation(),e.addClick(e.device)}}},[t("i",{staticClass:"icon-add1"})])]),e._v(" "),t("span",{staticClass:"spanDrawerAC4"},[e._v("℃")])]),e._v(" "),t("div",{staticClass:"divDrawerHeatingMode"},[t("div",{staticClass:"divDrawerACModeC"},[t("el-popover",{attrs:{placement:"top",width:"50",trigger:"click","popper-class":"popoverAC",disabled:!e.device.isOn},model:{value:e.visibleLock,callback:function(i){e.visibleLock=i},expression:"visibleLock"}},[t("div",[t("span",{staticClass:"spanTitle"},[e._v("请选择")]),e._v(" "),t("ul",[t("li",{on:{click:function(i){return i.stopPropagation(),e.lockClick(e.device,"0")}}},[t("i",{staticClass:"icon-unlock"}),t("span",[e._v("解锁")])]),e._v(" "),t("li",{on:{click:function(i){return i.stopPropagation(),e.lockClick(e.device,"1")}}},[t("i",{staticClass:"icon-lock1"}),t("span",[e._v("锁定按键")])]),e._v(" "),t("li",{on:{click:function(i){return i.stopPropagation(),e.lockClick(e.device,"2")}}},[t("i",{staticClass:"icon-data"}),t("span",[e._v("锁定数据")])])])]),e._v(" "),t("el-button",{staticClass:"btnDeviceAcFan",attrs:{slot:"reference"},slot:"reference"},[t("i",{class:0==e.device.lock?"icon-unlock":1==e.device.lock?"icon-lock1":"icon-data"})])],1)],1)]),e._v(" "),t("div",{staticClass:"btnDrawerACSwitch",on:{click:function(i){return i.stopPropagation(),e.switchClick(e.device)}}},[t("i",{staticClass:"icon-ls_9_on",class:{iconC:e.device.isOn}})])])])],1)},staticRenderFns:[]},Q=t("VU/8")($,W,!1,null,null,null).exports,q={data:function(){return{drawer:!1,direction:"btt",heightDrawer:window.innerHeight-110,visibleFan:!1,visibleLock:!1}},props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite,C.a.saveProject()},switchClick:function(e){e.isOn=!e.isOn,C.a.getTypeStatus(),P.a.sendAction(this.device)},addClick:function(e){e.value<36&&e.isOn&&(e.value=e.value+1,e.summary=e.mode+" "+e.value+"℃",P.a.sendAction(this.device))},minusClick:function(e){e.value>17&&e.isOn&&(e.value=e.value-1,e.summary=e.mode+" "+e.value+"℃",P.a.sendAction(this.device))},drawerClick:function(e){this.drawer=!0},fanClick:function(e,i){e.fan=i,this.visibleFan=!1,P.a.sendAction(this.device)},lockClick:function(e,i){e.lock=i,this.visibleLock=!1,P.a.sendAction(this.device)}}},z={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"divDevice"},[t("div",{staticClass:"divFavorite",on:{click:function(i){return i.stopPropagation(),e.favoriteClick(e.device)}}},[t("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),t("div",{staticClass:"divIcon",on:{click:function(i){return e.drawerClick(e.device)}}},[t("i",{class:e.device.icon})]),e._v(" "),t("div",{staticClass:"divInfo"},[t("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),t("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(e.device.summary))])]),e._v(" "),t("div",{staticClass:"divControl"},[t("div",{staticClass:"btnAC btnAC1",on:{click:function(i){return i.stopPropagation(),e.minusClick(e.device)}}},[t("i",{staticClass:"icon-move1"})]),e._v(" "),t("div",{staticClass:"btnAC btnAC2",on:{click:function(i){return i.stopPropagation(),e.switchClick(e.device)}}},[t("i",{staticClass:"icon-ls_9_on",class:{iconC:e.device.isOn}})]),e._v(" "),t("div",{staticClass:"btnAC btnAC3",on:{click:function(i){return i.stopPropagation(),e.addClick(e.device)}}},[t("i",{staticClass:"icon-add1"})])]),e._v(" "),t("el-drawer",{attrs:{visible:e.drawer,direction:e.direction,"append-to-body":!0,"custom-class":"drawerAC",size:e.heightDrawer+"px"},on:{"update:visible":function(i){e.drawer=i}}},[t("div",{staticClass:"divDrawerACTitle"},[t("span",{staticClass:"spanDrawerAC1"},[e._v("温控器")]),e._v(" "),t("span",{staticClass:"spanDrawerAC2"},[e._v("当前温度"+e._s(e.device.value)+"℃")])]),e._v(" "),t("div",{staticClass:"divDrawerAC"},[t("div",{staticClass:"divDrawerACScreen"},[t("span",{staticClass:"spanDrawerAC3"},[e._v(e._s(e.device.mode))]),e._v(" "),t("div",{staticClass:"divDrawerACTemperature"},[t("div",{staticClass:"divDrawerACTemperature1",on:{click:function(i){return i.stopPropagation(),e.minusClick(e.device)}}},[t("i",{staticClass:"icon-move1"})]),e._v(" "),t("div",{staticClass:"divDrawerACTemperature2"},[e._v(e._s(e.device.value))]),e._v(" "),t("div",{staticClass:"divDrawerACTemperature3",on:{click:function(i){return i.stopPropagation(),e.addClick(e.device)}}},[t("i",{staticClass:"icon-add1"})])]),e._v(" "),t("span",{staticClass:"spanDrawerAC4"},[e._v("℃")])]),e._v(" "),t("div",{staticClass:"divDrawerFanMode"},[t("div",{staticClass:"divDrawerACModeC"},[t("el-popover",{attrs:{placement:"top",width:"50",trigger:"click","popper-class":"popoverAC",disabled:!e.device.isOn},model:{value:e.visibleFan,callback:function(i){e.visibleFan=i},expression:"visibleFan"}},[t("div",[t("span",{staticClass:"spanTitle"},[e._v("请选择风速")]),e._v(" "),t("ul",[t("li",{on:{click:function(i){return i.stopPropagation(),e.fanClick(e.device,"0")}}},[t("i",{staticClass:"icon-abc"}),t("span",[e._v("自动")])]),e._v(" "),t("li",{on:{click:function(i){return i.stopPropagation(),e.fanClick(e.device,"1")}}},[t("i",{staticClass:"icon-propeller"}),t("span",[e._v("低速")])]),e._v(" "),t("li",{on:{click:function(i){return i.stopPropagation(),e.fanClick(e.device,"2")}}},[t("i",{staticClass:"icon-screw"}),t("span",[e._v("中速")])]),e._v(" "),t("li",{on:{click:function(i){return i.stopPropagation(),e.fanClick(e.device,"3")}}},[t("i",{staticClass:"icon-screw2"}),t("span",[e._v("高速")])])])]),e._v(" "),t("el-button",{staticClass:"btnDeviceAcFan",attrs:{slot:"reference"},slot:"reference"},[t("i",{class:0==e.device.fan?"icon-abc":1==e.device.fan?"icon-propeller":2==e.device.fan?"icon-screw":"icon-screw2"})])],1)],1),e._v(" "),t("div",{staticClass:"divDrawerACModeC"},[t("el-popover",{attrs:{placement:"top",width:"50",trigger:"click","popper-class":"popoverAC",disabled:!e.device.isOn},model:{value:e.visibleLock,callback:function(i){e.visibleLock=i},expression:"visibleLock"}},[t("div",[t("span",{staticClass:"spanTitle"},[e._v("请选择")]),e._v(" "),t("ul",[t("li",{on:{click:function(i){return i.stopPropagation(),e.lockClick(e.device,"0")}}},[t("i",{staticClass:"icon-unlock"}),t("span",[e._v("解锁")])]),e._v(" "),t("li",{on:{click:function(i){return i.stopPropagation(),e.lockClick(e.device,"1")}}},[t("i",{staticClass:"icon-lock1"}),t("span",[e._v("锁定按键")])]),e._v(" "),t("li",{on:{click:function(i){return i.stopPropagation(),e.lockClick(e.device,"2")}}},[t("i",{staticClass:"icon-data"}),t("span",[e._v("锁定数据")])])])]),e._v(" "),t("el-button",{staticClass:"btnDeviceAcFan",attrs:{slot:"reference"},slot:"reference"},[t("i",{class:0==e.device.lock?"icon-unlock":1==e.device.lock?"icon-lock1":"icon-data"})])],1)],1)]),e._v(" "),t("div",{staticClass:"btnDrawerACSwitch",on:{click:function(i){return i.stopPropagation(),e.switchClick(e.device)}}},[t("i",{staticClass:"icon-ls_9_on",class:{iconC:e.device.isOn}})])])])],1)},staticRenderFns:[]},J=t("VU/8")(q,z,!1,null,null,null).exports;a.default.use(O.a,{name:"v-touch"});var X={components:{DeviceLight:N,DeviceCurtain:U,DeviceDimmer:Y,DeviceAC:j,DeviceScene:H,DeviceHeating:Q,DeviceFan:J},data:function(){return{heightRoom:window.innerHeight-195,touchAction:{isDown:!1},ul_width:200}},props:["golbal"],methods:{roomClick:function(e){for(var i=0;i<this.golbal.floorCur.rooms.length;i++){this.golbal.floorCur.rooms[i].active=!1}e.active=!0,this.golbal.roomCur=e,C.a.sendQueryDeviceStatus(),C.a.getTypeStatus()},typeClick:function(e){this.golbal.typeCur=e},hasType:function(e){if("all"==e)return!0;if(null==this.golbal.roomCur)return!1;if(null==this.golbal.roomCur.devices)return!1;for(var i=0;i<this.golbal.roomCur.devices.length;i++){var t=this.golbal.roomCur.devices[i];if(t.type==e&&t.isFavorite)return!0}return!1},hasFavorite:function(e){if(null==e)return!1;for(var i=0;i<e.devices.length;i++){if(e.devices[i].isFavorite)return!0}return!1},onSwipe:function(e){var i=this;setTimeout(function(){console.log("on Swipe"+i.touchAction.isDown),i.touchAction.isDown||(1==e?i.onSwipeLeft():2==e&&i.onSwipeRight()),i.touchAction.isDown=!1},200)},onSwipeLeft:function(){for(var e=0,i=0;i<this.golbal.floorCur.rooms.length;i++){if(this.golbal.floorCur.rooms[i]==this.golbal.roomCur){e=i;break}}for(e<this.golbal.floorCur.rooms.length-1&&(e+=1);!this.hasFavorite(this.golbal.floorCur.rooms[e])&&e<this.golbal.floorCur.rooms.length;)e+=1;this.hasFavorite(this.golbal.floorCur.rooms[e])&&this.roomClick(this.golbal.floorCur.rooms[e])},onSwipeRight:function(){for(var e=0,i=0;i<this.golbal.floorCur.rooms.length;i++){if(this.golbal.floorCur.rooms[i]==this.golbal.roomCur){e=i;break}}for(e>0&&(e-=1);!this.hasFavorite(this.golbal.floorCur.rooms[e])&&e>0;)e-=1;this.hasFavorite(this.golbal.floorCur.rooms[e])&&this.roomClick(this.golbal.floorCur.rooms[e])}},mounted:function(){this.golbal.showButtonFloor=!0,this.golbal.menuCur="favorite",C.a.sendQueryDeviceStatus();for(var e=this.$refs.ul_room,i=0,t=0;t<e.children.length;t++)i+=e.children[t].clientWidth+2;this.ul_width=i;for(t=0;t<this.golbal.floorCur.rooms.length;t++){(a=this.golbal.floorCur.rooms[t]).active=!1}for(t=0;t<this.golbal.floorCur.rooms.length;t++){var a=this.golbal.floorCur.rooms[t];if(this.hasFavorite(a))return a.active=!0,this.golbal.roomCur=a,C.a.sendQueryDeviceStatus(),void C.a.getTypeStatus()}}},K={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"main"},[t("v-touch",{staticStyle:{"touch-action":"pan-y!important"},attrs:{tag:"div"},on:{swipeleft:function(i){return e.onSwipe(1)},swiperight:function(i){return e.onSwipe(2)}}},[t("div",{staticClass:"divRoomTop"},[t("ul",{ref:"ul_room",style:"width:"+e.ul_width+"px"},[e._l(e.golbal.floorCur.rooms,function(i){return[e.hasFavorite(i)?t("li",{key:i.id,class:i.active?"liRoomTopC":i.isOn?"liRoomTopBlue":"",on:{click:function(t){return e.roomClick(i)}}},[e._v(e._s(i.name))]):e._e()]})],2)]),e._v(" "),t("div",{staticClass:"divRoomTop2"},[t("ul",[t("li",{class:{liRoomTopC:"all"==e.golbal.typeCur},on:{click:function(i){return e.typeClick("all")}}},[t("i",{staticClass:"icon-all"})]),e._v(" "),e.hasType("light")?t("li",{class:"light"==e.golbal.typeCur?"liRoomTopC":e.golbal.type[1].isOn?"liRoomTopBlue":"",on:{click:function(i){return e.typeClick("light")}}},[t("i",{staticClass:"icon-ls_1_light"})]):e._e(),e._v(" "),e.hasType("curtain")?t("li",{class:"curtain"==e.golbal.typeCur?"liRoomTopC":e.golbal.type[2].isOn?"liRoomTopBlue":"",on:{click:function(i){return e.typeClick("curtain")}}},[t("i",{staticClass:"icon-ls_23_curtain"})]):e._e(),e._v(" "),e.hasType("ac")?t("li",{class:"ac"==e.golbal.typeCur?"liRoomTopC":e.golbal.type[3].isOn?"liRoomTopBlue":"",on:{click:function(i){return e.typeClick("ac")}}},[t("i",{staticClass:"icon-air-conditioner"})]):e._e(),e._v(" "),e.hasType("scene")?t("li",{class:"scene"==e.golbal.typeCur?"liRoomTopC":e.golbal.type[4].isOn?"liRoomTopBlue":"",on:{click:function(i){return e.typeClick("scene")}}},[t("i",{staticClass:"icon-ls_26_go_off_work"})]):e._e()])]),e._v(" "),t("div",{staticClass:"divRoom",style:"height:"+e.heightRoom+"px"},[t("div",{staticClass:"divView"},[t("div",{class:"btnList"+(e.golbal.isGallery?"":" btnViewC"),on:{click:function(i){e.golbal.isGallery=!1}}},[t("i",{staticClass:"icon-viewlist"})]),e._v(" "),t("div",{class:"btnGallery"+(e.golbal.isGallery?" btnViewC":""),on:{click:function(i){e.golbal.isGallery=!0}}},[t("i",{staticClass:"icon-viewgallery"})])]),e._v(" "),t("div",{class:"divRoomContent"+(e.golbal.isGallery?" divRoomGallery":" divRoomList"),style:"height:"+(e.heightRoom-14)+"px"},[e._l(e.golbal.roomCur.devices,function(i){return["light"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur||!i.isFavorite?e._e():t("DeviceLight",{key:i.id,attrs:{device:i}}),e._v(" "),"curtain"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur||!i.isFavorite?e._e():t("DeviceCurtain",{key:i.id,attrs:{device:i}}),e._v(" "),"dimmer"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur&&"light"!=e.golbal.typeCur||!i.isFavorite?e._e():t("DeviceDimmer",{key:i.id,attrs:{device:i,touchAction:e.touchAction}}),e._v(" "),"ac"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur||!i.isFavorite?e._e():t("DeviceAC",{key:i.id,attrs:{device:i}}),e._v(" "),"scene"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur||!i.isFavorite?e._e():t("DeviceScene",{key:i.id,attrs:{device:i}})]})],2)])])],1)},staticRenderFns:[]},Z=t("VU/8")(X,K,!1,null,null,null).exports;a.default.use(O.a,{name:"v-touch"});var ee={components:{DeviceLight:N,DeviceCurtain:U,DeviceDimmer:Y,DeviceAC:j,DeviceScene:H,DeviceHeating:Q,DeviceFan:J},data:function(){return{heightRoom:window.innerHeight-195,touchAction:{isDown:!1},ul_width:200}},props:["golbal"],methods:{roomClick:function(e){for(var i=0;i<this.golbal.floorCur.rooms.length;i++){this.golbal.floorCur.rooms[i].active=!1}e.active=!0,this.golbal.roomCur=e,C.a.sendQueryDeviceStatus(),C.a.getTypeStatus(),console.log(this.hasType("light"))},typeClick:function(e){this.golbal.typeCur=e},hasType:function(e){if("all"==e)return!0;if(null==this.golbal.roomCur)return!1;if(null==this.golbal.roomCur.devices)return!1;for(var i=0;i<this.golbal.roomCur.devices.length;i++){if(this.golbal.roomCur.devices[i].type==e)return!0}return!1},onSwipe:function(e){var i=this;setTimeout(function(){console.log("on Swipe"+i.touchAction.isDown),i.touchAction.isDown||(1==e?i.onSwipeLeft():2==e&&i.onSwipeRight()),i.touchAction.isDown=!1},200)},onSwipeLeft:function(){for(var e=0,i=0;i<this.golbal.floorCur.rooms.length;i++){if(this.golbal.floorCur.rooms[i]==this.golbal.roomCur){e=i;break}}e<this.golbal.floorCur.rooms.length-1&&(e+=1),this.roomClick(this.golbal.floorCur.rooms[e])},onSwipeRight:function(){for(var e=0,i=0;i<this.golbal.floorCur.rooms.length;i++){if(this.golbal.floorCur.rooms[i]==this.golbal.roomCur){e=i;break}}e>0&&(e-=1),this.roomClick(this.golbal.floorCur.rooms[e])},setView:function(e){this.golbal.isGallery=e,C.a.saveSetting()},resetUlWidth:function(){for(var e=this.$refs.ul_room,i=0,t=0;t<e.children.length;t++)i+=e.children[t].clientWidth+2;return this.ul_width=i,i}},mounted:function(){this.golbal.showButtonFloor=!0,this.golbal.menuCur="room",C.a.sendQueryDeviceStatus(),this.resetUlWidth()},updated:function(){this.resetUlWidth()}},ie={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"main"},[t("v-touch",{staticStyle:{"touch-action":"pan-y!important"},attrs:{tag:"div"},on:{swipeleft:function(i){return e.onSwipe(1)},swiperight:function(i){return e.onSwipe(2)}}},[t("div",{staticClass:"divRoomTop"},[t("ul",{ref:"ul_room",style:"width:"+e.ul_width+"px"},e._l(e.golbal.floorCur.rooms,function(i){return t("li",{key:i.id,class:i.active?"liRoomTopC":i.isOn?"liRoomTopBlue":"",on:{click:function(t){return e.roomClick(i)}}},[e._v(e._s(i.name))])}),0)]),e._v(" "),t("div",{staticClass:"divRoomTop2"},[t("ul",[t("li",{class:{liRoomTopC:"all"==e.golbal.typeCur},on:{click:function(i){return e.typeClick("all")}}},[t("i",{staticClass:"icon-all"})]),e._v(" "),e.hasType("light")?t("li",{class:"light"==e.golbal.typeCur?"liRoomTopC":e.golbal.type[1].isOn?"liRoomTopBlue":"",on:{click:function(i){return e.typeClick("light")}}},[t("i",{staticClass:"icon-ls_1_light"})]):e._e(),e._v(" "),e.hasType("curtain")?t("li",{class:"curtain"==e.golbal.typeCur?"liRoomTopC":e.golbal.type[2].isOn?"liRoomTopBlue":"",on:{click:function(i){return e.typeClick("curtain")}}},[t("i",{staticClass:"icon-ls_23_curtain"})]):e._e(),e._v(" "),e.hasType("ac")?t("li",{class:"ac"==e.golbal.typeCur?"liRoomTopC":e.golbal.type[3].isOn?"liRoomTopBlue":"",on:{click:function(i){return e.typeClick("ac")}}},[t("i",{staticClass:"icon-air-conditioner"})]):e._e(),e._v(" "),e.hasType("scene")?t("li",{class:"scene"==e.golbal.typeCur?"liRoomTopC":e.golbal.type[4].isOn?"liRoomTopBlue":"",on:{click:function(i){return e.typeClick("scene")}}},[t("i",{staticClass:"icon-ls_26_go_off_work"})]):e._e()])]),e._v(" "),t("div",{staticClass:"divRoom",style:"height:"+e.heightRoom+"px"},[t("div",{staticClass:"divView"},[t("div",{class:"btnList"+(e.golbal.isGallery?"":" btnViewC"),on:{click:function(i){return e.setView(!1)}}},[t("i",{staticClass:"icon-viewlist"})]),e._v(" "),t("div",{class:"btnGallery"+(e.golbal.isGallery?" btnViewC":""),on:{click:function(i){return e.setView(!0)}}},[t("i",{staticClass:"icon-viewgallery"})])]),e._v(" "),t("div",{class:"divRoomContent"+(e.golbal.isGallery?" divRoomGallery":" divRoomList"),style:"height:"+(e.heightRoom-14)+"px"},[e._l(e.golbal.roomCur.devices,function(i){return["light"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur?e._e():t("DeviceLight",{key:i.id,attrs:{device:i}}),e._v(" "),"curtain"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur?e._e():t("DeviceCurtain",{key:i.id,attrs:{device:i}}),e._v(" "),"dimmer"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur&&"light"!=e.golbal.typeCur?e._e():t("DeviceDimmer",{key:i.id,attrs:{device:i,touchAction:e.touchAction}}),e._v(" "),"ac"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur?e._e():t("DeviceAC",{key:i.id,attrs:{device:i}}),e._v(" "),"scene"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur?e._e():t("DeviceScene",{key:i.id,attrs:{device:i}}),e._v(" "),"heating"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur&&"ac"!=e.golbal.typeCur?e._e():t("DeviceHeating",{key:i.id,attrs:{device:i}}),e._v(" "),"fan"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur&&"ac"!=e.golbal.typeCur?e._e():t("DeviceFan",{key:i.id,attrs:{device:i}})]})],2)])])],1)},staticRenderFns:[]},te=t("VU/8")(ee,ie,!1,null,null,null).exports,ae=t("mvHQ"),se=t.n(ae),oe={data:function(){return{drawerBlock:!1,heightDrawerBlock:window.innerHeight-159,heightDrawerGateway:window.innerHeight-159,drawerTheme:!1,drawerTest:!1,widthDrawerTheme:window.innerWidth,tabsTest:"tab1",showDebug:!1,formTest:{server:""}}},props:["golbal","logList"],methods:{drawerBlockClick:function(){this.golbal.drawerBlock=!0},drawerGatewayClick:function(){this.golbal.drawerGateway=!0},drawerThemeClick:function(){this.golbal.drawerTheme=!0},drawerAboutClick:function(){this.golbal.drawerAbout=!0},drawerTestClick:function(){this.golbal.drawerTest=!0},getData:function(e){var i=this;h.a.post(e).then(function(e){try{console.log(e.data.project),window.localStorage.setItem("myProject",se()(e.data.project)),i.golbal.myProject=e.data.project;for(var t=0;t<i.golbal.myProject.blocks.length;t++){var a=i.golbal.myProject.blocks[t];a.active=!1;for(var s=0;s<a.floors.length;s++){var o=a.floors[s];o.active=!1;for(var n=0;n<o.rooms.length;n++){o.rooms[n].active=!1}}}i.golbal.blockCur=i.golbal.myProject.blocks[0],i.golbal.blockCur.active=!0,i.golbal.floorCur=i.golbal.blockCur.floors[0],i.golbal.floorCur.active=!0,i.golbal.roomCur=i.golbal.floorCur.rooms[0],i.golbal.roomCur.active=!0;var c=[];for(t=0;t<i.golbal.myProject.blocks.length;t++)for(s=0;s<i.golbal.myProject.blocks[t].floors.length;s++)for(n=0;n<i.golbal.myProject.blocks[t].floors[s].rooms.length;n++)for(var l=0;l<i.golbal.myProject.blocks[t].floors[s].rooms[n].devices.length;l++)c.push({device:i.golbal.myProject.blocks[t].floors[s].rooms[n].devices[l],busId:i.golbal.myProject.blocks[t].floors[s].rooms[n].busId});C.a.devicesAll=c,C.a.MyProject=i.golbal.myProject,C.a.golbal=i.golbal,C.a.getTypeStatus();for(t=0;t<i.golbal.myProject.buses.length;t++){var r=i.golbal.myProject.buses[t];Object(y.b)(k.a.receiveData,r.ws_url)}alert("获取成功")}catch(e){i.onLog(e),alert("获取失败")}}).catch(function(e){console.log(e),i.onLog(e),alert("获取失败")})},scanQRCode:function(){var e=this;console.log("插件对象: "+cordova.plugins),console.log("二维码插件: "+cordova.plugins.barcodeScanner),cordova.plugins.barcodeScanner.scan(function(i){if(i.cancelled)alert("操作取消");else{var t=i.text.replace("linkcontrol","http");console.log(t),e.getData(t)}},function(e){alert(e)})},submitTest:function(){this.golbal.testServer=this.formTest.server}},mounted:function(){this.golbal.showButtonFloor=!1,this.golbal.menuCur="user",this.formTest.server=this.golbal.testServer}},ne={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"main"},[e._m(0),e._v(" "),t("div",{staticClass:"divUserContent"},[t("span",{staticClass:"title"},[e._v("管理设置")]),e._v(" "),t("div",{staticClass:"content"},[t("ul",[t("li",{on:{click:function(i){return e.scanQRCode()}}},[t("i",{staticClass:"icon-scanning"}),t("span",[e._v("扫一扫获取配置")]),e._m(1)]),e._v(" "),t("li",{on:{click:function(i){return e.drawerBlockClick()}}},[t("i",{staticClass:"icon-office"}),t("span",[e._v("楼栋管理")]),e._m(2)]),e._v(" "),t("li",{on:{click:function(i){return e.drawerThemeClick()}}},[t("i",{staticClass:"icon-pic"}),t("span",[e._v("主题样式")]),e._m(3)]),e._v(" "),e.golbal.showDebug?t("li",{on:{click:function(i){return e.drawerTestClick()}}},[t("i",{staticClass:"icon-wrench"}),t("span",[e._v("调试")]),e._m(4)]):e._e(),e._v(" "),t("li",{on:{touchend:function(i){return e.drawerGatewayClick()}}},[t("i",{staticClass:"icon-duoyuyan"}),t("span",[e._v("网关")]),e._m(5)]),e._v(" "),t("li",{on:{click:function(i){return e.drawerAboutClick()}}},[t("i",{staticClass:"icon-home"}),t("span",[e._v("关于")]),e._m(6)])])])])])},staticRenderFns:[function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"divUserTop"},[i("div",{staticClass:"divUserFace"},[i("img",{attrs:{src:"static/images/face_man.jpg"}})]),this._v(" "),i("div",{staticClass:"divUserInfo"},[i("span",{staticClass:"spanUserInfo1"},[this._v("LinkScene")]),this._v(" "),i("span",{staticClass:"spanUserInfo2"},[this._v("用户")])])])},function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"divIcon"},[i("i",{staticClass:"icon-arrow1_right"})])},function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"divIcon"},[i("i",{staticClass:"icon-arrow1_right"})])},function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"divIcon"},[i("i",{staticClass:"icon-arrow1_right"})])},function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"divIcon"},[i("i",{staticClass:"icon-arrow1_right"})])},function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"divIcon"},[i("i",{staticClass:"icon-arrow1_right"})])},function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"divIcon"},[i("i",{staticClass:"icon-arrow1_right"})])}]},ce=t("VU/8")(oe,ne,!1,null,null,null).exports,le={data:function(){return{version:"v1.0.51",aboutLogoClickCount:0}},props:["golbal"],methods:{aboutLogoClick:function(){0==this.aboutLogoClickCount&&setTimeout(function(){this.aboutLogoClickCount=0}),this.aboutLogoClickCount+=1,10==this.aboutLogoClickCount&&(this.golbal.showDebug=!0)}}},re={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"main"},[t("div",{staticClass:"divAboutLogo",staticStyle:{"margin-top":"100px"},on:{click:function(i){return e.aboutLogoClick()}}},[t("img",{attrs:{src:"static/images/about_logo.png"}})]),e._v(" "),e._m(0),e._v(" "),t("hr",{staticClass:"hrAbout"}),e._v(" "),t("div",{staticClass:"divAboutVersion"},[t("span",{staticStyle:{color:"#bdbdbd"}},[e._v(e._s(e.version))])])])},staticRenderFns:[function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"divAboutAppname"},[i("span",{staticStyle:{color:"#bdbdbd"}},[this._v("智慧云联")])])}]};var ue=t("VU/8")(le,re,!1,function(e){t("BfqG")},"data-v-6ba26f7d",null).exports;a.default.use(O.a,{name:"v-touch"});var ve={data:function(){return{heightMessage:window.innerHeight-102}},props:["golbal"],methods:{messagePress:function(e){for(var i=0;i<this.golbal.messages.length;i++)this.golbal.messages[i].showDelete=!1;e.showDelete=!0},messageClick:function(e){e.showDelete&&(e.showDelete=!1)},deleteClick:function(e){for(var i=[],t=0;t<this.golbal.messages.length;t++)this.golbal.messages[t].id!=e.id&&i.push(this.golbal.messages[t]);this.golbal.messages=i}},mounted:function(){this.golbal.showButtonFloor=!1}},de={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"main"},[t("div",{staticClass:"divMessage",style:"height:"+e.heightMessage+"px"},e._l(e.golbal.messages,function(i){return t("div",{key:i.id,staticClass:"divMessageItem",on:{click:function(t){return e.messageClick(i)}}},[t("v-touch",{staticStyle:{"touch-action":"pan-y!important"},on:{pressup:function(t){return e.messagePress(i)}}},[t("div",{staticClass:"divTitle"},[t("i",{staticClass:"icon-mail1"}),t("span",[e._v(e._s(i.title))])]),e._v(" "),t("div",{staticClass:"divDate"},[e._v(e._s(i.date))]),e._v(" "),t("div",{staticClass:"divContent"},[e._v(e._s(i.content))]),e._v(" "),i.showDelete?t("div",{staticClass:"btnDelete",on:{click:function(t){return e.deleteClick(i)}}},[t("i",{staticClass:"icon-delete1"})]):e._e()])],1)}),0),e._v(" "),t("el-backtop",{staticStyle:{bottom:"80px",right:"10px"},attrs:{target:".divMessage"}})],1)},staticRenderFns:[]},he=t("VU/8")(ve,de,!1,null,null,null).exports;a.default.use(D.a);var Ce=new D.a({routes:[{path:"/",name:"room",component:te},{path:"/favorite",name:"favorite",component:Z},{path:"/room",name:"room",component:te},{path:"/user",name:"user",component:ce},{path:"/about",name:"about",component:ue},{path:"/message",name:"message",component:he}]}),me={createSocket:function(e,i,t,a){C.a.log("create socket address:"+e+",port:"+i),C.a.log(chrome),null!=chrome&&(C.a.log(chrome.sockets),null!=chrome.sockets&&(C.a.log(chrome.sockets.udp),null!=chrome.sockets.udp&&chrome.sockets.udp.create(function(s){console.log("listener:"+t),chrome.sockets.udp.onReceive.addListener(t),chrome.sockets.udp.bind(s.socketId,e,i,function(){chrome.sockets.udp.setBroadcast(s.socketId,!0,function(){console.log("setBroadcast success")}),null!=a&&a(s,chrome.sockets.udp)})})))},Buffer:{fromString:function(e){for(var i=new ArrayBuffer(2*e.length),t=new Uint16Array(i),a=0,s=e.length;a<s;a++)t[a]=e.charCodeAt(a);return i},fromHexString:function(e){for(var i=C.a.hexStringToBytes(e),t=new ArrayBuffer(i.length),a=new Uint8Array(t),s=0;s<i.length;s++)a[s]=i[s];return t},fromBytes:function(e){for(var i=new ArrayBuffer(e.length),t=new Uint8Array(i),a=0;a<e.length;a++)t[a]=e[a];return i},stringify:function(e){var i=new Uint16Array(e);return String.fromCharCode.apply(null,i)}}};window.UDP=me;var fe=function(e,i,t){this.address=e,this.port=i||0,this.udp=null,this.socket=null;var a=this;networkinterface?networkinterface.getWiFiIPAddress(function(e){console.log("IP: "+e.ip+" subnet:"+e.subnet),UDP.createSocket(e.ip,0,t,function(e,i){a.udp=i,a.socket=e,C.a.log("connected"),C.a.log(a.udp),C.a.log(a.socket)})},function(e){console.log(e)}):UDP.createSocket("192.168.0.119",0,t,function(e,i){a.udp=i,a.socket=e,C.a.log("connected"),C.a.log(a.udp),C.a.log(a.socket)})};fe.prototype.onReceive=function(e){console.log("ready to onReceive"),console.log("call back "+e),chrome.sockets.udp.onReceive.addListener(e)},fe.prototype.send=function(e,i){var t=UDP.Buffer.fromBytes(e);C.a.log("udp:"+this.udp),C.a.log("socket:"+this.socket),null!=this.udp&&null!=this.socket&&this.udp.send(this.socket.socketId,t,this.address,this.port,function(e){i(e)}),C.a.log("client ready to send")},window.UDP.Client=fe;var _e=t("I0MY");a.default.use(_e,{name:"v-touch"}),a.default.use(o.a),a.default.config.productionTip=!1,new a.default({el:"#app",router:Ce,components:{App:T},template:"<App/>"})},NVJ6:function(e,i,t){"use strict";i.a={HEAD:[170,170],FUNCTION_CODE:{READ:0,WRITE:64,FEEDBACK:128,STATUS_BACK:192,QUERY_STATUS:1,CONTROL:2},DEVICE_TYPE_ENUM:{DEVICE_TYPE_MAIN_ALL:0,DEVICE_TYPE_MAIN:257,DEVICE_TYPE_GATEWAY:258,DEVICE_TYPE_BUS_SCREEN:259,DEVICE_TYPE_LOGIC:260,DEVICE_TYPE_AI_GENIC:261,DEVICE_TYPE_INFRARED:513,DEVICE_TYPE_LIGHT:769,DEVICE_TYPE_DIMMER:770,DEVICE_TYPE_CURTAIN:771,DEVICE_TYPE_SCENE:772,DEVICE_TYPE_LIGHT_SCENE:773,DEVICE_TYPE_DIMMER_SCENE:774,DEVICE_TYPE_CURTAIN_SCENE:775,DEVICE_TYPE_LIGHT_DIMMER_SCENE:776,DEVICE_TYPE_LIGHT_CURTAIN_SCENE:777,DEVICE_TYPE_DIMMER_CURTAIN_SCENE:778,DEVICE_TYPE_AC:1025}}},XF4N:function(e,i,t){"use strict";(function(e){i.b=p,i.a=y,i.d=function(i,t,a){var c=!1;null==t&&(n.a.log("socket is null"),c=!0);c||(null!==t&&3===t.readyState?(t.close(),t=p(o.a.receiveData,t.url),c=!0):1===t.readyState?t.send(i):0===t.readyState&&(setTimeout(function(){t.send(i)},3e3),c=!0));if(c&&null!=u){var l={action:"message",accessToken:null!=n.a.golbal?n.a.golbal.accessToken:"111222333",bus:e.from(a.addr,"hex").toString("base64"),data:e.from(i).toString("base64")};u.send(s()(l)),n.a.log(">>>>"+s()(l))}},i.c=function(){f=!0,_=!0,n.a.log("onResume Called")};var a=t("mvHQ"),s=t.n(a),o=t("uxah"),n=t("gQoh"),c=t("mtWM"),l=(t.n(c),"ws://192.168.0.119:8001"),r="wss://app.lk-control.com/wss/",u=null,v=null,d=[],h=0,C=!1,m=null,f=!1,_=!1,b=!1,g=!1;function p(i,t){if(y(),b)return null;if(d.length>0)for(var a=0;a<d.length;a++)if(d[a].url==t||d[a].url==t+"/"){if(3===d[a].readyState){d.splice(a,1);break}return d[a]}n.a.log("开始连接："+t);var s=null;return(s=t.indexOf("192.168.0.119:6432")>-1?new WebSocket(t,"echo-protocol"):new WebSocket(null==t?l:t)).onopen=k,s.onmessage=I,s.onerror=T,s.onclose=P,b=!0,d.push(s),window.addEventListener("onmessageWS",function(e){var t=e.detail.data.data,a=new FileReader;a.onload=function(){var e=new Uint8Array(this.result);null!=i&&i(e)},a.readAsArrayBuffer(t),!0,null!=m&&clearTimeout(m),m=setTimeout(function(){!1},3e3)},!1),C||(window.addEventListener("onmessageWSRemote",function(t){var a=e.from(t.detail.data.data,"base64");null!=i&&i(a)},!1),C=!0),s}function y(){g||null==u&&null!=n.a.golbal&&n.a.golbal.accessToken.length>0&&((u=new WebSocket(r,"echo-protocol")).onopen=E,u.onmessage=O,u.onerror=D,u.onclose=A,g=!0)}function k(e){h=0,n.a.log("连接成功："+e.currentTarget.url),b=!1;for(var i=n.a.golbal.myProject.buses,t=0;t<i.length;t++)i[t].ws_url==e.currentTarget.url&&(i.isOnline=!0);for(t=0;t<d.length;t++)d[t],v=setInterval(function(){},3e4);setTimeout(function(){n.a.sendQueryDeviceStatus()},3e3)}function E(i){console.log(n.a.MyProject.buses),n.a.log("远程连接成功"),g=!1,setTimeout(function(){for(var i={action:"app_ws_login",accessToken:null!=n.a.golbal?n.a.golbal.accessToken:"111222333",buses:[]},t=0;t<n.a.MyProject.buses.length;t++){var a=n.a.MyProject.buses[t],o=null!=a.addr?e.from(a.addr,"hex").toString("base64"):"";i.buses.push(o),o+","}u.send(s()(i)),n.a.log(">>>>"+s()(i)),setTimeout(function(){n.a.sendQueryDeviceStatus()},3e3),setTimeout(w,5e3)},3e3)}function w(){try{if(null!=u){for(var i={action:"app_ws_heart",accessToken:null!=n.a.golbal?n.a.golbal.accessToken:"111222333",buses:[]},t=0;t<n.a.MyProject.buses.length;t++){var a=n.a.MyProject.buses[t],o=null!=a.addr?e.from(a.addr,"hex").toString("base64"):"";i.buses.push(o),o+","}u.send(s()(i)),setTimeout(w,3e4)}}catch(e){n.a.log("远程心跳失败3:"+e.message)}}function T(e){if(n.a.log("连接失败："+e.currentTarget.url+",正在尝试重连"),clearInterval(v),d.indexOf(e.target)>=0&&d.splice(d.indexOf(e.target),1),(h+=1)>=10)return n.a.log("重连超出10次，重连结束"),void(h=0);for(var i=e.target.url,t=n.a.golbal.myProject.buses,a=0;a<t.length;a++)t[a].source_url==e.currentTarget.url&&t[a].ws_url!=e.currentTarget.url&&(i=t[a].ws_url);setTimeout(function(){p(o.a.receiveData,i)},5e3)}function D(e){console.log(e),n.a.log("远程连接错误,5秒后重连"),n.a.log(s()(e)),setTimeout(function(){u=null,y()},5e3)}function I(e){window.dispatchEvent(new CustomEvent("onmessageWS",{detail:{data:e}}))}function O(e){console.log(e),window.dispatchEvent(new CustomEvent("onmessageWSRemote",{detail:{data:e}}))}function P(e){b=!1;var i=5e3;f&&(i=100),f=!1,clearInterval(v),n.a.log("websocket已断开,类型："+e.type+","+i+"毫秒后重连"),setTimeout(function(){p(o.a.receiveData,e.currentTarget.url)},i)}function A(e){var i=5e3;_&&(i=100),_=!1,n.a.log("远程连接已断开,信息："+e.code+" "+e.reason+" "+e.wasClean+","+i+"毫秒后重连"),g=!1,setTimeout(function(){u=null,y()},i)}}).call(i,t("EuP9").Buffer)},gQoh:function(e,i,t){"use strict";(function(e){var a,s=t("bOdI"),o=t.n(s),n=t("mvHQ"),c=t.n(n),l=t("22e4");function r(){return(65536*(1+Math.random())|0).toString(16).substring(1)}i.a=(a={devicesAll:null,MyProject:null,golbal:null,root:null,bytes2hex:function(i){for(var t="",a=0;a<i.length;a++)t=t+e.from([i[a]]).toString("hex")+" ";return t},getVORoomByDeviceId:function(e){var i=this.MyProject;if(null==i)return console.log("project is null"),null;for(var t=0;t<i.blocks.length;t++)for(var a=i.blocks[t],s=0;s<a.floors.length;s++)for(var o=a.floors[s],n=0;n<o.rooms.length;n++)for(var c=o.rooms[n],l=0;l<c.devices.length;l++){if(c.devices[l].id==e)return c}},getVOBus:function(e){var i=this.MyProject;if(null==i)return console.log("project is null"),null;var t=this.getVORoomByDeviceId(e);if(null==t)return null;for(var a=null,s=0;s<i.buses.length;s++)if((a=i.buses[s]).id==t.busId)return a;return null},getTypeStatus:function(){for(var e=1;e<=4;e++)this.golbal.type[e].isOn=!1;for(e=0;e<this.golbal.roomCur.devices.length;e++){var i=this.golbal.roomCur.devices[e];switch(i.type){case"light":i.isOn&&(this.golbal.type[1].isOn=!0);break;case"dimmer":i.value>0&&(this.golbal.type[1].isOn=!0);break;case"curtain":100==i.value&&(this.golbal.type[2].isOn=!0);break;case"ac":case"heating":case"fan":i.isOn&&(this.golbal.type[3].isOn=!0);break;case"scene":i.isOn&&(this.golbal.type[4].isOn=!0)}}for(e=0;e<this.golbal.blockCur.floors.length;e++)this.golbal.blockCur.floors[e].isOn=!1;for(e=0;e<this.golbal.blockCur.floors.length;e++)for(var t=this.golbal.blockCur.floors[e],a=0;a<t.rooms.length;a++){var s=t.rooms[a];s.isOn=!1;for(var o=0;o<s.devices.length;o++){var n=s.devices[o];switch(n.type){case"dimmer":n.value>0&&(s.isOn=!0,t.isOn=!0);break;case"curtain":100==n.value&&(s.isOn=!0,t.isOn=!0);break;default:n.isOn&&(s.isOn=!0,t.isOn=!0)}}}},sendQueryDeviceStatus:function(){for(var e=[],i=0;i<this.golbal.roomCur.devices.length;i++){for(var t=!0,a=this.golbal.roomCur.devices[i],s=0;s<e.length;s++)parseInt(a.areacode)==e[s].areacode&&parseInt(a.addr)==e[s].addr&&(t=!1);t&&(setTimeout(this.sendQueryDeviceStatusOne,100*i,a),e.push({areacode:parseInt(a.areacode),addr:parseInt(a.addr)}))}},sendQueryDeviceStatusOne:function(e){l.a.queryDeviceStatus(e)},log:function(e){if(console.log(e),null!=this.root){var i=new Date;this.root.$data.logList.logs.unshift(i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+" "+e)}}},o()(a,"bytes2hex",function(i){for(var t="",a=0;a<i.length;a++)t=t+e.from([i[a]]).toString("hex")+" ";return t}),o()(a,"bytes2hexNoSpace",function(i){for(var t="",a=0;a<i.length;a++)t=t+e.from([i[a]]).toString("hex")+"";return t}),o()(a,"hexStringToBytes",function(i){if(null==i||0==i.length)return null;var t=[];if((i=i.toUpperCase()).indexOf(" ")>=0)t=i.trim().split(" ");else{for(var a=i.length/2,s=0;s<a;s++)t.push(0);for(s=0;s<t.length;s++)t[s]=i.substring(2*s,2*s+2)}var o=t.length,n=[];for(s=0;s<o;s++)n.push(parseInt(t[s],16));return e.from(n)}),o()(a,"uuid",function(){return r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r()}),o()(a,"saveProject",function(){window.localStorage.setItem("myProject",c()(this.MyProject)),console.log("saved")}),o()(a,"saveSetting",function(){var e=window.localStorage;e.setItem("themeCur",this.golbal.themeCur),e.setItem("isGallery",this.golbal.isGallery?1:0)}),a)}).call(i,t("EuP9").Buffer)},uxah:function(e,i,t){"use strict";var a=t("NVJ6"),s=t("gQoh");i.a={receiveData:function(e){if(console.log("<== "+s.a.bytes2hex(e)),s.a.log("<== "+s.a.bytes2hex(e)),e.length==e[2]){for(var i=(e[5]<<8)+e[6],t=0;t<s.a.devicesAll.length;t++){var o=s.a.devicesAll[t].device;if(e[3]==o.areacode&&e[4]==o.addr)if("light"==o.type){if(135!=e[7]&&199!=e[7]&&198!=e[7])if(i==a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_LIGHT)if(129==e[7]||193==e[7]){var n=(e[11]<<8)+e[10];o.isOn=(n&Math.pow(2,o.channel-1))>0}else o.channel==e[8]&&(o.isOn=100==e[9]);else if(i==a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_LIGHT_SCENE)if(129==e[7]||193==e[7]){n=(e[11]<<8)+e[10];o.isOn=(n&Math.pow(2,o.channel-1))>0}else o.channel==e[8]&&(o.isOn=100==e[9])}else if("scene"==o.type)i==a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_SCENE?130!=e[7]&&194!=e[7]&&198!=e[7]&&(129==e[7]||193==e[7]?o.isOn=(e[9]&Math.pow(2,o.channel-1))>0:o.channel==e[8]&&(o.isOn=100==e[9])):i!=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_LIGHT_SCENE&&i!=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_CURTAIN_SCENE&&i!=a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_DIMMER_SCENE||130!=e[7]&&194!=e[7]&&198!=e[7]&&(129==e[7]||193==e[7]?o.isOn=(e[9]&Math.pow(2,o.channel-1))>0:o.channel==e[8]&&(o.isOn=100==e[9]));else if("dimmer"==o.type)135!=e[7]&&199!=e[7]&&198!=e[7]&&(i==a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_DIMMER?129==e[7]||193==e[7]?1==o.channel?o.value=e[10]:o.value=e[11]:o.channel==e[8]&&(o.value=e[9]):i==a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_DIMMER_SCENE&&(129==e[7]||193==e[7]?1==o.channel?o.value=e[10]:o.value=e[11]:o.channel==e[8]&&(o.value=e[9])));else if("curtain"==o.type)135!=e[7]&&199!=e[7]&&198!=e[7]&&(i==a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_CURTAIN?129==e[7]||193==e[7]?1==o.channel?o.value=e[10]:o.value=e[11]:o.channel==e[8]&&(o.value=e[9]):i==a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_CURTAIN_SCENE&&(129==e[7]||193==e[7]?1==o.channel?o.value=e[10]:o.value=e[11]:o.channel==e[8]&&(o.value=e[9])));else if("ac"==o.type&&i==a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_AC){o.value=e[9];n=e[8];switch(o.isOn=n>>7==1,o.lock=n>>5&3,o.fan=n>>3&3,3&n){case 1:o.mode="制冷";break;case 2:o.mode="制热";break;case 3:o.mode="送风";break;default:o.mode="恒温"}o.summary=o.mode+" "+o.value+"℃"}else if("heating"==o.type&&i==a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_AC){o.value=e[11];n=e[10];o.isOn=n>>7==1,o.lock=n>>5&3}else if("fan"==o.type&&i==a.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_AC){o.value=e[13];n=e[12];o.isOn=n>>7==1,o.lock=n>>5&3,o.fan=n>>3&3}}s.a.getTypeStatus()}}}}},["NHnr"]);
//# sourceMappingURL=app.e0d872401ecf597dc75b.js.map