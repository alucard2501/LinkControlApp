webpackJsonp([1],{"22e4":function(t,i,e){"use strict";(function(t){var o=e("NVJ6"),a=e("gQoh"),s=e("uxah"),l=e("XF4N");i.a={udp_client:null,ip:"",port:0,resetNetworkInfo:function(t,i){this.ip=t,this.port=i,console.log("切换到"+t+":"+i),this.udp_client=new UDP.Client(t,i)},buildCommand:function(t,i,e,a,s){var l=9;null!=t&&(l+=t.length);var n=[];if(n.push(o.a.HEAD[0]),n.push(o.a.HEAD[1]),n.push(l),n.push(i),n.push(e),n.push(a>>8),n.push(255&a),n.push(s),null!=t)for(var r=0;r<t.length;r++)n.push(t[r]);var c=0;for(r=0;r<n.length;r++)c+=n[r];return n.push(255&c),n},sendAction:function(i){var e=a.a.getVOBus(i.id);if(null!=e){var n=o.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_MAIN_ALL,r=[];switch(i.type){case"light":n=o.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_LIGHT;var c=0;i.isOn&&(c=100),r.push(i.channel),r.push(c);break;case"dimmer":n=o.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_DIMMER,r.push(i.channel),r.push(i.value);break;case"curtain":n=o.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_CURTAIN,r.push(i.channel),r.push(i.value);break;case"ac":n=o.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_AC;var v=0;i.isOn&&(v+=128),v+=i.lock<<5,v+=i.fan<<3,"制冷"==i.mode?v+=1:"制冷"==i.mode?v+=2:"送风"==i.mode&&(v+=3),r.push(v),r.push(i.value),r.push(128),r.push(28),r.push(128),r.push(25),r.push(0)}var u=this.buildCommand(r,i.areacode,i.addr,n,o.a.FUNCTION_CODE.WRITE+o.a.FUNCTION_CODE.CONTROL);console.log("==> "+a.a.bytes2hex(u));var d=Object(l.a)(s.a.receiveData,e.ws_url);Object(l.b)(t.from(u),d)}else console.log("bus is null")}}}).call(i,e("EuP9").Buffer)},"8pZa":function(t,i){},"9ZBj":function(t,i,e){t.exports=e.p+"static/img/face_man.bcb19cf.jpg"},NHnr:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=e("7+uW"),a=e("zL8q"),s=e.n(a),l=(e("ih0c"),e("Xxa5")),n=e.n(l),r=e("exGp"),c=e.n(r),v=(e("8pZa"),e("VaBq"),{render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"header"},[e("div",{staticClass:"divHeaderLeft"},[e("div",{staticClass:"btnHeader",on:{click:function(i){return t.messageClick()}}},[e("i",{staticClass:"icon-mail1"})])]),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"divHeaderRight"},[t.golbal.showButtonFloor?e("el-popover",{attrs:{placement:"bottom",width:"100",trigger:"click","popper-class":"popoverFloor"},model:{value:t.visibleFloor,callback:function(i){t.visibleFloor=i},expression:"visibleFloor"}},[e("div",[e("span",{staticClass:"spanTitle"},[t._v("请选择楼层")]),t._v(" "),e("ul",t._l(t.golbal.blockCur.floors,function(i){return e("li",{key:i.id,on:{click:function(e){return t.floorClick(i)}}},[e("i",{staticClass:"icon-office"}),e("span",[t._v(t._s(i.name))]),t._v(" "),i.active?e("div",{staticClass:"checked"},[e("i",{staticClass:"icon-yuanxingxuanzhongfill"})]):t._e()])}),0)]),t._v(" "),e("el-button",{staticClass:"btnHeaderFloor",attrs:{slot:"reference"},slot:"reference"},[e("span",[t._v(t._s(t.golbal.floorCur.name))]),t._v(" "),e("i",{staticClass:"icon-caret-down"})])],1):t._e()],1)])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"divHeaderMain"},[i("img",{staticClass:"imgHeaderLogo",attrs:{src:e("iQH9")}})])}]}),u=e("VU/8")({data:function(){return{visibleFloor:!1}},props:["golbal"],methods:{floorClick:function(t){for(var i=0;i<this.golbal.blockCur.floors.length;i++)(e=this.golbal.blockCur.floors[i]).active=!1;for(t.active=!0,this.golbal.floorCur=t,this.visibleFloor=!1,this.golbal.roomCur=this.golbal.floorCur.rooms[0],i=0;i<this.golbal.floorCur.rooms.length;i++){var e;(e=this.golbal.floorCur.rooms[i]).active&&(this.golbal.roomCur=e)}},messageClick:function(){"/message"!=this.$route.path&&this.$router.push({path:"/message"})}}},v,!1,null,null,null).exports,d={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"footer"},[e("ul",[e("li",[e("router-link",{class:{routerC:"favorite"==t.golbal.menuCur},attrs:{to:"/favorite","active-class":"routerC",tag:"div"}},[e("i",{staticClass:"icon-favoritesfilling"}),t._v(" "),e("span",[t._v("习惯")])])],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"/room","active-class":"routerC",tag:"div"}},[e("i",{staticClass:"icon-home3"}),t._v(" "),e("span",[t._v("房间")])])],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"/user","active-class":"routerC",tag:"div"}},[e("i",{staticClass:"icon-accountfilling"}),t._v(" "),e("span",[t._v("我")])])],1)])])},staticRenderFns:[]},C=e("VU/8")({props:["golbal"]},d,!1,null,null,null).exports,f=e("gQoh"),p=(e("XF4N"),e("uxah"),{name:"App",components:{FrameHeader:u,FrameFooter:C},data:function(){return{golbal:{menuCur:"",typeCur:"all",showButtonFloor:!1,blockCur:{},floorCur:{},roomCur:{},myProject:{id:"b0b502b7-c000-4000-a000-0547116af000",name:"万科水晶城",active:!0,blocks:[{id:"b0b502b7-c001-4000-a000-0547116af000",name:"1座",floors:[{id:"b0b502b7-c001-4001-a000-0547116af000",name:"楼层一",active:!0,rooms:[{id:"b0b502b7-c001-4001-a001-0547116af000",name:"主卧",busId:"7e0378ca-c813-4056-a001-485e2970c001",active:!0,devices:[{id:"b0b502b7-c001-4001-a001-0547116af001",type:"light",areacode:1,addr:1,channel:1,name:"吊灯",summary:"关闭",icon:"icon-ls_1_light",isFavorite:!1,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af002",type:"light",areacode:1,addr:1,channel:2,name:"壁灯",summary:"开启",icon:"icon-ls_1_light",isFavorite:!1,isOn:!0},{id:"b0b502b7-c001-4001-a001-0547116af003",type:"curtain",areacode:1,addr:1,channel:3,name:"窗帘",summary:"50%",icon:"icon-ls_23_curtain",isFavorite:!1,value:10},{id:"b0b502b7-c001-4001-a001-0547116af004",type:"dimmer",areacode:1,addr:1,channel:2,name:"床头灯",summary:"40%",icon:"icon-ls_4_dimmer",isFavorite:!1,value:40},{id:"b0b502b7-c001-4001-a001-0547116af005",type:"ac",name:"空调",summary:"制冷 26℃",icon:"icon-ls_7_ac",isFavorite:!0,isOn:!1,value:26,mode:"制冷",fan:3,lock:0}]}]}]}]},testServer:"ws://192.168.0.119:8001",messages:[{id:1,title:"系统通知",date:"2020-07-01 07:22:14",content:"停服维护已经结束，停服期间给您带来的不便，我们深表歉意。"},{id:2,title:"版本更新公告",date:"2020-06-25 17:43:53",content:"我们预计于北京时间：2020-06-26 02:00 - 04:00进行为期两个小时的停服更新维护。"},{id:3,title:"升级提醒",date:"2020-06-01 15:14:32",content:"为了使用户获得更好的体验，我们刚刚完成了一次热更，请重新启动程序以使更新生效。"},{id:4,title:"系统通知",date:"2020-05-28 12:53:43",content:"停服维护已经结束，停服期间给您带来的不便，我们深表歉意。"}]}}},methods:{getData:function(){var t=this;return c()(n.a.mark(function i(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},i,t)}))()}},beforeMount:function(){var t=window.localStorage;null!=t.getItem("myProject")&&(this.golbal.myProject=JSON.parse(t.getItem("myProject"))),console.log(this.golbal.myProject),this.golbal.blockCur=this.golbal.myProject.blocks[0];for(var i=0;i<this.golbal.myProject.blocks.length;i++){(e=this.golbal.myProject.blocks[i]).active&&(this.golbal.blockCur=e)}this.golbal.floorCur=this.golbal.blockCur.floors[0];for(i=0;i<this.golbal.blockCur.floors.length;i++){(e=this.golbal.blockCur.floors[i]).active&&(this.golbal.floorCur=e)}this.golbal.roomCur=this.golbal.floorCur.rooms[0];for(i=0;i<this.golbal.floorCur.rooms.length;i++){var e;(e=this.golbal.floorCur.rooms[i]).active&&(this.golbal.roomCur=e)}var o=[];for(i=0;i<this.golbal.myProject.blocks.length;i++)for(var a=0;a<this.golbal.myProject.blocks[i].floors.length;a++)for(var s=0;s<this.golbal.myProject.blocks[i].floors[a].rooms.length;s++)for(var l=0;l<this.golbal.myProject.blocks[i].floors[a].rooms[s].devices.length;l++)o.push({device:this.golbal.myProject.blocks[i].floors[a].rooms[s].devices[l],busId:this.golbal.myProject.blocks[i].floors[a].rooms[s].busId});f.a.golbal=o,console.log(this.golbal),f.a.MyProject=this.golbal.myProject}}),m={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{attrs:{id:"page"}},[i("FrameHeader",{attrs:{golbal:this.golbal}}),this._v(" "),i("router-view",{attrs:{golbal:this.golbal}}),this._v(" "),i("FrameFooter",{attrs:{golbal:this.golbal}})],1)},staticRenderFns:[]},h=e("VU/8")(p,m,!1,null,null,null).exports,g=e("/ocq"),b=e("I0MY"),_=e.n(b),k=e("22e4"),y={data:function(){return{}},props:["device"],methods:{favoriteClick:function(t){t.isFavorite=!t.isFavorite},switchClick:function(t){t.isOn=!t.isOn,k.a.sendAction(t)}}},E={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"divDevice",on:{click:function(i){return t.switchClick(t.device)}}},[e("div",{staticClass:"divFavorite",on:{click:function(i){return i.stopPropagation(),t.favoriteClick(t.device)}}},[e("i",{staticClass:"icon-favoritesfilling",class:{iconC:t.device.isFavorite}})]),t._v(" "),e("div",{staticClass:"divIcon"},[e("i",{class:[t.device.icon,{iconC:t.device.isOn}]})]),t._v(" "),e("div",{staticClass:"divInfo"},[e("span",{staticClass:"spanDeviceName"},[t._v(t._s(t.device.name))]),t._v(" "),e("span",{staticClass:"spanDeviceSummary"},[t._v(t._s(t.device.summary))])]),t._v(" "),e("div",{staticClass:"divControl"},[e("div",{staticClass:"btnSwitch"},[e("i",{staticClass:"icon-ls_9_on",class:{iconC:t.device.isOn}})])])])},staticRenderFns:[]},w=e("VU/8")(y,E,!1,null,null,null).exports,D={data:function(){return{}},props:["device"],methods:{favoriteClick:function(t){t.isFavorite=!t.isFavorite},curtainClick:function(t,i){t.value=i,k.a.sendAction(this.device)}}},T={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"divDevice"},[e("div",{staticClass:"divFavorite",on:{click:function(i){return t.favoriteClick(t.device)}}},[e("i",{staticClass:"icon-favoritesfilling",class:{iconC:t.device.isFavorite}})]),t._v(" "),e("div",{staticClass:"divIcon"},[e("i",{class:[t.device.icon,{iconC:t.device.isOn}]})]),t._v(" "),e("div",{staticClass:"divInfo"},[e("span",{staticClass:"spanDeviceName"},[t._v(t._s(t.device.name))]),t._v(" "),e("span",{staticClass:"spanDeviceSummary"},[t._v(t._s(0==t.device.value?"关闭":100==t.device.value?"开启":"停止"))])]),t._v(" "),e("div",{staticClass:"divControl"},[e("div",{staticClass:"btnCurtain btnCurtain1",on:{click:function(i){return t.curtainClick(t.device,0)}}},[e("i",{staticClass:"icon-arrow-right"}),e("i",{staticClass:"icon-arrow-left"})]),t._v(" "),e("div",{staticClass:"btnCurtain btnCurtain2",on:{click:function(i){return t.curtainClick(t.device,101)}}},[e("i",{staticClass:"icon-pause2"})]),t._v(" "),e("div",{staticClass:"btnCurtain btnCurtain3",on:{click:function(i){return t.curtainClick(t.device,100)}}},[e("i",{staticClass:"icon-arrow-left"}),e("i",{staticClass:"icon-arrow-right"})])])])},staticRenderFns:[]},P=e("VU/8")(D,T,!1,null,null,null).exports,I={props:["device"],methods:{favoriteClick:function(t){t.isFavorite=!t.isFavorite},dimmerChange:function(){k.a.sendAction(this.device)}},mounted:function(){this.dimmerValue=this.device.value}},F={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"divDevice"},[e("div",{staticClass:"divFavorite",on:{click:function(i){return t.favoriteClick(t.device)}}},[e("i",{staticClass:"icon-favoritesfilling",class:{iconC:t.device.isFavorite}})]),t._v(" "),e("div",{staticClass:"divIcon"},[e("i",{class:[t.device.icon,{iconC:t.device.value>0}]})]),t._v(" "),e("div",{staticClass:"divInfo"},[e("span",{staticClass:"spanDeviceName"},[t._v(t._s(t.device.name))]),t._v(" "),e("span",{staticClass:"spanDeviceSummary"},[t._v(t._s(t.device.value)+"%")])]),t._v(" "),e("div",{staticClass:"divControl"},[e("el-slider",{attrs:{"show-tooltip":!1},on:{change:t.dimmerChange},model:{value:t.device.value,callback:function(i){t.$set(t.device,"value",i)},expression:"device.value"}})],1)])},staticRenderFns:[]},A=e("VU/8")(I,F,!1,null,null,null).exports,R={data:function(){return{drawer:!1,direction:"btt",heightDrawer:window.innerHeight-95,visibleFan:!1,visibleLock:!1}},props:["device"],methods:{favoriteClick:function(t){t.isFavorite=!t.isFavorite},switchClick:function(t){t.isOn=!t.isOn,k.a.sendAction(this.device)},addClick:function(t){t.value<36&&t.isOn&&(t.value=t.value+1,t.summary=t.mode+" "+t.value+"℃",k.a.sendAction(this.device))},minusClick:function(t){t.value>17&&t.isOn&&(t.value=t.value-1,t.summary=t.mode+" "+t.value+"℃",k.a.sendAction(this.device))},drawerClick:function(t){this.drawer=!0},modeClick:function(t,i){t.isOn&&(t.mode=i,t.summary=t.mode+" "+t.value+"℃",k.a.sendAction(this.device))},fanClick:function(t,i){t.fan=i,this.visibleFan=!1,k.a.sendAction(this.device)},lockClick:function(t,i){t.lock=i,this.visibleLock=!1,k.a.sendAction(this.device)}}},V={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"divDevice",on:{click:function(i){return t.drawerClick(t.device)}}},[e("div",{staticClass:"divFavorite",on:{click:function(i){return i.stopPropagation(),t.favoriteClick(t.device)}}},[e("i",{staticClass:"icon-favoritesfilling",class:{iconC:t.device.isFavorite}})]),t._v(" "),e("div",{staticClass:"divIcon"},[e("i",{class:t.device.icon})]),t._v(" "),e("div",{staticClass:"divInfo"},[e("span",{staticClass:"spanDeviceName"},[t._v(t._s(t.device.name))]),t._v(" "),e("span",{staticClass:"spanDeviceSummary"},[t._v(t._s(t.device.summary))])]),t._v(" "),e("div",{staticClass:"divControl"},[e("div",{staticClass:"btnAC btnAC1",on:{click:function(i){return i.stopPropagation(),t.minusClick(t.device)}}},[e("i",{staticClass:"icon-move1"})]),t._v(" "),e("div",{staticClass:"btnAC btnAC2",on:{click:function(i){return i.stopPropagation(),t.switchClick(t.device)}}},[e("i",{staticClass:"icon-ls_9_on",class:{iconC:t.device.isOn}})]),t._v(" "),e("div",{staticClass:"btnAC btnAC3",on:{click:function(i){return i.stopPropagation(),t.addClick(t.device)}}},[e("i",{staticClass:"icon-add1"})])]),t._v(" "),e("el-drawer",{attrs:{visible:t.drawer,direction:t.direction,"append-to-body":!0,"custom-class":"drawerAC",size:t.heightDrawer+"px"},on:{"update:visible":function(i){t.drawer=i}}},[e("div",{staticClass:"divDrawerACTitle"},[e("span",{staticClass:"spanDrawerAC1"},[t._v("温控器")]),t._v(" "),e("span",{staticClass:"spanDrawerAC2"},[t._v("当前温度"+t._s(t.device.value)+"℃")])]),t._v(" "),e("div",{staticClass:"divDrawerAC"},[e("div",{staticClass:"divDrawerACScreen"},[e("span",{staticClass:"spanDrawerAC3"},[t._v(t._s(t.device.mode))]),t._v(" "),e("div",{staticClass:"divDrawerACTemperature"},[e("div",{staticClass:"divDrawerACTemperature1",on:{click:function(i){return i.stopPropagation(),t.minusClick(t.device)}}},[e("i",{staticClass:"icon-move1"})]),t._v(" "),e("div",{staticClass:"divDrawerACTemperature2"},[t._v(t._s(t.device.value))]),t._v(" "),e("div",{staticClass:"divDrawerACTemperature3",on:{click:function(i){return i.stopPropagation(),t.addClick(t.device)}}},[e("i",{staticClass:"icon-add1"})])]),t._v(" "),e("span",{staticClass:"spanDrawerAC4"},[t._v("℃")])]),t._v(" "),e("div",{staticClass:"divDrawerACMode"},[e("div",{staticClass:"divDrawerACModeC"},[e("el-popover",{attrs:{placement:"top",width:"50",trigger:"click","popper-class":"popoverAC",disabled:!t.device.isOn},model:{value:t.visibleFan,callback:function(i){t.visibleFan=i},expression:"visibleFan"}},[e("div",[e("span",{staticClass:"spanTitle"},[t._v("请选择风速")]),t._v(" "),e("ul",[e("li",{on:{click:function(i){return i.stopPropagation(),t.fanClick(t.device,"0")}}},[e("i",{staticClass:"icon-abc"}),e("span",[t._v("自动")])]),t._v(" "),e("li",{on:{click:function(i){return i.stopPropagation(),t.fanClick(t.device,"1")}}},[e("i",{staticClass:"icon-propeller"}),e("span",[t._v("低速")])]),t._v(" "),e("li",{on:{click:function(i){return i.stopPropagation(),t.fanClick(t.device,"2")}}},[e("i",{staticClass:"icon-screw"}),e("span",[t._v("中速")])]),t._v(" "),e("li",{on:{click:function(i){return i.stopPropagation(),t.fanClick(t.device,"3")}}},[e("i",{staticClass:"icon-screw2"}),e("span",[t._v("高速")])])])]),t._v(" "),e("el-button",{staticClass:"btnDeviceAcFan",attrs:{slot:"reference"},slot:"reference"},[e("i",{class:0==t.device.fan?"icon-abc":1==t.device.fan?"icon-propeller":2==t.device.fan?"icon-screw":"icon-screw2"})])],1)],1),t._v(" "),e("div",{on:{click:function(i){return i.stopPropagation(),t.modeClick(t.device,"制热")}}},[e("i",{staticClass:"icon-sun",class:{iconC:"制热"==t.device.mode}})]),t._v(" "),e("div",{on:{click:function(i){return i.stopPropagation(),t.modeClick(t.device,"制冷")}}},[e("i",{staticClass:"icon-kongdiao",class:{iconC:"制冷"==t.device.mode}})]),t._v(" "),e("div",{on:{click:function(i){return i.stopPropagation(),t.modeClick(t.device,"送风")}}},[e("i",{staticClass:"icon-fan",class:{iconC:"送风"==t.device.mode}})]),t._v(" "),e("div",{staticClass:"divDrawerACModeC"},[e("el-popover",{attrs:{placement:"top",width:"50",trigger:"click","popper-class":"popoverAC",disabled:!t.device.isOn},model:{value:t.visibleLock,callback:function(i){t.visibleLock=i},expression:"visibleLock"}},[e("div",[e("span",{staticClass:"spanTitle"},[t._v("请选择")]),t._v(" "),e("ul",[e("li",{on:{click:function(i){return i.stopPropagation(),t.lockClick(t.device,"0")}}},[e("i",{staticClass:"icon-unlock"}),e("span",[t._v("解锁")])]),t._v(" "),e("li",{on:{click:function(i){return i.stopPropagation(),t.lockClick(t.device,"1")}}},[e("i",{staticClass:"icon-lock1"}),e("span",[t._v("锁定按键")])]),t._v(" "),e("li",{on:{click:function(i){return i.stopPropagation(),t.lockClick(t.device,"2")}}},[e("i",{staticClass:"icon-data"}),e("span",[t._v("锁定数据")])])])]),t._v(" "),e("el-button",{staticClass:"btnDeviceAcFan",attrs:{slot:"reference"},slot:"reference"},[e("i",{class:0==t.device.lock?"icon-unlock":1==t.device.lock?"icon-lock1":"icon-data"})])],1)],1)]),t._v(" "),e("div",{staticClass:"btnDrawerACSwitch",on:{click:function(i){return i.stopPropagation(),t.switchClick(t.device)}}},[e("i",{staticClass:"icon-ls_9_on",class:{iconC:t.device.isOn}})])])])],1)},staticRenderFns:[]},x=e("VU/8")(R,V,!1,null,null,null).exports;o.default.use(_.a,{name:"v-touch"});var S={components:{DeviceLight:w,DeviceCurtain:P,DeviceDimmer:A,DeviceAC:x},data:function(){return{heightRoom:window.innerHeight-195,isGallery:!0}},props:["golbal"],methods:{roomClick:function(t){for(var i=0;i<this.golbal.floorCur.rooms.length;i++){this.golbal.floorCur.rooms[i].active=!1}t.active=!0,this.golbal.roomCur=t},typeClick:function(t){this.golbal.typeCur=t},onSwipeLeft:function(){for(var t=0,i=0;i<this.golbal.floorCur.rooms.length;i++){if(this.golbal.floorCur.rooms[i]==this.golbal.roomCur){t=i;break}}t<this.golbal.floorCur.rooms.length-1&&(t+=1),this.roomClick(this.golbal.floorCur.rooms[t])},onSwipeRight:function(){for(var t=0,i=0;i<this.golbal.floorCur.rooms.length;i++){if(this.golbal.floorCur.rooms[i]==this.golbal.roomCur){t=i;break}}t>0&&(t-=1),this.roomClick(this.golbal.floorCur.rooms[t])}},mounted:function(){this.golbal.showButtonFloor=!0,this.golbal.menuCur="favorite"}},N={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"main"},[e("v-touch",{staticStyle:{"touch-action":"pan-y!important"},attrs:{tag:"div"},on:{swipeleft:t.onSwipeLeft,swiperight:t.onSwipeRight}},[e("div",{staticClass:"divRoomTop"},[e("ul",t._l(t.golbal.floorCur.rooms,function(i){return e("li",{key:i.id,class:{liRoomTopC:i.active},on:{click:function(e){return t.roomClick(i)}}},[t._v(t._s(i.name))])}),0)]),t._v(" "),e("div",{staticClass:"divRoomTop2"},[e("ul",[e("li",{class:{liRoomTopC:"all"==t.golbal.typeCur},on:{click:function(i){return t.typeClick("all")}}},[e("i",{staticClass:"icon-all"})]),t._v(" "),e("li",{class:{liRoomTopC:"light"==t.golbal.typeCur},on:{click:function(i){return t.typeClick("light")}}},[e("i",{staticClass:"icon-ls_1_light"})]),t._v(" "),e("li",{class:{liRoomTopC:"dimmer"==t.golbal.typeCur},on:{click:function(i){return t.typeClick("dimmer")}}},[e("i",{staticClass:"icon-ls_4_dimmer"})]),t._v(" "),e("li",{class:{liRoomTopC:"curtain"==t.golbal.typeCur},on:{click:function(i){return t.typeClick("curtain")}}},[e("i",{staticClass:"icon-ls_23_curtain"})]),t._v(" "),e("li",{class:{liRoomTopC:"ac"==t.golbal.typeCur},on:{click:function(i){return t.typeClick("ac")}}},[e("i",{staticClass:"icon-ls_7_ac"})])])]),t._v(" "),e("div",{staticClass:"divRoom",style:"height:"+t.heightRoom+"px"},[e("div",{staticClass:"divView"},[e("div",{class:"btnList"+(t.isGallery?"":" btnViewC"),on:{click:function(i){t.isGallery=!1}}},[e("i",{staticClass:"icon-viewlist"})]),t._v(" "),e("div",{class:"btnGallery"+(t.isGallery?" btnViewC":""),on:{click:function(i){t.isGallery=!0}}},[e("i",{staticClass:"icon-viewgallery"})])]),t._v(" "),e("div",{class:"divRoomContent"+(t.isGallery?" divRoomGallery":" divRoomList")},[t._l(t.golbal.roomCur.devices,function(i){return["light"!=i.type||i.type!=t.golbal.typeCur&&"all"!=t.golbal.typeCur||!i.isFavorite?t._e():e("DeviceLight",{key:i.id,attrs:{device:i}}),t._v(" "),"curtain"!=i.type||i.type!=t.golbal.typeCur&&"all"!=t.golbal.typeCur||!i.isFavorite?t._e():e("DeviceCurtain",{key:i.id,attrs:{device:i}}),t._v(" "),"dimmer"!=i.type||i.type!=t.golbal.typeCur&&"all"!=t.golbal.typeCur||!i.isFavorite?t._e():e("DeviceDimmer",{key:i.id,attrs:{device:i}}),t._v(" "),"ac"!=i.type||i.type!=t.golbal.typeCur&&"all"!=t.golbal.typeCur||!i.isFavorite?t._e():e("DeviceAC",{key:i.id,attrs:{device:i}})]})],2)])])],1)},staticRenderFns:[]},j=e("VU/8")(S,N,!1,null,null,null).exports;o.default.use(_.a,{name:"v-touch"});var O={components:{DeviceLight:w,DeviceCurtain:P,DeviceDimmer:A,DeviceAC:x},data:function(){return{heightRoom:window.innerHeight-195,isGallery:!0}},props:["golbal"],methods:{roomClick:function(t){for(var i=0;i<this.golbal.floorCur.rooms.length;i++){this.golbal.floorCur.rooms[i].active=!1}t.active=!0,this.golbal.roomCur=t},typeClick:function(t){this.golbal.typeCur=t},onSwipeLeft:function(){for(var t=0,i=0;i<this.golbal.floorCur.rooms.length;i++){if(this.golbal.floorCur.rooms[i]==this.golbal.roomCur){t=i;break}}t<this.golbal.floorCur.rooms.length-1&&(t+=1),this.roomClick(this.golbal.floorCur.rooms[t])},onSwipeRight:function(){for(var t=0,i=0;i<this.golbal.floorCur.rooms.length;i++){if(this.golbal.floorCur.rooms[i]==this.golbal.roomCur){t=i;break}}t>0&&(t-=1),this.roomClick(this.golbal.floorCur.rooms[t])}},mounted:function(){this.golbal.showButtonFloor=!0,this.golbal.menuCur="room"}},M={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"main"},[e("v-touch",{staticStyle:{"touch-action":"pan-y!important"},attrs:{tag:"div"},on:{swipeleft:t.onSwipeLeft,swiperight:t.onSwipeRight}},[e("div",{staticClass:"divRoomTop"},[e("ul",t._l(t.golbal.floorCur.rooms,function(i){return e("li",{key:i.id,class:{liRoomTopC:i.active},on:{click:function(e){return t.roomClick(i)}}},[t._v(t._s(i.name))])}),0)]),t._v(" "),e("div",{staticClass:"divRoomTop2"},[e("ul",[e("li",{class:{liRoomTopC:"all"==t.golbal.typeCur},on:{click:function(i){return t.typeClick("all")}}},[e("i",{staticClass:"icon-all"})]),t._v(" "),e("li",{class:{liRoomTopC:"light"==t.golbal.typeCur},on:{click:function(i){return t.typeClick("light")}}},[e("i",{staticClass:"icon-ls_1_light"})]),t._v(" "),e("li",{class:{liRoomTopC:"dimmer"==t.golbal.typeCur},on:{click:function(i){return t.typeClick("dimmer")}}},[e("i",{staticClass:"icon-ls_4_dimmer"})]),t._v(" "),e("li",{class:{liRoomTopC:"curtain"==t.golbal.typeCur},on:{click:function(i){return t.typeClick("curtain")}}},[e("i",{staticClass:"icon-ls_23_curtain"})]),t._v(" "),e("li",{class:{liRoomTopC:"ac"==t.golbal.typeCur},on:{click:function(i){return t.typeClick("ac")}}},[e("i",{staticClass:"icon-ls_7_ac"})])])]),t._v(" "),e("div",{staticClass:"divRoom",style:"height:"+t.heightRoom+"px"},[e("div",{staticClass:"divView"},[e("div",{class:"btnList"+(t.isGallery?"":" btnViewC"),on:{click:function(i){t.isGallery=!1}}},[e("i",{staticClass:"icon-viewlist"})]),t._v(" "),e("div",{class:"btnGallery"+(t.isGallery?" btnViewC":""),on:{click:function(i){t.isGallery=!0}}},[e("i",{staticClass:"icon-viewgallery"})])]),t._v(" "),e("div",{class:"divRoomContent"+(t.isGallery?" divRoomGallery":" divRoomList")},[t._l(t.golbal.roomCur.devices,function(i){return["light"!=i.type||i.type!=t.golbal.typeCur&&"all"!=t.golbal.typeCur?t._e():e("DeviceLight",{key:i.id,attrs:{device:i}}),t._v(" "),"curtain"!=i.type||i.type!=t.golbal.typeCur&&"all"!=t.golbal.typeCur?t._e():e("DeviceCurtain",{key:i.id,attrs:{device:i}}),t._v(" "),"dimmer"!=i.type||i.type!=t.golbal.typeCur&&"all"!=t.golbal.typeCur?t._e():e("DeviceDimmer",{key:i.id,attrs:{device:i}}),t._v(" "),"ac"!=i.type||i.type!=t.golbal.typeCur&&"all"!=t.golbal.typeCur?t._e():e("DeviceAC",{key:i.id,attrs:{device:i}})]})],2)])])],1)},staticRenderFns:[]},U=e("VU/8")(O,M,!1,null,null,null).exports,Y=e("mvHQ"),L=e.n(Y),B=e("mtWM"),H=e.n(B),G={data:function(){return{drawerBlock:!1,directionBlock:"btt",heightDrawerBlock:window.innerHeight-159,drawerTest:!1,directionTest:"rtl",widthDrawerTest:window.innerWidth,tabsTest:"tab1",formTest:{server:""},heightSendMessage:window.innerHeight-180}},props:["golbal"],methods:{drawerBlockClick:function(){this.drawerBlock=!0},drawerTestClick:function(){this.drawerTest=!0},blockClick:function(t){for(var i=0;i<this.golbal.myProject.blocks.length;i++){(e=this.golbal.myProject.blocks[i]).active=!1}t.active=!0,this.golbal.blockCur=t,this.golbal.floorCur=this.golbal.blockCur.floors[0];for(i=0;i<this.golbal.blockCur.floors.length;i++){(e=this.golbal.blockCur.floors[i]).active&&(this.golbal.floorCur=e)}this.golbal.roomCur=this.golbal.floorCur.rooms[0];for(i=0;i<this.golbal.floorCur.rooms.length;i++){var e;(e=this.golbal.floorCur.rooms[i]).active&&(this.golbal.roomCur=e)}this.drawerBlock=!1},getData:function(){var t=this;return c()(n.a.mark(function i(){var e,o,a;return n.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,H.a.post("http://home.ivor-electric.com:3002/api?action=GET_PROJECT_APP&project_id=3929487");case 2:for(e=i.sent,window.localStorage.setItem("myProject",L()(e.data.project)),t.golbal.myProject=e.data.project,t.golbal.blockCur=t.golbal.myProject.blocks[0],t.golbal.floorCur=t.golbal.blockCur[0],o=0;o<t.golbal.blockCur.floors.length;o++)(a=t.golbal.blockCur.floors[o]).active&&(t.golbal.floorCur=a);case 9:case"end":return i.stop()}},i,t)}))()},scanQRCode:function(){var t=this;return c()(n.a.mark(function i(){var e;return n.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:e=t,cordova.plugins.barcodeScanner.scan(function(t){var i=t.text.replace("linkcontrol","http");console.log(i),H.a.post(i).then(function(t){console.log(t.data.project),window.localStorage.setItem("myProject",L()(t.data.project)),e.golbal.myProject=t.data.project,e.golbal.blockCur=e.golbal.myProject.blocks[0],e.golbal.floorCur=e.golbal.blockCur[0];for(var i=0;i<e.golbal.blockCur.floors.length;i++){var o=e.golbal.blockCur.floors[i];o.active&&(e.golbal.floorCur=o)}}).catch(function(t){console.log(t)})},function(t){alert(t)});case 2:case"end":return i.stop()}},i,t)}))()},submitTest:function(){this.golbal.testServer=this.formTest.server}},mounted:function(){this.golbal.showButtonFloor=!1,this.golbal.menuCur="user",this.formTest.server=this.golbal.testServer}},$={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"main"},[t._m(0),t._v(" "),e("div",{staticClass:"divUserContent"},[e("span",{staticClass:"title"},[t._v("管理设置")]),t._v(" "),e("div",{staticClass:"content"},[e("ul",[e("li",{on:{click:function(i){return t.scanQRCode()}}},[e("i",{staticClass:"icon-scanning"}),e("span",[t._v("扫一扫获取配置")]),t._m(1)]),t._v(" "),e("li",{on:{click:function(i){return t.drawerBlockClick()}}},[e("i",{staticClass:"icon-office"}),e("span",[t._v("楼栋管理")]),t._m(2)]),t._v(" "),e("li",{on:{click:function(i){return t.drawerTestClick()}}},[e("i",{staticClass:"icon-wrench"}),e("span",[t._v("调试")]),t._m(3)])])])]),t._v(" "),e("el-drawer",{attrs:{title:"请选择楼栋",visible:t.drawerBlock,direction:t.directionBlock,"append-to-body":!0,"custom-class":"drawerBlock",size:t.heightDrawerBlock+"px"},on:{"update:visible":function(i){t.drawerBlock=i}}},[e("ul",t._l(t.golbal.myProject.blocks,function(i){return e("li",{key:i.id,on:{click:function(e){return t.blockClick(i)}}},[e("i",{staticClass:"icon-office"}),e("span",[t._v(t._s(i.name))]),t._v(" "),i.active?e("div",{staticClass:"checked"},[e("i",{staticClass:"icon-yuanxingxuanzhongfill"})]):t._e()])}),0)]),t._v(" "),e("el-drawer",{attrs:{title:"用户调试",visible:t.drawerTest,direction:t.directionTest,"append-to-body":!0,"custom-class":"drawerTest",size:t.widthDrawerTest+"px"},on:{"update:visible":function(i){t.drawerTest=i}}},[e("el-tabs",{staticClass:"divTabs",attrs:{type:"card"},model:{value:t.tabsTest,callback:function(i){t.tabsTest=i},expression:"tabsTest"}},[e("el-tab-pane",{attrs:{label:"参数设置",name:"tab1"}},[e("el-form",{ref:"form",staticClass:"formTest",attrs:{model:t.formTest,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"服 务 器"}},[e("el-input",{model:{value:t.formTest.server,callback:function(i){t.$set(t.formTest,"server",i)},expression:"formTest.server"}})],1),t._v(" "),e("el-form-item",[e("el-button",{on:{click:t.submitTest}},[t._v("绑定")])],1)],1)],1),t._v(" "),e("el-tab-pane",{attrs:{label:"调试日志",name:"tab2"}},[e("div",{staticClass:"divSend"},[e("input",{attrs:{type:"text"}}),t._v(" "),e("div",[t._v("发送")])]),t._v(" "),e("div",{staticClass:"divSendMessage",style:"height:"+t.heightSendMessage+"px"})])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"divUserTop"},[i("div",{staticClass:"divUserFace"},[i("img",{attrs:{src:e("9ZBj")}})]),this._v(" "),i("div",{staticClass:"divUserInfo"},[i("span",{staticClass:"spanUserInfo1"},[this._v("LinkScene")]),this._v(" "),i("span",{staticClass:"spanUserInfo2"},[this._v("用户")])])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"divIcon"},[i("i",{staticClass:"icon-arrow1_right"})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"divIcon"},[i("i",{staticClass:"icon-arrow1_right"})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"divIcon"},[i("i",{staticClass:"icon-arrow1_right"})])}]},Q=e("VU/8")(G,$,!1,null,null,null).exports,W={data:function(){return{heightMessage:window.innerHeight-102}},props:["golbal"],methods:{},mounted:function(){this.golbal.showButtonFloor=!1}},z={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"main"},[e("div",{staticClass:"divMessage",style:"height:"+t.heightMessage+"px"},t._l(t.golbal.messages,function(i){return e("div",{key:i.id,staticClass:"divMessageItem"},[e("div",{staticClass:"divTitle"},[e("i",{staticClass:"icon-mail1"}),e("span",[t._v(t._s(i.title))])]),t._v(" "),e("div",{staticClass:"divDate"},[t._v(t._s(i.date))]),t._v(" "),e("div",{staticClass:"divContent"},[t._v(t._s(i.content))])])}),0),t._v(" "),e("el-backtop",{staticStyle:{bottom:"80px",right:"10px"},attrs:{target:".divMessage"}})],1)},staticRenderFns:[]},J=e("VU/8")(W,z,!1,null,null,null).exports;o.default.use(g.a);var q=new g.a({routes:[{path:"/",name:"favorite",component:j},{path:"/favorite",name:"favorite",component:j},{path:"/room",name:"room",component:U},{path:"/user",name:"user",component:Q},{path:"/message",name:"message",component:J}]});o.default.use(s.a),o.default.config.productionTip=!1,new o.default({el:"#app",router:q,components:{App:h},template:"<App/>"})},NVJ6:function(t,i,e){"use strict";i.a={HEAD:[170,170],FUNCTION_CODE:{READ:0,WRITE:64,FEEDBACK:128,STATUS_BACK:192,QUERY_STATUS:1,CONTROL:2},DEVICE_TYPE_ENUM:{DEVICE_TYPE_MAIN_ALL:0,DEVICE_TYPE_MAIN:257,DEVICE_TYPE_GATEWAY:258,DEVICE_TYPE_BUS_SCREEN:259,DEVICE_TYPE_LOGIC:260,DEVICE_TYPE_AI_GENIC:261,DEVICE_TYPE_INFRARED:513,DEVICE_TYPE_LIGHT:769,DEVICE_TYPE_DIMMER:770,DEVICE_TYPE_CURTAIN:771,DEVICE_TYPE_SCENE:772,DEVICE_TYPE_LIGHT_SCENE:773,DEVICE_TYPE_AC:1025}}},VaBq:function(t,i){},XF4N:function(t,i,e){"use strict";i.a=r,i.b=function(t,i){null==i&&console.log("socket is null");null!==i&&3===i.readyState?(i.close(),i=r()):1===i.readyState?i.send(t):0===i.readyState&&setTimeout(function(){i.send(t)},3e3)};var o=e("mvHQ"),a=(e.n(o),"ws://192.168.0.119:8001"),s="",l=null,n=[];function r(t,i){if(n.length>0)for(var e=0;e<n.length;e++)if(n[e].url==i||n[e].url==i+"/")return console.log("已有websocket连接"),n[e];var o=new WebSocket(null==i?a:i);return o.onopen=c,o.onmessage=u,o.onerror=v,o.onclose=d,window.addEventListener("onmessageWS",function(i){var e=i.detail.data.data,o=new FileReader;o.onload=function(){var i=new Uint8Array(this.result);null!=t&&t(i)},o.readAsArrayBuffer(e)},!1),o}function c(t){console.log(t);for(var i=0;i<n.length;i++)C(n[i])}function v(t){clearInterval(l),s.close(),r()}function u(t){window.dispatchEvent(new CustomEvent("onmessageWS",{detail:{data:t}}))}function d(t){clearInterval(l),console.log("websocket已断开")}function C(t){t.send("pc_client"),l=setInterval(function(){t.send("pc_client")},5e3)}},gQoh:function(t,i,e){"use strict";(function(t){i.a={golbal:null,MyProject:null,bytes2hex:function(i){for(var e="",o=0;o<i.length;o++)e=e+t.from([i[o]]).toString("hex")+" ";return e},getVORoomByDeviceId:function(t){var i=this.MyProject;if(null==i)return console.log("project is null"),null;for(var e=0;e<i.blocks.length;e++)for(var o=i.blocks[e],a=0;a<o.floors.length;a++)for(var s=o.floors[a],l=0;l<s.rooms.length;l++)for(var n=s.rooms[l],r=0;r<n.devices.length;r++){if(n.devices[r].id==t)return n}},getVOBus:function(t){var i=this.MyProject;if(null==i)return console.log("project is null"),null;var e=this.getVORoomByDeviceId(t);if(null==e)return null;for(var o=null,a=0;a<i.buses.length;a++)if((o=i.buses[a]).id==e.busId)return o;return null}}}).call(i,e("EuP9").Buffer)},iQH9:function(t,i,e){t.exports=e.p+"static/img/logo.0725dfd.png"},ih0c:function(t,i){},uxah:function(t,i,e){"use strict";var o=e("NVJ6"),a=e("gQoh");i.a={receiveData:function(t){if(console.log("<== "+a.a.bytes2hex(t)),t.length==t[2])for(var i=0;i<a.a.golbal.length;i++){var e=a.a.golbal[i].device;if(t[3]==e.areacode&&t[4]==e.addr)if("light"==e.type&&(t[5]<<8)+t[6]==o.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_LIGHT){var s=(t[11]<<8)+t[10];e.isOn=(s&Math.pow(2,e.channel-1))>0}else if("dimmer"==e.type&&(t[5]<<8)+t[6]==o.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_DIMMER)1==e.channel?e.value=t[10]:e.value=t[11];else if("curtain"==e.type&&(t[5]<<8)+t[6]==o.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_CURTAIN)1==e.channel?e.value=t[10]:e.value=t[11];else if("ac"==e.type&&(t[5]<<8)+t[6]==o.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_AC){e.value=t[9];s=t[8];switch(e.isOn=s>>7==1,e.lock=s>>5&3,e.fan=s>>3&3,3&s){case 1:e.mode="制冷";break;case 2:e.mode="制热";break;case 3:e.mode="送风";break;default:e.mode="恒温"}}}}}}},["NHnr"]);
//# sourceMappingURL=app.8fd4d370d8dd57a8d439.js.map