webpackJsonp([1],{"22e4":function(e,i,t){"use strict";(function(e){var s=t("NVJ6"),o=t("gQoh"),a=t("uxah"),l=t("XF4N");i.a={udp_client:null,ip:"",port:0,resetNetworkInfo:function(e,i){this.ip=e,this.port=i,console.log("切换到"+e+":"+i),this.udp_client=new UDP.Client(e,i)},buildCommand:function(e,i,t,o,a){var l=9;null!=e&&(l+=e.length);var n=[];if(n.push(s.a.HEAD[0]),n.push(s.a.HEAD[1]),n.push(l),n.push(i),n.push(t),n.push(o>>8),n.push(255&o),n.push(a),null!=e)for(var c=0;c<e.length;c++)n.push(e[c]);var r=0;for(c=0;c<n.length;c++)r+=n[c];return n.push(255&r),n},sendAction:function(i){var t=o.a.getVOBus(i.id);if(null!=t){var n=s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_MAIN_ALL,c=[];switch(i.type){case"light":n=s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_LIGHT;var r=0;i.isOn&&(r=100),c.push(i.channel),c.push(r);break;case"dimmer":n=s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_DIMMER,c.push(i.channel),c.push(i.value);break;case"curtain":n=s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_CURTAIN,c.push(i.channel),c.push(i.value);break;case"ac":n=s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_AC;var v=0;i.isOn&&(v+=128),v+=i.lock<<5,v+=i.fan<<3,"制冷"==i.mode?v+=1:"制冷"==i.mode?v+=2:"送风"==i.mode&&(v+=3),c.push(v),c.push(i.value),c.push(128),c.push(28),c.push(128),c.push(25),c.push(0);break;case"scene":n=s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_SCENE;r=0;i.isOn&&(r=100),c.push(i.channel),c.push(r)}var u=this.buildCommand(c,i.areacode,i.addr,n,s.a.FUNCTION_CODE.WRITE+s.a.FUNCTION_CODE.CONTROL);console.log("==> "+o.a.bytes2hex(u));var d=Object(l.a)(a.a.receiveData,t.ws_url);Object(l.b)(e.from(u),d)}else console.log("bus is null")}}}).call(i,t("EuP9").Buffer)},NHnr:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=t("7+uW"),o=t("zL8q"),a=t.n(o),l=t("Xxa5"),n=t.n(l),c=t("exGp"),r=t.n(c),v=t("gQoh"),u={data:function(){return{visibleFloor:!1}},props:["golbal"],methods:{floorClick:function(e){for(var i=0;i<this.golbal.blockCur.floors.length;i++){(t=this.golbal.blockCur.floors[i]).active=!1}e.active=!0,this.golbal.floorCur=e,this.visibleFloor=!1,this.golbal.roomCur=this.golbal.floorCur.rooms[0];for(i=0;i<this.golbal.floorCur.rooms.length;i++){var t;(t=this.golbal.floorCur.rooms[i]).active&&(this.golbal.roomCur=t,v.a.getTypeStatus())}},messageClick:function(){"/message"!=this.$route.path&&this.$router.push({path:"/message"})}}},d={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"header"},[t("div",{staticClass:"divHeaderLeft"},[t("div",{staticClass:"btnHeader",on:{click:function(i){return e.messageClick()}}},[t("i",{staticClass:"icon-mail1"})])]),e._v(" "),e._m(0),e._v(" "),t("div",{staticClass:"divHeaderRight"},[e.golbal.showButtonFloor?t("el-popover",{attrs:{placement:"bottom",width:"100",trigger:"click","popper-class":"popoverFloor"},model:{value:e.visibleFloor,callback:function(i){e.visibleFloor=i},expression:"visibleFloor"}},[t("div",[t("span",{staticClass:"spanTitle"},[e._v("请选择楼层")]),e._v(" "),t("ul",e._l(e.golbal.blockCur.floors,function(i){return t("li",{key:i.id,on:{click:function(t){return e.floorClick(i)}}},[t("i",{staticClass:"icon-office"}),t("span",[e._v(e._s(i.name))]),e._v(" "),i.active?t("div",{staticClass:"checked"},[t("i",{staticClass:"icon-yuanxingxuanzhongfill"})]):e._e()])}),0)]),e._v(" "),t("el-button",{staticClass:"btnHeaderFloor",attrs:{slot:"reference"},slot:"reference"},[t("span",[e._v(e._s(e.golbal.floorCur.name))]),e._v(" "),t("i",{staticClass:"icon-caret-down"})])],1):e._e()],1)])},staticRenderFns:[function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"divHeaderMain"},[i("img",{staticClass:"imgHeaderLogo",attrs:{src:"static/images/logo.png"}})])}]},C=t("VU/8")(u,d,!1,null,null,null).exports,h={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"footer"},[t("ul",[t("li",[t("router-link",{class:{routerC:"favorite"==e.golbal.menuCur},attrs:{to:"/favorite","active-class":"routerC",tag:"div"}},[t("i",{staticClass:"icon-favoritesfilling"}),e._v(" "),t("span",[e._v("习惯")])])],1),e._v(" "),t("li",[t("router-link",{attrs:{to:"/room","active-class":"routerC",tag:"div"}},[t("i",{staticClass:"icon-home3"}),e._v(" "),t("span",[e._v("区域")])])],1),e._v(" "),t("li",[t("router-link",{attrs:{to:"/user","active-class":"routerC",tag:"div"}},[t("i",{staticClass:"icon-accountfilling"}),e._v(" "),t("span",[e._v("我的")])])],1)])])},staticRenderFns:[]},f=t("VU/8")({props:["golbal"]},h,!1,null,null,null).exports,m=t("XF4N"),p=t("uxah"),g={name:"App",components:{FrameHeader:C,FrameFooter:f},data:function(){return{golbal:{menuCur:"",type:[{id:1,name:"all",icon:"icon-all",isOn:!1},{id:2,name:"light",icon:"icon-ls_1_light",isOn:!1},{id:3,name:"curtain",icon:"icon-ls_23_curtain",isOn:!1},{id:4,name:"ac",icon:"icon-ls_7_ac",isOn:!1},{id:5,name:"scene",icon:"icon-ls_26_go_off_work",isOn:!1}],typeCur:"all",showButtonFloor:!1,blockCur:{},floorCur:{},roomCur:{},myProject:{id:"b0b502b7-c000-4000-a000-0547116af000",name:"万科水晶城",active:!0,blocks:[{id:"b0b502b7-c001-4000-a000-0547116af000",name:"1座",floors:[{id:"b0b502b7-c001-4001-a000-0547116af000",name:"楼层一",active:!0,rooms:[{id:"b0b502b7-c001-4001-a001-0547116af000",name:"主卧",busId:"7e0378ca-c813-4056-a001-485e2970c001",active:!0,devices:[{id:"b0b502b7-c001-4001-a001-0547116af001",type:"light",areacode:1,addr:1,channel:1,name:"吊灯",summary:"关闭",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!1},{id:"b0b502b7-c001-4001-a001-0547116af002",type:"light",areacode:1,addr:1,channel:2,name:"壁灯",summary:"开启",icon:"icon-ls_1_light",isFavorite:!1,hits:0,isOn:!0},{id:"b0b502b7-c001-4001-a001-0547116af003",type:"curtain",areacode:1,addr:1,channel:3,name:"窗帘",summary:"50%",icon:"icon-ls_23_curtain",isFavorite:!1,hits:0,value:10},{id:"b0b502b7-c001-4001-a001-0547116af004",type:"dimmer",areacode:1,addr:1,channel:2,name:"床头灯",summary:"40%",icon:"icon-ls_4_dimmer",isFavorite:!1,hits:0,value:40},{id:"b0b502b7-c001-4001-a001-0547116af005",type:"ac",name:"空调",summary:"制冷 26℃",icon:"icon-ls_7_ac",isFavorite:!0,hits:0,isOn:!1,value:26,mode:"制冷",fan:3,lock:0},{id:"b0b502b7-c001-4001-a001-0547116af006",type:"scene",areacode:1,addr:1,channel:1,name:"场景",summary:"关闭",icon:"icon-ls_26_go_off_work",isFavorite:!1,hits:0,isOn:!1}]}]}]}]},testServer:"ws://192.168.0.119:8001",messages:[{id:1,title:"系统通知",date:"2020-07-01 07:22:14",content:"停服维护已经结束，停服期间给您带来的不便，我们深表歉意。"},{id:2,title:"版本更新公告",date:"2020-06-25 17:43:53",content:"我们预计于北京时间：2020-06-26 02:00 - 04:00进行为期两个小时的停服更新维护。"},{id:3,title:"升级提醒",date:"2020-06-01 15:14:32",content:"为了使用户获得更好的体验，我们刚刚完成了一次热更，请重新启动程序以使更新生效。"},{id:4,title:"系统通知",date:"2020-05-28 12:53:43",content:"停服维护已经结束，停服期间给您带来的不便，我们深表歉意。"}],themeCur:1}}},methods:{getData:function(){var e=this;return r()(n.a.mark(function i(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},i,e)}))()}},beforeMount:function(){var e=window.localStorage;null!=e.getItem("myProject")&&(this.golbal.myProject=JSON.parse(e.getItem("myProject"))),console.log(this.golbal.myProject);for(var i=0;i<this.golbal.myProject.blocks.length;i++){var t=this.golbal.myProject.blocks[i];t.active=!1;for(var s=0;s<t.floors.length;s++){var o=t.floors[s];o.active=!1;for(var a=0;a<o.rooms.length;a++){o.rooms[a].active=!1}}}this.golbal.blockCur=this.golbal.myProject.blocks[0],this.golbal.blockCur.active=!0,this.golbal.floorCur=this.golbal.blockCur.floors[0],this.golbal.floorCur.active=!0,this.golbal.roomCur=this.golbal.floorCur.rooms[0],this.golbal.roomCur.active=!0;var l=[];for(i=0;i<this.golbal.myProject.blocks.length;i++)for(s=0;s<this.golbal.myProject.blocks[i].floors.length;s++)for(a=0;a<this.golbal.myProject.blocks[i].floors[s].rooms.length;a++)for(var n=0;n<this.golbal.myProject.blocks[i].floors[s].rooms[a].devices.length;n++)l.push({device:this.golbal.myProject.blocks[i].floors[s].rooms[a].devices[n],busId:this.golbal.myProject.blocks[i].floors[s].rooms[a].busId});v.a.devicesAll=l,v.a.MyProject=this.golbal.myProject,v.a.golbal=this.golbal,v.a.getTypeStatus();for(i=0;i<this.golbal.myProject.buses.length;i++){var c=this.golbal.myProject.buses[i];Object(m.a)(p.a.receiveData,c.ws_url)}}},b={render:function(){var e=this.$createElement,i=this._self._c||e;return i("div",{attrs:{id:"page"}},[i("FrameHeader",{attrs:{golbal:this.golbal}}),this._v(" "),i("router-view",{attrs:{golbal:this.golbal}}),this._v(" "),i("FrameFooter",{attrs:{golbal:this.golbal}})],1)},staticRenderFns:[]},_=t("VU/8")(g,b,!1,null,null,null).exports,k=t("/ocq"),y=t("I0MY"),E=t.n(y),w=t("22e4"),T={data:function(){return{}},props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite},switchClick:function(e){e.isOn=!e.isOn,v.a.getTypeStatus(),w.a.sendAction(e)}}},D={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"divDevice",on:{click:function(i){return e.switchClick(e.device)}}},[t("div",{staticClass:"divFavorite",on:{click:function(i){return i.stopPropagation(),e.favoriteClick(e.device)}}},[t("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),t("div",{staticClass:"divIcon"},[t("i",{class:[e.device.icon,{iconC:e.device.isOn}]})]),e._v(" "),t("div",{staticClass:"divInfo"},[t("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),t("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(e.device.isOn?"开启":"关闭"))])]),e._v(" "),t("div",{staticClass:"divControl"},[t("div",{staticClass:"btnSwitch"},[t("i",{staticClass:"icon-ls_9_on",class:{iconC:e.device.isOn}})])])])},staticRenderFns:[]},I=t("VU/8")(T,D,!1,null,null,null).exports,P={data:function(){return{}},props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite},curtainClick:function(e,i){e.value=i,v.a.getTypeStatus(),w.a.sendAction(this.device)}}},F={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"divDevice"},[t("div",{staticClass:"divFavorite",on:{click:function(i){return e.favoriteClick(e.device)}}},[t("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),t("div",{staticClass:"divIcon"},[t("i",{class:[e.device.icon,{iconC:e.device.isOn}]})]),e._v(" "),t("div",{staticClass:"divInfo"},[t("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),t("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(0==e.device.value?"关闭":100==e.device.value?"开启":"停止"))])]),e._v(" "),t("div",{staticClass:"divControl"},[t("div",{class:"btnCurtain btnCurtain1"+(0==e.device.value?" iconC":""),on:{click:function(i){return e.curtainClick(e.device,0)}}},[t("i",{staticClass:"icon-arrow-right"}),t("i",{staticClass:"icon-arrow-left"})]),e._v(" "),t("div",{class:"btnCurtain btnCurtain2"+(101==e.device.value?" iconC":""),on:{click:function(i){return e.curtainClick(e.device,101)}}},[t("i",{staticClass:"icon-pause2"})]),e._v(" "),t("div",{class:"btnCurtain btnCurtain3"+(100==e.device.value?" iconC":""),on:{click:function(i){return e.curtainClick(e.device,100)}}},[t("i",{staticClass:"icon-arrow-left"}),t("i",{staticClass:"icon-arrow-right"})])])])},staticRenderFns:[]},A=t("VU/8")(P,F,!1,null,null,null).exports,O={props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite},dimmerChange:function(){v.a.getTypeStatus(),w.a.sendAction(this.device)}},mounted:function(){this.dimmerValue=this.device.value}},R={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"divDevice"},[t("div",{staticClass:"divFavorite",on:{click:function(i){return e.favoriteClick(e.device)}}},[t("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),t("div",{staticClass:"divIcon"},[t("i",{class:[e.device.icon,{iconC:e.device.value>0}]})]),e._v(" "),t("div",{staticClass:"divInfo"},[t("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),t("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(e.device.value)+"%")])]),e._v(" "),t("div",{staticClass:"divControl"},[t("div",{staticClass:"divDimmer1"},[t("el-slider",{attrs:{"show-tooltip":!1},on:{change:e.dimmerChange},model:{value:e.device.value,callback:function(i){e.$set(e.device,"value",i)},expression:"device.value"}})],1)])])},staticRenderFns:[]},S=t("VU/8")(O,R,!1,null,null,null).exports,V={data:function(){return{drawer:!1,direction:"btt",heightDrawer:window.innerHeight-95,visibleFan:!1,visibleLock:!1}},props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite},switchClick:function(e){e.isOn=!e.isOn,v.a.getTypeStatus(),w.a.sendAction(this.device)},addClick:function(e){e.value<36&&e.isOn&&(e.value=e.value+1,e.summary=e.mode+" "+e.value+"℃",w.a.sendAction(this.device))},minusClick:function(e){e.value>17&&e.isOn&&(e.value=e.value-1,e.summary=e.mode+" "+e.value+"℃",w.a.sendAction(this.device))},drawerClick:function(e){this.drawer=!0},modeClick:function(e,i){e.isOn&&(e.mode=i,e.summary=e.mode+" "+e.value+"℃",w.a.sendAction(this.device))},fanClick:function(e,i){e.fan=i,this.visibleFan=!1,w.a.sendAction(this.device)},lockClick:function(e,i){e.lock=i,this.visibleLock=!1,w.a.sendAction(this.device)}}},j={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"divDevice",on:{click:function(i){return e.drawerClick(e.device)}}},[t("div",{staticClass:"divFavorite",on:{click:function(i){return i.stopPropagation(),e.favoriteClick(e.device)}}},[t("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),t("div",{staticClass:"divIcon"},[t("i",{class:e.device.icon})]),e._v(" "),t("div",{staticClass:"divInfo"},[t("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),t("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(e.device.summary))])]),e._v(" "),t("div",{staticClass:"divControl"},[t("div",{staticClass:"btnAC btnAC1",on:{click:function(i){return i.stopPropagation(),e.minusClick(e.device)}}},[t("i",{staticClass:"icon-move1"})]),e._v(" "),t("div",{staticClass:"btnAC btnAC2",on:{click:function(i){return i.stopPropagation(),e.switchClick(e.device)}}},[t("i",{staticClass:"icon-ls_9_on",class:{iconC:e.device.isOn}})]),e._v(" "),t("div",{staticClass:"btnAC btnAC3",on:{click:function(i){return i.stopPropagation(),e.addClick(e.device)}}},[t("i",{staticClass:"icon-add1"})])]),e._v(" "),t("el-drawer",{attrs:{visible:e.drawer,direction:e.direction,"append-to-body":!0,"custom-class":"drawerAC",size:e.heightDrawer+"px"},on:{"update:visible":function(i){e.drawer=i}}},[t("div",{staticClass:"divDrawerACTitle"},[t("span",{staticClass:"spanDrawerAC1"},[e._v("温控器")]),e._v(" "),t("span",{staticClass:"spanDrawerAC2"},[e._v("当前温度"+e._s(e.device.value)+"℃")])]),e._v(" "),t("div",{staticClass:"divDrawerAC"},[t("div",{staticClass:"divDrawerACScreen"},[t("span",{staticClass:"spanDrawerAC3"},[e._v(e._s(e.device.mode))]),e._v(" "),t("div",{staticClass:"divDrawerACTemperature"},[t("div",{staticClass:"divDrawerACTemperature1",on:{click:function(i){return i.stopPropagation(),e.minusClick(e.device)}}},[t("i",{staticClass:"icon-move1"})]),e._v(" "),t("div",{staticClass:"divDrawerACTemperature2"},[e._v(e._s(e.device.value))]),e._v(" "),t("div",{staticClass:"divDrawerACTemperature3",on:{click:function(i){return i.stopPropagation(),e.addClick(e.device)}}},[t("i",{staticClass:"icon-add1"})])]),e._v(" "),t("span",{staticClass:"spanDrawerAC4"},[e._v("℃")])]),e._v(" "),t("div",{staticClass:"divDrawerACMode"},[t("div",{staticClass:"divDrawerACModeC"},[t("el-popover",{attrs:{placement:"top",width:"50",trigger:"click","popper-class":"popoverAC",disabled:!e.device.isOn},model:{value:e.visibleFan,callback:function(i){e.visibleFan=i},expression:"visibleFan"}},[t("div",[t("span",{staticClass:"spanTitle"},[e._v("请选择风速")]),e._v(" "),t("ul",[t("li",{on:{click:function(i){return i.stopPropagation(),e.fanClick(e.device,"0")}}},[t("i",{staticClass:"icon-abc"}),t("span",[e._v("自动")])]),e._v(" "),t("li",{on:{click:function(i){return i.stopPropagation(),e.fanClick(e.device,"1")}}},[t("i",{staticClass:"icon-propeller"}),t("span",[e._v("低速")])]),e._v(" "),t("li",{on:{click:function(i){return i.stopPropagation(),e.fanClick(e.device,"2")}}},[t("i",{staticClass:"icon-screw"}),t("span",[e._v("中速")])]),e._v(" "),t("li",{on:{click:function(i){return i.stopPropagation(),e.fanClick(e.device,"3")}}},[t("i",{staticClass:"icon-screw2"}),t("span",[e._v("高速")])])])]),e._v(" "),t("el-button",{staticClass:"btnDeviceAcFan",attrs:{slot:"reference"},slot:"reference"},[t("i",{class:0==e.device.fan?"icon-abc":1==e.device.fan?"icon-propeller":2==e.device.fan?"icon-screw":"icon-screw2"})])],1)],1),e._v(" "),t("div",{on:{click:function(i){return i.stopPropagation(),e.modeClick(e.device,"制热")}}},[t("i",{staticClass:"icon-sun",class:{iconC:"制热"==e.device.mode}})]),e._v(" "),t("div",{on:{click:function(i){return i.stopPropagation(),e.modeClick(e.device,"制冷")}}},[t("i",{staticClass:"icon-kongdiao",class:{iconC:"制冷"==e.device.mode}})]),e._v(" "),t("div",{on:{click:function(i){return i.stopPropagation(),e.modeClick(e.device,"送风")}}},[t("i",{staticClass:"icon-fan",class:{iconC:"送风"==e.device.mode}})]),e._v(" "),t("div",{staticClass:"divDrawerACModeC"},[t("el-popover",{attrs:{placement:"top",width:"50",trigger:"click","popper-class":"popoverAC",disabled:!e.device.isOn},model:{value:e.visibleLock,callback:function(i){e.visibleLock=i},expression:"visibleLock"}},[t("div",[t("span",{staticClass:"spanTitle"},[e._v("请选择")]),e._v(" "),t("ul",[t("li",{on:{click:function(i){return i.stopPropagation(),e.lockClick(e.device,"0")}}},[t("i",{staticClass:"icon-unlock"}),t("span",[e._v("解锁")])]),e._v(" "),t("li",{on:{click:function(i){return i.stopPropagation(),e.lockClick(e.device,"1")}}},[t("i",{staticClass:"icon-lock1"}),t("span",[e._v("锁定按键")])]),e._v(" "),t("li",{on:{click:function(i){return i.stopPropagation(),e.lockClick(e.device,"2")}}},[t("i",{staticClass:"icon-data"}),t("span",[e._v("锁定数据")])])])]),e._v(" "),t("el-button",{staticClass:"btnDeviceAcFan",attrs:{slot:"reference"},slot:"reference"},[t("i",{class:0==e.device.lock?"icon-unlock":1==e.device.lock?"icon-lock1":"icon-data"})])],1)],1)]),e._v(" "),t("div",{staticClass:"btnDrawerACSwitch",on:{click:function(i){return i.stopPropagation(),e.switchClick(e.device)}}},[t("i",{staticClass:"icon-ls_9_on",class:{iconC:e.device.isOn}})])])])],1)},staticRenderFns:[]},U=t("VU/8")(V,j,!1,null,null,null).exports,N={data:function(){return{}},props:["device"],methods:{favoriteClick:function(e){e.isFavorite=!e.isFavorite},switchClick:function(e){e.isOn=!e.isOn,v.a.getTypeStatus(),w.a.sendAction(e)}}},x={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"divDevice",on:{click:function(i){return e.switchClick(e.device)}}},[t("div",{staticClass:"divFavorite",on:{click:function(i){return i.stopPropagation(),e.favoriteClick(e.device)}}},[t("i",{staticClass:"icon-favoritesfilling",class:{iconC:e.device.isFavorite}})]),e._v(" "),t("div",{staticClass:"divIcon"},[t("i",{class:[e.device.icon,{iconC:e.device.isOn}]})]),e._v(" "),t("div",{staticClass:"divInfo"},[t("span",{staticClass:"spanDeviceName"},[e._v(e._s(e.device.name))]),e._v(" "),t("span",{staticClass:"spanDeviceSummary"},[e._v(e._s(e.device.isOn?"开启":"关闭"))])]),e._v(" "),t("div",{staticClass:"divControl"},[t("div",{staticClass:"btnSwitch"},[t("i",{staticClass:"icon-ls_9_on",class:{iconC:e.device.isOn}})])])])},staticRenderFns:[]},M=t("VU/8")(N,x,!1,null,null,null).exports;s.default.use(E.a,{name:"v-touch"});var L={components:{DeviceLight:I,DeviceCurtain:A,DeviceDimmer:S,DeviceAC:U,DeviceScene:M},data:function(){return{heightRoom:window.innerHeight-195,isGallery:!0}},props:["golbal"],methods:{roomClick:function(e){for(var i=0;i<this.golbal.floorCur.rooms.length;i++){this.golbal.floorCur.rooms[i].active=!1}e.active=!0,this.golbal.roomCur=e},typeClick:function(e){this.golbal.typeCur=e},onSwipeLeft:function(){for(var e=0,i=0;i<this.golbal.floorCur.rooms.length;i++){if(this.golbal.floorCur.rooms[i]==this.golbal.roomCur){e=i;break}}e<this.golbal.floorCur.rooms.length-1&&(e+=1),this.roomClick(this.golbal.floorCur.rooms[e])},onSwipeRight:function(){for(var e=0,i=0;i<this.golbal.floorCur.rooms.length;i++){if(this.golbal.floorCur.rooms[i]==this.golbal.roomCur){e=i;break}}e>0&&(e-=1),this.roomClick(this.golbal.floorCur.rooms[e])}},mounted:function(){this.golbal.showButtonFloor=!0,this.golbal.menuCur="favorite"}},Y={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"main"},[t("v-touch",{staticStyle:{"touch-action":"pan-y!important"},attrs:{tag:"div"},on:{swipeleft:e.onSwipeLeft,swiperight:e.onSwipeRight}},[t("div",{staticClass:"divRoomTop"},[t("ul",e._l(e.golbal.floorCur.rooms,function(i){return t("li",{key:i.id,class:{liRoomTopC:i.active},on:{click:function(t){return e.roomClick(i)}}},[e._v(e._s(i.name))])}),0)]),e._v(" "),t("div",{staticClass:"divRoomTop2"},[t("ul",[t("li",{class:{liRoomTopC:"all"==e.golbal.typeCur},on:{click:function(i){return e.typeClick("all")}}},[t("i",{staticClass:"icon-all"})]),e._v(" "),t("li",{class:{liRoomTopC:"light"==e.golbal.typeCur},on:{click:function(i){return e.typeClick("light")}}},[t("i",{staticClass:"icon-ls_1_light"})]),e._v(" "),t("li",{class:{liRoomTopC:"curtain"==e.golbal.typeCur},on:{click:function(i){return e.typeClick("curtain")}}},[t("i",{staticClass:"icon-ls_23_curtain"})]),e._v(" "),t("li",{class:{liRoomTopC:"ac"==e.golbal.typeCur},on:{click:function(i){return e.typeClick("ac")}}},[t("i",{staticClass:"icon-ls_7_ac"})]),e._v(" "),t("li",{class:{liRoomTopC:"scene"==e.golbal.typeCur},on:{click:function(i){return e.typeClick("scene")}}},[t("i",{staticClass:"icon-ls_26_go_off_work"})])])]),e._v(" "),t("div",{staticClass:"divRoom",style:"height:"+e.heightRoom+"px"},[t("div",{staticClass:"divView"},[t("div",{class:"btnList"+(e.isGallery?"":" btnViewC"),on:{click:function(i){e.isGallery=!1}}},[t("i",{staticClass:"icon-viewlist"})]),e._v(" "),t("div",{class:"btnGallery"+(e.isGallery?" btnViewC":""),on:{click:function(i){e.isGallery=!0}}},[t("i",{staticClass:"icon-viewgallery"})])]),e._v(" "),t("div",{class:"divRoomContent"+(e.isGallery?" divRoomGallery":" divRoomList")},[e._l(e.golbal.roomCur.devices,function(i){return["light"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur||!i.isFavorite?e._e():t("DeviceLight",{key:i.id,attrs:{device:i}}),e._v(" "),"curtain"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur||!i.isFavorite?e._e():t("DeviceCurtain",{key:i.id,attrs:{device:i}}),e._v(" "),"dimmer"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur&&"light"!=e.golbal.typeCur||!i.isFavorite?e._e():t("DeviceDimmer",{key:i.id,attrs:{device:i}}),e._v(" "),"ac"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur||!i.isFavorite?e._e():t("DeviceAC",{key:i.id,attrs:{device:i}}),e._v(" "),"scene"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur||!i.isFavorite?e._e():t("DeviceScene",{key:i.id,attrs:{device:i}})]})],2)])])],1)},staticRenderFns:[]},B=t("VU/8")(L,Y,!1,null,null,null).exports;s.default.use(E.a,{name:"v-touch"});var G={components:{DeviceLight:I,DeviceCurtain:A,DeviceDimmer:S,DeviceAC:U,DeviceScene:M},data:function(){return{heightRoom:window.innerHeight-195,isGallery:!0}},props:["golbal"],methods:{roomClick:function(e){for(var i=0;i<this.golbal.floorCur.rooms.length;i++){this.golbal.floorCur.rooms[i].active=!1}e.active=!0,this.golbal.roomCur=e,v.a.getTypeStatus()},typeClick:function(e){this.golbal.typeCur=e},onSwipeLeft:function(){for(var e=0,i=0;i<this.golbal.floorCur.rooms.length;i++){if(this.golbal.floorCur.rooms[i]==this.golbal.roomCur){e=i;break}}e<this.golbal.floorCur.rooms.length-1&&(e+=1),this.roomClick(this.golbal.floorCur.rooms[e])},onSwipeRight:function(){for(var e=0,i=0;i<this.golbal.floorCur.rooms.length;i++){if(this.golbal.floorCur.rooms[i]==this.golbal.roomCur){e=i;break}}e>0&&(e-=1),this.roomClick(this.golbal.floorCur.rooms[e])}},mounted:function(){this.golbal.showButtonFloor=!0,this.golbal.menuCur="room"}},H={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"main"},[t("v-touch",{staticStyle:{"touch-action":"pan-y!important"},attrs:{tag:"div"},on:{swipeleft:e.onSwipeLeft,swiperight:e.onSwipeRight}},[t("div",{staticClass:"divRoomTop"},[t("ul",e._l(e.golbal.floorCur.rooms,function(i){return t("li",{key:i.id,class:{liRoomTopC:i.active},on:{click:function(t){return e.roomClick(i)}}},[e._v(e._s(i.name))])}),0)]),e._v(" "),t("div",{staticClass:"divRoomTop2"},[t("ul",[t("li",{class:{liRoomTopC:"all"==e.golbal.typeCur},on:{click:function(i){return e.typeClick("all")}}},[t("i",{staticClass:"icon-all"})]),e._v(" "),t("li",{class:"light"==e.golbal.typeCur?"liRoomTopC":e.golbal.type[1].isOn?"liRoomTopBlue":"",on:{click:function(i){return e.typeClick("light")}}},[t("i",{staticClass:"icon-ls_1_light"})]),e._v(" "),t("li",{class:"curtain"==e.golbal.typeCur?"liRoomTopC":e.golbal.type[2].isOn?"liRoomTopBlue":"",on:{click:function(i){return e.typeClick("curtain")}}},[t("i",{staticClass:"icon-ls_23_curtain"})]),e._v(" "),t("li",{class:"ac"==e.golbal.typeCur?"liRoomTopC":e.golbal.type[3].isOn?"liRoomTopBlue":"",on:{click:function(i){return e.typeClick("ac")}}},[t("i",{staticClass:"icon-ls_7_ac"})]),e._v(" "),t("li",{class:"scene"==e.golbal.typeCur?"liRoomTopC":e.golbal.type[4].isOn?"liRoomTopBlue":"",on:{click:function(i){return e.typeClick("scene")}}},[t("i",{staticClass:"icon-ls_26_go_off_work"})])])]),e._v(" "),t("div",{staticClass:"divRoom",style:"height:"+e.heightRoom+"px"},[t("div",{staticClass:"divView"},[t("div",{class:"btnList"+(e.isGallery?"":" btnViewC"),on:{click:function(i){e.isGallery=!1}}},[t("i",{staticClass:"icon-viewlist"})]),e._v(" "),t("div",{class:"btnGallery"+(e.isGallery?" btnViewC":""),on:{click:function(i){e.isGallery=!0}}},[t("i",{staticClass:"icon-viewgallery"})])]),e._v(" "),t("div",{class:"divRoomContent"+(e.isGallery?" divRoomGallery":" divRoomList")},[e._l(e.golbal.roomCur.devices,function(i){return["light"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur?e._e():t("DeviceLight",{key:i.id,attrs:{device:i}}),e._v(" "),"curtain"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur?e._e():t("DeviceCurtain",{key:i.id,attrs:{device:i}}),e._v(" "),"dimmer"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur&&"light"!=e.golbal.typeCur?e._e():t("DeviceDimmer",{key:i.id,attrs:{device:i}}),e._v(" "),"ac"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur?e._e():t("DeviceAC",{key:i.id,attrs:{device:i}}),e._v(" "),"scene"!=i.type||i.type!=e.golbal.typeCur&&"all"!=e.golbal.typeCur?e._e():t("DeviceScene",{key:i.id,attrs:{device:i}})]})],2)])])],1)},staticRenderFns:[]},$=t("VU/8")(G,H,!1,null,null,null).exports,W=t("mvHQ"),Q=t.n(W),z=t("mtWM"),J=t.n(z),X={data:function(){return{drawerBlock:!1,heightDrawerBlock:window.innerHeight-159,drawerTheme:!1,drawerTest:!1,widthDrawerTest:window.innerWidth,widthDrawerTheme:window.innerWidth,tabsTest:"tab1",formTest:{server:""},heightSendMessage:window.innerHeight-180,log:""}},props:["golbal"],methods:{drawerBlockClick:function(){this.drawerBlock=!0},drawerThemeClick:function(){this.drawerTheme=!0},themeClick:function(e){this.golbal.themeCur!=e&&(document.getElementById("style").attributes[2].value="static/css/style"+e+".css"),this.golbal.themeCur=e},drawerTestClick:function(){this.drawerTest=!0},blockClick:function(e){for(var i=0;i<this.golbal.myProject.blocks.length;i++){(t=this.golbal.myProject.blocks[i]).active=!1}e.active=!0,this.golbal.blockCur=e,this.golbal.floorCur=this.golbal.blockCur.floors[0];for(i=0;i<this.golbal.blockCur.floors.length;i++){(t=this.golbal.blockCur.floors[i]).active&&(this.golbal.floorCur=t)}this.golbal.roomCur=this.golbal.floorCur.rooms[0];for(i=0;i<this.golbal.floorCur.rooms.length;i++){var t;(t=this.golbal.floorCur.rooms[i]).active&&(this.golbal.roomCur=t,v.a.getTypeStatus())}this.drawerBlock=!1},getData:function(e){var i=this;J.a.post(e).then(function(e){try{console.log(e.data.project),window.localStorage.setItem("myProject",Q()(e.data.project)),i.golbal.myProject=e.data.project;for(var t=0;t<i.golbal.myProject.blocks.length;t++){var s=i.golbal.myProject.blocks[t];s.active=!1;for(var o=0;o<s.floors.length;o++){var a=s.floors[o];a.active=!1;for(var l=0;l<a.rooms.length;l++){a.rooms[l].active=!1}}}i.golbal.blockCur=i.golbal.myProject.blocks[0],i.golbal.blockCur.active=!0,i.golbal.floorCur=i.golbal.blockCur.floors[0],i.golbal.floorCur.active=!0,i.golbal.roomCur=i.golbal.floorCur.rooms[0],i.golbal.roomCur.active=!0;var n=[];for(t=0;t<i.golbal.myProject.blocks.length;t++)for(o=0;o<i.golbal.myProject.blocks[t].floors.length;o++)for(l=0;l<i.golbal.myProject.blocks[t].floors[o].rooms.length;l++)for(var c=0;c<i.golbal.myProject.blocks[t].floors[o].rooms[l].devices.length;c++)n.push({device:i.golbal.myProject.blocks[t].floors[o].rooms[l].devices[c],busId:i.golbal.myProject.blocks[t].floors[o].rooms[l].busId});v.a.devicesAll=n,v.a.MyProject=i.golbal.myProject,v.a.golbal=i.golbal,v.a.getTypeStatus();for(t=0;t<i.golbal.myProject.buses.length;t++){var r=i.golbal.myProject.buses[t];Object(m.a)(p.a.receiveData,r.ws_url)}i.onLog(Q()(e.data.procdject)),alert("获取成功")}catch(e){i.onLog(e),alert("获取失败")}}).catch(function(e){console.log(e),i.onLog(e),alert("获取失败")})},scanQRCode:function(){var e=this;cordova.plugins.barcodeScanner.scan(function(i){var t=i.text.replace("linkcontrol","http");console.log(t),e.getData(t)},function(e){alert(e)})},submitTest:function(){this.golbal.testServer=this.formTest.server},clearLog:function(){this.log=""},onLog:function(e){this.log=e+"\n"+this.log}},mounted:function(){this.golbal.showButtonFloor=!1,this.golbal.menuCur="user",this.formTest.server=this.golbal.testServer}},q={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"main"},[e._m(0),e._v(" "),t("div",{staticClass:"divUserContent"},[t("span",{staticClass:"title"},[e._v("管理设置")]),e._v(" "),t("div",{staticClass:"content"},[t("ul",[t("li",{on:{click:function(i){return e.scanQRCode()}}},[t("i",{staticClass:"icon-scanning"}),t("span",[e._v("扫一扫获取配置")]),e._m(1)]),e._v(" "),t("li",{on:{click:function(i){return e.drawerBlockClick()}}},[t("i",{staticClass:"icon-office"}),t("span",[e._v("楼栋管理")]),e._m(2)]),e._v(" "),t("li",{on:{click:function(i){return e.drawerThemeClick()}}},[t("i",{staticClass:"icon-pic"}),t("span",[e._v("主题样式")]),e._m(3)]),e._v(" "),t("li",{on:{click:function(i){return e.drawerTestClick()}}},[t("i",{staticClass:"icon-wrench"}),t("span",[e._v("调试")]),e._m(4)])])])]),e._v(" "),t("el-drawer",{attrs:{title:"请选择楼栋",visible:e.drawerBlock,direction:"btt","append-to-body":!0,"custom-class":"drawerBlock",size:e.heightDrawerBlock+"px"},on:{"update:visible":function(i){e.drawerBlock=i}}},[t("ul",e._l(e.golbal.myProject.blocks,function(i){return t("li",{key:i.id,on:{click:function(t){return e.blockClick(i)}}},[t("i",{staticClass:"icon-office"}),t("span",[e._v(e._s(i.name))]),e._v(" "),i.active?t("div",{staticClass:"checked"},[t("i",{staticClass:"icon-yuanxingxuanzhongfill"})]):e._e()])}),0)]),e._v(" "),t("el-drawer",{attrs:{title:"请选择主题样式",visible:e.drawerTheme,direction:"rtl","append-to-body":!0,"custom-class":"drawerTheme",size:e.widthDrawerTheme+"px"},on:{"update:visible":function(i){e.drawerTheme=i}}},[t("div",{staticClass:"divUserTheme"},[t("div",{class:"divUserThemeItem"+(1==e.golbal.themeCur?"":" divUserThemeItemC"),on:{click:function(i){return e.themeClick(1)}}},[t("div",{staticClass:"divUserThemeIcon"},[t("i",{staticClass:"icon-checkmark"})]),e._v(" "),t("div",{staticClass:"divUserThemeBoard"}),e._v(" "),t("img",{attrs:{src:"static/images/theme1.jpg"}})]),e._v(" "),t("div",{class:"divUserThemeItem"+(2==e.golbal.themeCur?"":" divUserThemeItemC"),on:{click:function(i){return e.themeClick(2)}}},[t("div",{staticClass:"divUserThemeIcon"},[t("i",{staticClass:"icon-checkmark"})]),e._v(" "),t("div",{staticClass:"divUserThemeBoard"}),e._v(" "),t("img",{attrs:{src:"static/images/theme2.jpg"}})])])]),e._v(" "),t("el-drawer",{attrs:{title:"用户调试",visible:e.drawerTest,direction:"rtl","append-to-body":!0,"custom-class":"drawerTest",size:e.widthDrawerTest+"px"},on:{"update:visible":function(i){e.drawerTest=i}}},[t("el-tabs",{staticClass:"divTabs",attrs:{type:"card"},model:{value:e.tabsTest,callback:function(i){e.tabsTest=i},expression:"tabsTest"}},[t("el-tab-pane",{attrs:{label:"参数设置",name:"tab1"}},[t("el-form",{ref:"form",staticClass:"formTest",attrs:{model:e.formTest,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"服 务 器"}},[t("el-input",{model:{value:e.formTest.server,callback:function(i){e.$set(e.formTest,"server",i)},expression:"formTest.server"}})],1),e._v(" "),t("el-form-item",[t("el-button",{on:{click:e.submitTest}},[e._v("绑定")])],1)],1)],1),e._v(" "),t("el-tab-pane",{attrs:{label:"调试日志",name:"tab2"}},[t("el-button",{on:{click:e.clearLog}},[e._v("清空")]),e._v(" "),t("div",{staticClass:"divSendMessage",style:"height:"+e.heightSendMessage+"px;overflow-y:auto"},[e._v(e._s(e.log))])],1)],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"divUserTop"},[i("div",{staticClass:"divUserFace"},[i("img",{attrs:{src:"static/images/face_man.jpg"}})]),this._v(" "),i("div",{staticClass:"divUserInfo"},[i("span",{staticClass:"spanUserInfo1"},[this._v("LinkScene")]),this._v(" "),i("span",{staticClass:"spanUserInfo2"},[this._v("用户")])])])},function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"divIcon"},[i("i",{staticClass:"icon-arrow1_right"})])},function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"divIcon"},[i("i",{staticClass:"icon-arrow1_right"})])},function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"divIcon"},[i("i",{staticClass:"icon-arrow1_right"})])},function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"divIcon"},[i("i",{staticClass:"icon-arrow1_right"})])}]},K=t("VU/8")(X,q,!1,null,null,null).exports,Z={data:function(){return{heightMessage:window.innerHeight-102}},props:["golbal"],methods:{},mounted:function(){this.golbal.showButtonFloor=!1}},ee={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"main"},[t("div",{staticClass:"divMessage",style:"height:"+e.heightMessage+"px"},e._l(e.golbal.messages,function(i){return t("div",{key:i.id,staticClass:"divMessageItem"},[t("div",{staticClass:"divTitle"},[t("i",{staticClass:"icon-mail1"}),t("span",[e._v(e._s(i.title))])]),e._v(" "),t("div",{staticClass:"divDate"},[e._v(e._s(i.date))]),e._v(" "),t("div",{staticClass:"divContent"},[e._v(e._s(i.content))])])}),0),e._v(" "),t("el-backtop",{staticStyle:{bottom:"80px",right:"10px"},attrs:{target:".divMessage"}})],1)},staticRenderFns:[]},ie=t("VU/8")(Z,ee,!1,null,null,null).exports;s.default.use(k.a);var te=new k.a({routes:[{path:"/",name:"favorite",component:B},{path:"/favorite",name:"favorite",component:B},{path:"/room",name:"room",component:$},{path:"/user",name:"user",component:K},{path:"/message",name:"message",component:ie}]});s.default.use(a.a),s.default.config.productionTip=!1,new s.default({el:"#app",router:te,components:{App:_},template:"<App/>"})},NVJ6:function(e,i,t){"use strict";i.a={HEAD:[170,170],FUNCTION_CODE:{READ:0,WRITE:64,FEEDBACK:128,STATUS_BACK:192,QUERY_STATUS:1,CONTROL:2},DEVICE_TYPE_ENUM:{DEVICE_TYPE_MAIN_ALL:0,DEVICE_TYPE_MAIN:257,DEVICE_TYPE_GATEWAY:258,DEVICE_TYPE_BUS_SCREEN:259,DEVICE_TYPE_LOGIC:260,DEVICE_TYPE_AI_GENIC:261,DEVICE_TYPE_INFRARED:513,DEVICE_TYPE_LIGHT:769,DEVICE_TYPE_DIMMER:770,DEVICE_TYPE_CURTAIN:771,DEVICE_TYPE_SCENE:772,DEVICE_TYPE_LIGHT_SCENE:773,DEVICE_TYPE_AC:1025}}},XF4N:function(e,i,t){"use strict";i.a=c,i.b=function(e,i){null==i&&console.log("socket is null");null!==i&&3===i.readyState?(i.close(),i=c(s.a.receiveData,i.url)):1===i.readyState?i.send(e):0===i.readyState&&setTimeout(function(){i.send(e)},3e3)};var s=t("uxah"),o="ws://192.168.0.119:8001",a=null,l=[],n=0;function c(e,i){if(l.length>0)for(var t=0;t<l.length;t++)if(l[t].url==i||l[t].url==i+"/"){if(3===l[t].readyState){l.splice(t,1);break}return console.log("已有websocket连接"),l[t]}var s=new WebSocket(null==i?o:i);return s.onopen=r,s.onmessage=u,s.onerror=v,s.onclose=d,l.push(s),window.addEventListener("onmessageWS",function(i){var t=i.detail.data.data,s=new FileReader;s.onload=function(){var i=new Uint8Array(this.result);null!=e&&e(i)},s.readAsArrayBuffer(t)},!1),s}function r(e){n=0,console.log(e);for(var i=0;i<l.length;i++)C(l[i])}function v(e){if(clearInterval(a),l.indexOf(e.target)>=0&&l.splice(l.indexOf(e.target),1),(n+=1)>=10)console.log("重连超出10次，重连结束");else{var i=e.target.url;c(s.a.receiveData,i)}}function u(e){window.dispatchEvent(new CustomEvent("onmessageWS",{detail:{data:e}}))}function d(e){clearInterval(a),console.log("websocket已断开")}function C(e){e.send("pc_client"),a=setInterval(function(){e.send("pc_client")},5e3)}},gQoh:function(e,i,t){"use strict";(function(e){i.a={devicesAll:null,MyProject:null,golbal:null,bytes2hex:function(i){for(var t="",s=0;s<i.length;s++)t=t+e.from([i[s]]).toString("hex")+" ";return t},getVORoomByDeviceId:function(e){var i=this.MyProject;if(null==i)return console.log("project is null"),null;for(var t=0;t<i.blocks.length;t++)for(var s=i.blocks[t],o=0;o<s.floors.length;o++)for(var a=s.floors[o],l=0;l<a.rooms.length;l++)for(var n=a.rooms[l],c=0;c<n.devices.length;c++){if(n.devices[c].id==e)return n}},getVOBus:function(e){var i=this.MyProject;if(null==i)return console.log("project is null"),null;var t=this.getVORoomByDeviceId(e);if(null==t)return null;for(var s=null,o=0;o<i.buses.length;o++)if((s=i.buses[o]).id==t.busId)return s;return null},getTypeStatus:function(){this.golbal.type[1].isOn=!1,this.golbal.type[2].isOn=!1,this.golbal.type[3].isOn=!1,this.golbal.type[4].isOn=!1;for(var e=0;e<this.golbal.roomCur.devices.length;e++){var i=this.golbal.roomCur.devices[e];switch(i.type){case"light":i.isOn&&(this.golbal.type[1].isOn=!0);break;case"dimmer":i.value>0&&(this.golbal.type[1].isOn=!0);break;case"curtain":100==i.value&&(this.golbal.type[2].isOn=!0);break;case"ac":i.isOn&&(this.golbal.type[3].isOn=!0);break;case"scene":i.isOn&&(this.golbal.type[4].isOn=!0)}}}}}).call(i,t("EuP9").Buffer)},uxah:function(e,i,t){"use strict";var s=t("NVJ6"),o=t("gQoh");i.a={receiveData:function(e){if(console.log("<== "+o.a.bytes2hex(e)),e.length==e[2])for(var i=0;i<o.a.devicesAll.length;i++){var t=o.a.devicesAll[i].device;if(e[3]==t.areacode&&e[4]==t.addr)if("light"==t.type&&(e[5]<<8)+e[6]==s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_LIGHT){var a=(e[11]<<8)+e[10];t.isOn=(a&Math.pow(2,t.channel-1))>0}else if("dimmer"==t.type&&(e[5]<<8)+e[6]==s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_DIMMER)1==t.channel?t.value=e[10]:t.value=e[11];else if("curtain"==t.type&&(e[5]<<8)+e[6]==s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_CURTAIN)1==t.channel?t.value=e[10]:t.value=e[11];else if("ac"==t.type&&(e[5]<<8)+e[6]==s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_AC){t.value=e[9];a=e[8];switch(t.isOn=a>>7==1,t.lock=a>>5&3,t.fan=a>>3&3,3&a){case 1:t.mode="制冷";break;case 2:t.mode="制热";break;case 3:t.mode="送风";break;default:t.mode="恒温"}}else if("scene"==t.type&&(e[5]<<8)+e[6]==s.a.DEVICE_TYPE_ENUM.DEVICE_TYPE_SCENE){a=(e[11]<<8)+e[10];t.isOn=(a&Math.pow(2,t.channel-1))>0}}}}}},["NHnr"]);
//# sourceMappingURL=app.f5a669ea56697f6e12a5.js.map